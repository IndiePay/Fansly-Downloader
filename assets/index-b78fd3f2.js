var Xs=Object.defineProperty;var Ys=(t,e,r)=>e in t?Xs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ht=(t,e,r)=>(Ys(t,typeof e!="symbol"?e+"":e,r),r);import{aG as to,e as yt,d as yr,Y as eo,aH as Gi,aI as Zs,aJ as Ks,aK as Js,b as ce,f as Gn,_ as Te,u as Br,aL as ro,C as sn,ai as no,aM as Qs,aN as ji,aO as tu,w as io,B as Hi,v as eu,T as ru,x as nu,P as iu,a5 as ii}from"./index-a8514ad4.js";import{a1 as dt,i as Yr,Z as Ot,X as bn,W as au,I as J,a6 as ou,D as _t,a2 as Fr,an as su,a7 as _r,z as Rt,a8 as _e,a3 as Ce,F as Yt,G as un,J as ao,ai as uu,a0 as jn,ae as oo,aJ as lu,m as cu,K as fu,aj as du,aK as pu,R as Dr,ag as je,S as ge,a9 as ai,af as Tr,b as hu,aa as mr,aL as mu,V as gu,aM as yu,O as vu,at as Ct,au as oi,aN as Oe,aO as nr,aP as bu,aQ as Eu,w as wu}from"./common-1bc81878.js";const re=(t,e,{checkForDefaultPrevented:r=!0}={})=>a=>{const i=t==null?void 0:t(a);if(r===!1||!i)return e==null?void 0:e(a)};function Au(t){return t===void 0}const Su=to({type:yt(Boolean),default:null}),_u=to({type:yt(Function)}),so=t=>{const e=`update:${t}`,r=`onUpdate:${t}`,n=[e],a={[t]:Su,[r]:_u};return{useModelToggle:({indicator:o,toggleReason:s,shouldHideWhenRouteChanges:u,shouldProceed:l,onShow:p,onHide:m})=>{const d=au(),{emit:h}=d,c=d.props,f=dt(()=>Yr(c[r])),y=dt(()=>c[t]===null),g=D=>{o.value!==!0&&(o.value=!0,s&&(s.value=D),Yr(p)&&p(D))},v=D=>{o.value!==!1&&(o.value=!1,s&&(s.value=D),Yr(m)&&m(D))},w=D=>{if(c.disabled===!0||Yr(l)&&!l())return;const N=f.value&&yr;N&&h(e,!0),(y.value||!N)&&g(D)},A=D=>{if(c.disabled===!0||!yr)return;const N=f.value&&yr;N&&h(e,!1),(y.value||!N)&&v(D)},_=D=>{eo(D)&&(c.disabled&&D?f.value&&h(e,!1):o.value!==D&&(D?g():v()))},T=()=>{o.value?A():w()};return Ot(()=>c[t],_),u&&d.appContext.config.globalProperties.$route!==void 0&&Ot(()=>({...d.proxy.$route}),()=>{u.value&&o.value&&A()}),bn(()=>{_(c[t])}),{hide:A,show:w,toggle:T,hasUpdateHandler:f}},useModelToggleProps:a,useModelToggleEmits:n}};so("modelValue");var Pt="top",zt="bottom",$t="right",Bt="left",si="auto",kr=[Pt,zt,$t,Bt],He="start",Cr="end",Du="clippingParents",uo="viewport",ur="popper",Tu="reference",Vi=kr.reduce(function(t,e){return t.concat([e+"-"+He,e+"-"+Cr])},[]),ui=[].concat(kr,[si]).reduce(function(t,e){return t.concat([e,e+"-"+He,e+"-"+Cr])},[]),Cu="beforeRead",Ou="read",xu="afterRead",Iu="beforeMain",Ru="main",Nu="afterMain",Pu="beforeWrite",Bu="write",Fu="afterWrite",ku=[Cu,Ou,xu,Iu,Ru,Nu,Pu,Bu,Fu];function Qt(t){return t?(t.nodeName||"").toLowerCase():null}function Gt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ve(t){var e=Gt(t).Element;return t instanceof e||t instanceof Element}function Mt(t){var e=Gt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function li(t){if(typeof ShadowRoot>"u")return!1;var e=Gt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Lu(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},a=e.attributes[r]||{},i=e.elements[r];!Mt(i)||!Qt(i)||(Object.assign(i.style,n),Object.keys(a).forEach(function(o){var s=a[o];s===!1?i.removeAttribute(o):i.setAttribute(o,s===!0?"":s)}))})}function Uu(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var a=e.elements[n],i=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),s=o.reduce(function(u,l){return u[l]="",u},{});!Mt(a)||!Qt(a)||(Object.assign(a.style,s),Object.keys(i).forEach(function(u){a.removeAttribute(u)}))})}}var lo={name:"applyStyles",enabled:!0,phase:"write",fn:Lu,effect:Uu,requires:["computeStyles"]};function Zt(t){return t.split("-")[0]}var we=Math.max,ln=Math.min,We=Math.round;function Xe(t,e){e===void 0&&(e=!1);var r=t.getBoundingClientRect(),n=1,a=1;if(Mt(t)&&e){var i=t.offsetHeight,o=t.offsetWidth;o>0&&(n=We(r.width)/o||1),i>0&&(a=We(r.height)/i||1)}return{width:r.width/n,height:r.height/a,top:r.top/a,right:r.right/n,bottom:r.bottom/a,left:r.left/n,x:r.left/n,y:r.top/a}}function ci(t){var e=Xe(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function co(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&li(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function se(t){return Gt(t).getComputedStyle(t)}function Mu(t){return["table","td","th"].indexOf(Qt(t))>=0}function ye(t){return((Ve(t)?t.ownerDocument:t.document)||window.document).documentElement}function En(t){return Qt(t)==="html"?t:t.assignedSlot||t.parentNode||(li(t)?t.host:null)||ye(t)}function Wi(t){return!Mt(t)||se(t).position==="fixed"?null:t.offsetParent}function zu(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Mt(t)){var n=se(t);if(n.position==="fixed")return null}var a=En(t);for(li(a)&&(a=a.host);Mt(a)&&["html","body"].indexOf(Qt(a))<0;){var i=se(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Lr(t){for(var e=Gt(t),r=Wi(t);r&&Mu(r)&&se(r).position==="static";)r=Wi(r);return r&&(Qt(r)==="html"||Qt(r)==="body"&&se(r).position==="static")?e:r||zu(t)||e}function fi(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function vr(t,e,r){return we(t,ln(e,r))}function $u(t,e,r){var n=vr(t,e,r);return n>r?r:n}function fo(){return{top:0,right:0,bottom:0,left:0}}function po(t){return Object.assign({},fo(),t)}function ho(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var qu=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,po(typeof t!="number"?t:ho(t,kr))};function Gu(t){var e,r=t.state,n=t.name,a=t.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,s=Zt(r.placement),u=fi(s),l=[Bt,$t].indexOf(s)>=0,p=l?"height":"width";if(!(!i||!o)){var m=qu(a.padding,r),d=ci(i),h=u==="y"?Pt:Bt,c=u==="y"?zt:$t,f=r.rects.reference[p]+r.rects.reference[u]-o[u]-r.rects.popper[p],y=o[u]-r.rects.reference[u],g=Lr(i),v=g?u==="y"?g.clientHeight||0:g.clientWidth||0:0,w=f/2-y/2,A=m[h],_=v-d[p]-m[c],T=v/2-d[p]/2+w,D=vr(A,T,_),N=u;r.modifiersData[n]=(e={},e[N]=D,e.centerOffset=D-T,e)}}function ju(t){var e=t.state,r=t.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||!co(e.elements.popper,a)||(e.elements.arrow=a))}var Hu={name:"arrow",enabled:!0,phase:"main",fn:Gu,effect:ju,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ye(t){return t.split("-")[1]}var Vu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wu(t){var e=t.x,r=t.y,n=window,a=n.devicePixelRatio||1;return{x:We(e*a)/a||0,y:We(r*a)/a||0}}function Xi(t){var e,r=t.popper,n=t.popperRect,a=t.placement,i=t.variation,o=t.offsets,s=t.position,u=t.gpuAcceleration,l=t.adaptive,p=t.roundOffsets,m=t.isFixed,d=o.x,h=d===void 0?0:d,c=o.y,f=c===void 0?0:c,y=typeof p=="function"?p({x:h,y:f}):{x:h,y:f};h=y.x,f=y.y;var g=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),w=Bt,A=Pt,_=window;if(l){var T=Lr(r),D="clientHeight",N="clientWidth";if(T===Gt(r)&&(T=ye(r),se(T).position!=="static"&&s==="absolute"&&(D="scrollHeight",N="scrollWidth")),T=T,a===Pt||(a===Bt||a===$t)&&i===Cr){A=zt;var C=m&&T===_&&_.visualViewport?_.visualViewport.height:T[D];f-=C-n.height,f*=u?1:-1}if(a===Bt||(a===Pt||a===zt)&&i===Cr){w=$t;var x=m&&T===_&&_.visualViewport?_.visualViewport.width:T[N];h-=x-n.width,h*=u?1:-1}}var U=Object.assign({position:s},l&&Vu),S=p===!0?Wu({x:h,y:f}):{x:h,y:f};if(h=S.x,f=S.y,u){var R;return Object.assign({},U,(R={},R[A]=v?"0":"",R[w]=g?"0":"",R.transform=(_.devicePixelRatio||1)<=1?"translate("+h+"px, "+f+"px)":"translate3d("+h+"px, "+f+"px, 0)",R))}return Object.assign({},U,(e={},e[A]=v?f+"px":"",e[w]=g?h+"px":"",e.transform="",e))}function Xu(t){var e=t.state,r=t.options,n=r.gpuAcceleration,a=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,s=r.roundOffsets,u=s===void 0?!0:s,l={placement:Zt(e.placement),variation:Ye(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Xi(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Xi(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var mo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xu,data:{}},Zr={passive:!0};function Yu(t){var e=t.state,r=t.instance,n=t.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,s=o===void 0?!0:o,u=Gt(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&l.forEach(function(p){p.addEventListener("scroll",r.update,Zr)}),s&&u.addEventListener("resize",r.update,Zr),function(){i&&l.forEach(function(p){p.removeEventListener("scroll",r.update,Zr)}),s&&u.removeEventListener("resize",r.update,Zr)}}var go={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yu,data:{}},Zu={left:"right",right:"left",bottom:"top",top:"bottom"};function nn(t){return t.replace(/left|right|bottom|top/g,function(e){return Zu[e]})}var Ku={start:"end",end:"start"};function Yi(t){return t.replace(/start|end/g,function(e){return Ku[e]})}function di(t){var e=Gt(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function pi(t){return Xe(ye(t)).left+di(t).scrollLeft}function Ju(t){var e=Gt(t),r=ye(t),n=e.visualViewport,a=r.clientWidth,i=r.clientHeight,o=0,s=0;return n&&(a=n.width,i=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:a,height:i,x:o+pi(t),y:s}}function Qu(t){var e,r=ye(t),n=di(t),a=(e=t.ownerDocument)==null?void 0:e.body,i=we(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=we(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-n.scrollLeft+pi(t),u=-n.scrollTop;return se(a||r).direction==="rtl"&&(s+=we(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:s,y:u}}function hi(t){var e=se(t),r=e.overflow,n=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function yo(t){return["html","body","#document"].indexOf(Qt(t))>=0?t.ownerDocument.body:Mt(t)&&hi(t)?t:yo(En(t))}function br(t,e){var r;e===void 0&&(e=[]);var n=yo(t),a=n===((r=t.ownerDocument)==null?void 0:r.body),i=Gt(n),o=a?[i].concat(i.visualViewport||[],hi(n)?n:[]):n,s=e.concat(o);return a?s:s.concat(br(En(o)))}function Hn(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function tl(t){var e=Xe(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Zi(t,e){return e===uo?Hn(Ju(t)):Ve(e)?tl(e):Hn(Qu(ye(t)))}function el(t){var e=br(En(t)),r=["absolute","fixed"].indexOf(se(t).position)>=0,n=r&&Mt(t)?Lr(t):t;return Ve(n)?e.filter(function(a){return Ve(a)&&co(a,n)&&Qt(a)!=="body"}):[]}function rl(t,e,r){var n=e==="clippingParents"?el(t):[].concat(e),a=[].concat(n,[r]),i=a[0],o=a.reduce(function(s,u){var l=Zi(t,u);return s.top=we(l.top,s.top),s.right=ln(l.right,s.right),s.bottom=ln(l.bottom,s.bottom),s.left=we(l.left,s.left),s},Zi(t,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function vo(t){var e=t.reference,r=t.element,n=t.placement,a=n?Zt(n):null,i=n?Ye(n):null,o=e.x+e.width/2-r.width/2,s=e.y+e.height/2-r.height/2,u;switch(a){case Pt:u={x:o,y:e.y-r.height};break;case zt:u={x:o,y:e.y+e.height};break;case $t:u={x:e.x+e.width,y:s};break;case Bt:u={x:e.x-r.width,y:s};break;default:u={x:e.x,y:e.y}}var l=a?fi(a):null;if(l!=null){var p=l==="y"?"height":"width";switch(i){case He:u[l]=u[l]-(e[p]/2-r[p]/2);break;case Cr:u[l]=u[l]+(e[p]/2-r[p]/2);break}}return u}function Or(t,e){e===void 0&&(e={});var r=e,n=r.placement,a=n===void 0?t.placement:n,i=r.boundary,o=i===void 0?Du:i,s=r.rootBoundary,u=s===void 0?uo:s,l=r.elementContext,p=l===void 0?ur:l,m=r.altBoundary,d=m===void 0?!1:m,h=r.padding,c=h===void 0?0:h,f=po(typeof c!="number"?c:ho(c,kr)),y=p===ur?Tu:ur,g=t.rects.popper,v=t.elements[d?y:p],w=rl(Ve(v)?v:v.contextElement||ye(t.elements.popper),o,u),A=Xe(t.elements.reference),_=vo({reference:A,element:g,strategy:"absolute",placement:a}),T=Hn(Object.assign({},g,_)),D=p===ur?T:A,N={top:w.top-D.top+f.top,bottom:D.bottom-w.bottom+f.bottom,left:w.left-D.left+f.left,right:D.right-w.right+f.right},C=t.modifiersData.offset;if(p===ur&&C){var x=C[a];Object.keys(N).forEach(function(U){var S=[$t,zt].indexOf(U)>=0?1:-1,R=[Pt,zt].indexOf(U)>=0?"y":"x";N[U]+=x[R]*S})}return N}function nl(t,e){e===void 0&&(e={});var r=e,n=r.placement,a=r.boundary,i=r.rootBoundary,o=r.padding,s=r.flipVariations,u=r.allowedAutoPlacements,l=u===void 0?ui:u,p=Ye(n),m=p?s?Vi:Vi.filter(function(c){return Ye(c)===p}):kr,d=m.filter(function(c){return l.indexOf(c)>=0});d.length===0&&(d=m);var h=d.reduce(function(c,f){return c[f]=Or(t,{placement:f,boundary:a,rootBoundary:i,padding:o})[Zt(f)],c},{});return Object.keys(h).sort(function(c,f){return h[c]-h[f]})}function il(t){if(Zt(t)===si)return[];var e=nn(t);return[Yi(t),e,Yi(e)]}function al(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,s=o===void 0?!0:o,u=r.fallbackPlacements,l=r.padding,p=r.boundary,m=r.rootBoundary,d=r.altBoundary,h=r.flipVariations,c=h===void 0?!0:h,f=r.allowedAutoPlacements,y=e.options.placement,g=Zt(y),v=g===y,w=u||(v||!c?[nn(y)]:il(y)),A=[y].concat(w).reduce(function(Y,B){return Y.concat(Zt(B)===si?nl(e,{placement:B,boundary:p,rootBoundary:m,padding:l,flipVariations:c,allowedAutoPlacements:f}):B)},[]),_=e.rects.reference,T=e.rects.popper,D=new Map,N=!0,C=A[0],x=0;x<A.length;x++){var U=A[x],S=Zt(U),R=Ye(U)===He,b=[Pt,zt].indexOf(S)>=0,F=b?"width":"height",$=Or(e,{placement:U,boundary:p,rootBoundary:m,altBoundary:d,padding:l}),P=b?R?$t:Bt:R?zt:Pt;_[F]>T[F]&&(P=nn(P));var K=nn(P),j=[];if(i&&j.push($[S]<=0),s&&j.push($[P]<=0,$[K]<=0),j.every(function(Y){return Y})){C=U,N=!1;break}D.set(U,j)}if(N)for(var et=c?3:1,M=function(Y){var B=A.find(function(Q){var tt=D.get(Q);if(tt)return tt.slice(0,Y).every(function(W){return W})});if(B)return C=B,"break"},k=et;k>0;k--){var at=M(k);if(at==="break")break}e.placement!==C&&(e.modifiersData[n]._skip=!0,e.placement=C,e.reset=!0)}}var ol={name:"flip",enabled:!0,phase:"main",fn:al,requiresIfExists:["offset"],data:{_skip:!1}};function Ki(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Ji(t){return[Pt,$t,zt,Bt].some(function(e){return t[e]>=0})}function sl(t){var e=t.state,r=t.name,n=e.rects.reference,a=e.rects.popper,i=e.modifiersData.preventOverflow,o=Or(e,{elementContext:"reference"}),s=Or(e,{altBoundary:!0}),u=Ki(o,n),l=Ki(s,a,i),p=Ji(u),m=Ji(l);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:p,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}var ul={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:sl};function ll(t,e,r){var n=Zt(t),a=[Bt,Pt].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,o=i[0],s=i[1];return o=o||0,s=(s||0)*a,[Bt,$t].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function cl(t){var e=t.state,r=t.options,n=t.name,a=r.offset,i=a===void 0?[0,0]:a,o=ui.reduce(function(p,m){return p[m]=ll(m,e.rects,i),p},{}),s=o[e.placement],u=s.x,l=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[n]=o}var fl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cl};function dl(t){var e=t.state,r=t.name;e.modifiersData[r]=vo({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var bo={name:"popperOffsets",enabled:!0,phase:"read",fn:dl,data:{}};function pl(t){return t==="x"?"y":"x"}function hl(t){var e=t.state,r=t.options,n=t.name,a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,s=o===void 0?!1:o,u=r.boundary,l=r.rootBoundary,p=r.altBoundary,m=r.padding,d=r.tether,h=d===void 0?!0:d,c=r.tetherOffset,f=c===void 0?0:c,y=Or(e,{boundary:u,rootBoundary:l,padding:m,altBoundary:p}),g=Zt(e.placement),v=Ye(e.placement),w=!v,A=fi(g),_=pl(A),T=e.modifiersData.popperOffsets,D=e.rects.reference,N=e.rects.popper,C=typeof f=="function"?f(Object.assign({},e.rects,{placement:e.placement})):f,x=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,S={x:0,y:0};if(T){if(i){var R,b=A==="y"?Pt:Bt,F=A==="y"?zt:$t,$=A==="y"?"height":"width",P=T[A],K=P+y[b],j=P-y[F],et=h?-N[$]/2:0,M=v===He?D[$]:N[$],k=v===He?-N[$]:-D[$],at=e.elements.arrow,Y=h&&at?ci(at):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:fo(),Q=B[b],tt=B[F],W=vr(0,D[$],Y[$]),rt=w?D[$]/2-et-W-Q-x.mainAxis:M-W-Q-x.mainAxis,ot=w?-D[$]/2+et+W+tt+x.mainAxis:k+W+tt+x.mainAxis,nt=e.elements.arrow&&Lr(e.elements.arrow),ut=nt?A==="y"?nt.clientTop||0:nt.clientLeft||0:0,ft=(R=U==null?void 0:U[A])!=null?R:0,E=P+rt-ft-ut,G=P+ot-ft,q=vr(h?ln(K,E):K,P,h?we(j,G):j);T[A]=q,S[A]=q-P}if(s){var I,O=A==="x"?Pt:Bt,L=A==="x"?zt:$t,H=T[_],V=_==="y"?"height":"width",z=H+y[O],X=H-y[L],it=[Pt,Bt].indexOf(g)!==-1,Z=(I=U==null?void 0:U[_])!=null?I:0,st=it?z:H-D[V]-N[V]-Z+x.altAxis,pt=it?H+D[V]+N[V]-Z-x.altAxis:X,lt=h&&it?$u(st,H,pt):vr(h?st:z,H,h?pt:X);T[_]=lt,S[_]=lt-H}e.modifiersData[n]=S}}var ml={name:"preventOverflow",enabled:!0,phase:"main",fn:hl,requiresIfExists:["offset"]};function gl(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function yl(t){return t===Gt(t)||!Mt(t)?di(t):gl(t)}function vl(t){var e=t.getBoundingClientRect(),r=We(e.width)/t.offsetWidth||1,n=We(e.height)/t.offsetHeight||1;return r!==1||n!==1}function bl(t,e,r){r===void 0&&(r=!1);var n=Mt(e),a=Mt(e)&&vl(e),i=ye(e),o=Xe(t,a),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((Qt(e)!=="body"||hi(i))&&(s=yl(e)),Mt(e)?(u=Xe(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):i&&(u.x=pi(i))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function El(t){var e=new Map,r=new Set,n=[];t.forEach(function(i){e.set(i.name,i)});function a(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(s){if(!r.has(s)){var u=e.get(s);u&&a(u)}}),n.push(i)}return t.forEach(function(i){r.has(i.name)||a(i)}),n}function wl(t){var e=El(t);return ku.reduce(function(r,n){return r.concat(e.filter(function(a){return a.phase===n}))},[])}function Al(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Sl(t){var e=t.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Qi={placement:"bottom",modifiers:[],strategy:"absolute"};function ta(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function mi(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,a=e.defaultOptions,i=a===void 0?Qi:a;return function(o,s,u){u===void 0&&(u=i);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qi,i),modifiersData:{},elements:{reference:o,popper:s},attributes:{},styles:{}},p=[],m=!1,d={state:l,setOptions:function(f){var y=typeof f=="function"?f(l.options):f;c(),l.options=Object.assign({},i,l.options,y),l.scrollParents={reference:Ve(o)?br(o):o.contextElement?br(o.contextElement):[],popper:br(s)};var g=wl(Sl([].concat(n,l.options.modifiers)));return l.orderedModifiers=g.filter(function(v){return v.enabled}),h(),d.update()},forceUpdate:function(){if(!m){var f=l.elements,y=f.reference,g=f.popper;if(ta(y,g)){l.rects={reference:bl(y,Lr(g),l.options.strategy==="fixed"),popper:ci(g)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(N){return l.modifiersData[N.name]=Object.assign({},N.data)});for(var v=0;v<l.orderedModifiers.length;v++){if(l.reset===!0){l.reset=!1,v=-1;continue}var w=l.orderedModifiers[v],A=w.fn,_=w.options,T=_===void 0?{}:_,D=w.name;typeof A=="function"&&(l=A({state:l,options:T,name:D,instance:d})||l)}}}},update:Al(function(){return new Promise(function(f){d.forceUpdate(),f(l)})}),destroy:function(){c(),m=!0}};if(!ta(o,s))return d;d.setOptions(u).then(function(f){!m&&u.onFirstUpdate&&u.onFirstUpdate(f)});function h(){l.orderedModifiers.forEach(function(f){var y=f.name,g=f.options,v=g===void 0?{}:g,w=f.effect;if(typeof w=="function"){var A=w({state:l,name:y,instance:d,options:v}),_=function(){};p.push(A||_)}})}function c(){p.forEach(function(f){return f()}),p=[]}return d}}mi();var _l=[go,bo,mo,lo];mi({defaultModifiers:_l});var Dl=[go,bo,mo,lo,fl,ol,ml,Hu,ul],Tl=mi({defaultModifiers:Dl});const Cl=(t,e,r={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:u})=>{const l=Ol(u);Object.assign(o.value,l)},requires:["computeStyles"]},a=dt(()=>{const{onFirstUpdate:u,placement:l,strategy:p,modifiers:m}=J(r);return{onFirstUpdate:u,placement:l||"bottom",strategy:p||"absolute",modifiers:[...m||[],n,{name:"applyStyles",enabled:!1}]}}),i=ou(),o=_t({styles:{popper:{position:J(a).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=()=>{i.value&&(i.value.destroy(),i.value=void 0)};return Ot(a,u=>{const l=J(i);l&&l.setOptions(u)},{deep:!0}),Ot([t,e],([u,l])=>{s(),!(!u||!l)&&(i.value=Tl(u,l,J(a)))}),Fr(()=>{s()}),{state:dt(()=>{var u;return{...((u=J(i))==null?void 0:u.state)||{}}}),styles:dt(()=>J(o).styles),attributes:dt(()=>J(o).attributes),update:()=>{var u;return(u=J(i))==null?void 0:u.update()},forceUpdate:()=>{var u;return(u=J(i))==null?void 0:u.forceUpdate()},instanceRef:dt(()=>J(i))}};function Ol(t){const e=Object.keys(t.elements),r=Gi(e.map(a=>[a,t.styles[a]||{}])),n=Gi(e.map(a=>[a,t.attributes[a]]));return{styles:r,attributes:n}}function ea(){let t;const e=(n,a)=>{r(),t=window.setTimeout(n,a)},r=()=>window.clearTimeout(t);return Zs(()=>r()),{registerTimeout:e,cancelTimeout:r}}let ra;const Eo=()=>{const t=Ks(),e=Js(),r=dt(()=>`${t.value}-popper-container-${e.prefix}`),n=dt(()=>`#${r.value}`);return{id:r,selector:n}},xl=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},Il=()=>{const{id:t,selector:e}=Eo();return su(()=>{yr&&!ra&&!document.body.querySelector(e.value)&&(ra=xl(t.value))}),{id:t,selector:e}},Rl=ce({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),Nl=({showAfter:t,hideAfter:e,autoClose:r,open:n,close:a})=>{const{registerTimeout:i}=ea(),{registerTimeout:o,cancelTimeout:s}=ea();return{onOpen:p=>{i(()=>{n(p);const m=J(r);Gn(m)&&m>0&&o(()=>{a(p)},m)},J(t))},onClose:p=>{s(),i(()=>{a(p)},J(e))}}},wo=Symbol("elForwardRef"),Pl=t=>{_r(wo,{setForwardRef:r=>{t.value=r}})},Bl=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),gi=Symbol("popper"),Ao=Symbol("popperContent"),Fl=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],So=ce({role:{type:String,values:Fl,default:"tooltip"}}),kl=Rt({name:"ElPopper",inheritAttrs:!1}),Ll=Rt({...kl,props:So,setup(t,{expose:e}){const r=t,n=_t(),a=_t(),i=_t(),o=_t(),s=dt(()=>r.role),u={triggerRef:n,popperInstanceRef:a,contentRef:i,referenceRef:o,role:s};return e(u),_r(gi,u),(l,p)=>_e(l.$slots,"default")}});var Ul=Te(Ll,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const _o=ce({arrowOffset:{type:Number,default:5}}),Ml=Rt({name:"ElPopperArrow",inheritAttrs:!1}),zl=Rt({...Ml,props:_o,setup(t,{expose:e}){const r=t,n=Br("popper"),{arrowOffset:a,arrowRef:i,arrowStyle:o}=Ce(Ao,void 0);return Ot(()=>r.arrowOffset,s=>{a.value=s}),Fr(()=>{i.value=void 0}),e({arrowRef:i}),(s,u)=>(Yt(),un("span",{ref_key:"arrowRef",ref:i,class:ao(J(n).e("arrow")),style:uu(J(o)),"data-popper-arrow":""},null,6))}});var $l=Te(zl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const ql="ElOnlyChild",Gl=Rt({name:ql,setup(t,{slots:e,attrs:r}){var n;const a=Ce(wo),i=Bl((n=a==null?void 0:a.setForwardRef)!=null?n:jn);return()=>{var o;const s=(o=e.default)==null?void 0:o.call(e,r);if(!s||s.length>1)return null;const u=Do(s);return u?oo(lu(u,r),[[i]]):null}}});function Do(t){if(!t)return null;const e=t;for(const r of e){if(cu(r))switch(r.type){case pu:continue;case du:case"svg":return na(r);case fu:return Do(r.children);default:return r}return na(r)}return null}function na(t){const e=Br("only-child");return Dr("span",{class:e.e("content")},[t])}const To=ce({virtualRef:{type:yt(Object)},virtualTriggering:Boolean,onMouseenter:{type:yt(Function)},onMouseleave:{type:yt(Function)},onClick:{type:yt(Function)},onKeydown:{type:yt(Function)},onFocus:{type:yt(Function)},onBlur:{type:yt(Function)},onContextmenu:{type:yt(Function)},id:String,open:Boolean}),jl=Rt({name:"ElPopperTrigger",inheritAttrs:!1}),Hl=Rt({...jl,props:To,setup(t,{expose:e}){const r=t,{role:n,triggerRef:a}=Ce(gi,void 0);Pl(a);const i=dt(()=>s.value?r.id:void 0),o=dt(()=>{if(n&&n.value==="tooltip")return r.open&&r.id?r.id:void 0}),s=dt(()=>{if(n&&n.value!=="tooltip")return n.value}),u=dt(()=>s.value?`${r.open}`:void 0);let l;return bn(()=>{Ot(()=>r.virtualRef,p=>{p&&(a.value=ro(p))},{immediate:!0}),Ot(a,(p,m)=>{l==null||l(),l=void 0,sn(p)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(d=>{var h;const c=r[d];c&&(p.addEventListener(d.slice(2).toLowerCase(),c),(h=m==null?void 0:m.removeEventListener)==null||h.call(m,d.slice(2).toLowerCase(),c))}),l=Ot([i,o,s,u],d=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((h,c)=>{no(d[c])?p.removeAttribute(h):p.setAttribute(h,d[c])})},{immediate:!0})),sn(m)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(d=>m.removeAttribute(d))},{immediate:!0})}),Fr(()=>{l==null||l(),l=void 0}),e({triggerRef:a}),(p,m)=>p.virtualTriggering?Tr("v-if",!0):(Yt(),je(J(Gl),ai({key:0},p.$attrs,{"aria-controls":J(i),"aria-describedby":J(o),"aria-expanded":J(u),"aria-haspopup":J(s)}),{default:ge(()=>[_e(p.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Vl=Te(Hl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const Wl=["fixed","absolute"],Xl=ce({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:yt(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:ui,default:"bottom"},popperOptions:{type:yt(Object),default:()=>({})},strategy:{type:String,values:Wl,default:"absolute"}}),Co=ce({...Xl,id:String,style:{type:yt([String,Array,Object])},className:{type:yt([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:yt([String,Array,Object])},popperStyle:{type:yt([String,Array,Object])},referenceEl:{type:yt(Object)},triggerTargetEl:{type:yt(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),Yl={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},Zl=(t,e=[])=>{const{placement:r,strategy:n,popperOptions:a}=t,i={placement:r,strategy:n,...a,modifiers:[...Jl(t),...e]};return Ql(i,a==null?void 0:a.modifiers),i},Kl=t=>{if(yr)return ro(t)};function Jl(t){const{offset:e,gpuAcceleration:r,fallbackPlacements:n}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:r}}]}function Ql(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const tc=0,ec=t=>{const{popperInstanceRef:e,contentRef:r,triggerRef:n,role:a}=Ce(gi,void 0),i=_t(),o=_t(),s=dt(()=>({name:"eventListeners",enabled:!!t.visible})),u=dt(()=>{var g;const v=J(i),w=(g=J(o))!=null?g:tc;return{name:"arrow",enabled:!Au(v),options:{element:v,padding:w}}}),l=dt(()=>({onFirstUpdate:()=>{c()},...Zl(t,[J(u),J(s)])})),p=dt(()=>Kl(t.referenceEl)||J(n)),{attributes:m,state:d,styles:h,update:c,forceUpdate:f,instanceRef:y}=Cl(p,r,l);return Ot(y,g=>e.value=g),bn(()=>{Ot(()=>{var g;return(g=J(p))==null?void 0:g.getBoundingClientRect()},()=>{c()})}),{attributes:m,arrowRef:i,contentRef:r,instanceRef:y,state:d,styles:h,role:a,forceUpdate:f,update:c}},rc=(t,{attributes:e,styles:r,role:n})=>{const{nextZIndex:a}=Qs(),i=Br("popper"),o=dt(()=>J(e).popper),s=_t(Gn(t.zIndex)?t.zIndex:a()),u=dt(()=>[i.b(),i.is("pure",t.pure),i.is(t.effect),t.popperClass]),l=dt(()=>[{zIndex:J(s)},J(r).popper,t.popperStyle||{}]),p=dt(()=>n.value==="dialog"?"false":void 0),m=dt(()=>J(r).arrow||{});return{ariaModal:p,arrowStyle:m,contentAttrs:o,contentClass:u,contentStyle:l,contentZIndex:s,updateZIndex:()=>{s.value=Gn(t.zIndex)?t.zIndex:a()}}},nc=(t,e)=>{const r=_t(!1),n=_t();return{focusStartRef:n,trapped:r,onFocusAfterReleased:l=>{var p;((p=l.detail)==null?void 0:p.focusReason)!=="pointer"&&(n.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:l=>{t.visible&&!r.value&&(l.target&&(n.value=l.target),r.value=!0)},onFocusoutPrevented:l=>{t.trapping||(l.detail.focusReason==="pointer"&&l.preventDefault(),r.value=!1)},onReleaseRequested:()=>{r.value=!1,e("close")}}},ic=Rt({name:"ElPopperContent"}),ac=Rt({...ic,props:Co,emits:Yl,setup(t,{expose:e,emit:r}){const n=t,{focusStartRef:a,trapped:i,onFocusAfterReleased:o,onFocusAfterTrapped:s,onFocusInTrap:u,onFocusoutPrevented:l,onReleaseRequested:p}=nc(n,r),{attributes:m,arrowRef:d,contentRef:h,styles:c,instanceRef:f,role:y,update:g}=ec(n),{ariaModal:v,arrowStyle:w,contentAttrs:A,contentClass:_,contentStyle:T,updateZIndex:D}=rc(n,{styles:c,attributes:m,role:y}),N=Ce(ji,void 0),C=_t();_r(Ao,{arrowStyle:w,arrowRef:d,arrowOffset:C}),N&&(N.addInputId||N.removeInputId)&&_r(ji,{...N,addInputId:jn,removeInputId:jn});let x;const U=(R=!0)=>{g(),R&&D()},S=()=>{U(!1),n.visible&&n.focusOnShow?i.value=!0:n.visible===!1&&(i.value=!1)};return bn(()=>{Ot(()=>n.triggerTargetEl,(R,b)=>{x==null||x(),x=void 0;const F=J(R||h.value),$=J(b||h.value);sn(F)&&(x=Ot([y,()=>n.ariaLabel,v,()=>n.id],P=>{["role","aria-label","aria-modal","id"].forEach((K,j)=>{no(P[j])?F.removeAttribute(K):F.setAttribute(K,P[j])})},{immediate:!0})),$!==F&&sn($)&&["role","aria-label","aria-modal","id"].forEach(P=>{$.removeAttribute(P)})},{immediate:!0}),Ot(()=>n.visible,S,{immediate:!0})}),Fr(()=>{x==null||x(),x=void 0}),e({popperContentRef:h,popperInstanceRef:f,updatePopper:U,contentStyle:T}),(R,b)=>(Yt(),un("div",ai({ref_key:"contentRef",ref:h},J(A),{style:J(T),class:J(_),tabindex:"-1",onMouseenter:b[0]||(b[0]=F=>R.$emit("mouseenter",F)),onMouseleave:b[1]||(b[1]=F=>R.$emit("mouseleave",F))}),[Dr(J(tu),{trapped:J(i),"trap-on-focus-in":!0,"focus-trap-el":J(h),"focus-start-el":J(a),onFocusAfterTrapped:J(s),onFocusAfterReleased:J(o),onFocusin:J(u),onFocusoutPrevented:J(l),onReleaseRequested:J(p)},{default:ge(()=>[_e(R.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var oc=Te(ac,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const sc=io(Ul),yi=Symbol("elTooltip"),Oo=ce({...Rl,...Co,appendTo:{type:yt([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:yt(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),xo=ce({...To,disabled:Boolean,trigger:{type:yt([String,Array]),default:"hover"},triggerKeys:{type:yt(Array),default:()=>[Hi.enter,Hi.space]}}),{useModelToggleProps:uc,useModelToggleEmits:lc,useModelToggle:cc}=so("visible"),fc=ce({...So,...uc,...Oo,...xo,..._o,showArrow:{type:Boolean,default:!0}}),dc=[...lc,"before-show","before-hide","show","hide","open","close"],pc=(t,e)=>hu(t)?t.includes(e):t===e,Ie=(t,e,r)=>n=>{pc(J(t),e)&&r(n)},hc=Rt({name:"ElTooltipTrigger"}),mc=Rt({...hc,props:xo,setup(t,{expose:e}){const r=t,n=Br("tooltip"),{controlled:a,id:i,open:o,onOpen:s,onClose:u,onToggle:l}=Ce(yi,void 0),p=_t(null),m=()=>{if(J(a)||r.disabled)return!0},d=mr(r,"trigger"),h=re(m,Ie(d,"hover",s)),c=re(m,Ie(d,"hover",u)),f=re(m,Ie(d,"click",A=>{A.button===0&&l(A)})),y=re(m,Ie(d,"focus",s)),g=re(m,Ie(d,"focus",u)),v=re(m,Ie(d,"contextmenu",A=>{A.preventDefault(),l(A)})),w=re(m,A=>{const{code:_}=A;r.triggerKeys.includes(_)&&(A.preventDefault(),l(A))});return e({triggerRef:p}),(A,_)=>(Yt(),je(J(Vl),{id:J(i),"virtual-ref":A.virtualRef,open:J(o),"virtual-triggering":A.virtualTriggering,class:ao(J(n).e("trigger")),onBlur:J(g),onClick:J(f),onContextmenu:J(v),onFocus:J(y),onMouseenter:J(h),onMouseleave:J(c),onKeydown:J(w)},{default:ge(()=>[_e(A.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var gc=Te(mc,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const yc=Rt({name:"ElTooltipContent",inheritAttrs:!1}),vc=Rt({...yc,props:Oo,setup(t,{expose:e}){const r=t,{selector:n}=Eo(),a=Br("tooltip"),i=_t(null),o=_t(!1),{controlled:s,id:u,open:l,trigger:p,onClose:m,onOpen:d,onShow:h,onHide:c,onBeforeShow:f,onBeforeHide:y}=Ce(yi,void 0),g=dt(()=>r.transition||`${a.namespace.value}-fade-in-linear`),v=dt(()=>r.persistent);Fr(()=>{o.value=!0});const w=dt(()=>J(v)?!0:J(l)),A=dt(()=>r.disabled?!1:J(l)),_=dt(()=>r.appendTo||n.value),T=dt(()=>{var P;return(P=r.style)!=null?P:{}}),D=dt(()=>!J(l)),N=()=>{c()},C=()=>{if(J(s))return!0},x=re(C,()=>{r.enterable&&J(p)==="hover"&&d()}),U=re(C,()=>{J(p)==="hover"&&m()}),S=()=>{var P,K;(K=(P=i.value)==null?void 0:P.updatePopper)==null||K.call(P),f==null||f()},R=()=>{y==null||y()},b=()=>{h(),$=nu(dt(()=>{var P;return(P=i.value)==null?void 0:P.popperContentRef}),()=>{if(J(s))return;J(p)!=="hover"&&m()})},F=()=>{r.virtualTriggering||m()};let $;return Ot(()=>J(l),P=>{P||$==null||$()},{flush:"post"}),Ot(()=>r.content,()=>{var P,K;(K=(P=i.value)==null?void 0:P.updatePopper)==null||K.call(P)}),e({contentRef:i}),(P,K)=>(Yt(),je(mu,{disabled:!P.teleported,to:J(_)},[Dr(ru,{name:J(g),onAfterLeave:N,onBeforeEnter:S,onAfterEnter:b,onBeforeLeave:R},{default:ge(()=>[J(w)?oo((Yt(),je(J(oc),ai({key:0,id:J(u),ref_key:"contentRef",ref:i},P.$attrs,{"aria-label":P.ariaLabel,"aria-hidden":J(D),"boundaries-padding":P.boundariesPadding,"fallback-placements":P.fallbackPlacements,"gpu-acceleration":P.gpuAcceleration,offset:P.offset,placement:P.placement,"popper-options":P.popperOptions,strategy:P.strategy,effect:P.effect,enterable:P.enterable,pure:P.pure,"popper-class":P.popperClass,"popper-style":[P.popperStyle,J(T)],"reference-el":P.referenceEl,"trigger-target-el":P.triggerTargetEl,visible:J(A),"z-index":P.zIndex,onMouseenter:J(x),onMouseleave:J(U),onBlur:F,onClose:J(m)}),{default:ge(()=>[o.value?Tr("v-if",!0):_e(P.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[eu,J(A)]]):Tr("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var bc=Te(vc,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const Ec=["innerHTML"],wc={key:1},Ac=Rt({name:"ElTooltip"}),Sc=Rt({...Ac,props:fc,emits:dc,setup(t,{expose:e,emit:r}){const n=t;Il();const a=iu(),i=_t(),o=_t(),s=()=>{var g;const v=J(i);v&&((g=v.popperInstanceRef)==null||g.update())},u=_t(!1),l=_t(),{show:p,hide:m,hasUpdateHandler:d}=cc({indicator:u,toggleReason:l}),{onOpen:h,onClose:c}=Nl({showAfter:mr(n,"showAfter"),hideAfter:mr(n,"hideAfter"),autoClose:mr(n,"autoClose"),open:p,close:m}),f=dt(()=>eo(n.visible)&&!d.value);_r(yi,{controlled:f,id:a,open:gu(u),trigger:mr(n,"trigger"),onOpen:g=>{h(g)},onClose:g=>{c(g)},onToggle:g=>{J(u)?c(g):h(g)},onShow:()=>{r("show",l.value)},onHide:()=>{r("hide",l.value)},onBeforeShow:()=>{r("before-show",l.value)},onBeforeHide:()=>{r("before-hide",l.value)},updatePopper:s}),Ot(()=>n.disabled,g=>{g&&u.value&&(u.value=!1)});const y=g=>{var v,w;const A=(w=(v=o.value)==null?void 0:v.contentRef)==null?void 0:w.popperContentRef,_=(g==null?void 0:g.relatedTarget)||document.activeElement;return A&&A.contains(_)};return yu(()=>u.value&&m()),e({popperRef:i,contentRef:o,isFocusInsideContent:y,updatePopper:s,onOpen:h,onClose:c,hide:m}),(g,v)=>(Yt(),je(J(sc),{ref_key:"popperRef",ref:i,role:g.role},{default:ge(()=>[Dr(gc,{disabled:g.disabled,trigger:g.trigger,"trigger-keys":g.triggerKeys,"virtual-ref":g.virtualRef,"virtual-triggering":g.virtualTriggering},{default:ge(()=>[g.$slots.default?_e(g.$slots,"default",{key:0}):Tr("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),Dr(bc,{ref_key:"contentRef",ref:o,"aria-label":g.ariaLabel,"boundaries-padding":g.boundariesPadding,content:g.content,disabled:g.disabled,effect:g.effect,enterable:g.enterable,"fallback-placements":g.fallbackPlacements,"hide-after":g.hideAfter,"gpu-acceleration":g.gpuAcceleration,offset:g.offset,persistent:g.persistent,"popper-class":g.popperClass,"popper-style":g.popperStyle,placement:g.placement,"popper-options":g.popperOptions,pure:g.pure,"raw-content":g.rawContent,"reference-el":g.referenceEl,"trigger-target-el":g.triggerTargetEl,"show-after":g.showAfter,strategy:g.strategy,teleported:g.teleported,transition:g.transition,"virtual-triggering":g.virtualTriggering,"z-index":g.zIndex,"append-to":g.appendTo},{default:ge(()=>[_e(g.$slots,"content",{},()=>[g.rawContent?(Yt(),un("span",{key:0,innerHTML:g.content},null,8,Ec)):(Yt(),un("span",wc,vu(g.content),1))]),g.showArrow?(Yt(),je(J($l),{key:0,"arrow-offset":g.arrowOffset},null,8,["arrow-offset"])):Tr("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var _c=Te(Sc,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const Lh=io(_c);function Kr(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Io={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,a,i){function o(l,p){if(!a[l]){if(!n[l]){var m=typeof Kr=="function"&&Kr;if(!p&&m)return m(l,!0);if(s)return s(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=a[l]={exports:{}};n[l][0].call(h.exports,function(c){var f=n[l][1][c];return o(f||c)},h,h.exports,r,n,a,i)}return a[l].exports}for(var s=typeof Kr=="function"&&Kr,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(r,n,a){var i=r("./utils"),o=r("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var l,p,m,d,h,c,f,y=[],g=0,v=u.length,w=v,A=i.getTypeOf(u)!=="string";g<u.length;)w=v-g,m=A?(l=u[g++],p=g<v?u[g++]:0,g<v?u[g++]:0):(l=u.charCodeAt(g++),p=g<v?u.charCodeAt(g++):0,g<v?u.charCodeAt(g++):0),d=l>>2,h=(3&l)<<4|p>>4,c=1<w?(15&p)<<2|m>>6:64,f=2<w?63&m:64,y.push(s.charAt(d)+s.charAt(h)+s.charAt(c)+s.charAt(f));return y.join("")},a.decode=function(u){var l,p,m,d,h,c,f=0,y=0,g="data:";if(u.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var v,w=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&w--,u.charAt(u.length-2)===s.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|w):new Array(0|w);f<u.length;)l=s.indexOf(u.charAt(f++))<<2|(d=s.indexOf(u.charAt(f++)))>>4,p=(15&d)<<4|(h=s.indexOf(u.charAt(f++)))>>2,m=(3&h)<<6|(c=s.indexOf(u.charAt(f++))),v[y++]=l,h!==64&&(v[y++]=p),c!==64&&(v[y++]=m);return v}},{"./support":30,"./utils":32}],2:[function(r,n,a){var i=r("./external"),o=r("./stream/DataWorker"),s=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function l(p,m,d,h,c){this.compressedSize=p,this.uncompressedSize=m,this.crc32=d,this.compression=h,this.compressedContent=c}l.prototype={getContentWorker:function(){var p=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(p,m,d){return p.pipe(new s).pipe(new u("uncompressedSize")).pipe(m.compressWorker(d)).pipe(new u("compressedSize")).withStreamInfo("compression",m)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,a){var i=r("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,a){var i=r("./utils"),o=function(){for(var s,u=[],l=0;l<256;l++){s=l;for(var p=0;p<8;p++)s=1&s?3988292384^s>>>1:s>>>1;u[l]=s}return u}();n.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(l,p,m,d){var h=o,c=d+m;l^=-1;for(var f=d;f<c;f++)l=l>>>8^h[255&(l^p[f])];return-1^l}(0|u,s,s.length,0):function(l,p,m,d){var h=o,c=d+m;l^=-1;for(var f=d;f<c;f++)l=l>>>8^h[255&(l^p.charCodeAt(f))];return-1^l}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(r,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(r,n,a){var i=null;i=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:i}},{lie:37}],7:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),s=r("./utils"),u=r("./stream/GenericWorker"),l=i?"uint8array":"array";function p(m,d){u.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=d,this.meta={}}a.magic="\b\0",s.inherits(p,u),p.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(l,m.data),!1)},p.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(d){m.push({data:d,meta:m.meta})}},a.compressWorker=function(m){return new p("Deflate",m)},a.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,a){function i(h,c){var f,y="";for(f=0;f<c;f++)y+=String.fromCharCode(255&h),h>>>=8;return y}function o(h,c,f,y,g,v){var w,A,_=h.file,T=h.compression,D=v!==l.utf8encode,N=s.transformTo("string",v(_.name)),C=s.transformTo("string",l.utf8encode(_.name)),x=_.comment,U=s.transformTo("string",v(x)),S=s.transformTo("string",l.utf8encode(x)),R=C.length!==_.name.length,b=S.length!==x.length,F="",$="",P="",K=_.dir,j=_.date,et={crc32:0,compressedSize:0,uncompressedSize:0};c&&!f||(et.crc32=h.crc32,et.compressedSize=h.compressedSize,et.uncompressedSize=h.uncompressedSize);var M=0;c&&(M|=8),D||!R&&!b||(M|=2048);var k=0,at=0;K&&(k|=16),g==="UNIX"?(at=798,k|=function(B,Q){var tt=B;return B||(tt=Q?16893:33204),(65535&tt)<<16}(_.unixPermissions,K)):(at=20,k|=function(B){return 63&(B||0)}(_.dosPermissions)),w=j.getUTCHours(),w<<=6,w|=j.getUTCMinutes(),w<<=5,w|=j.getUTCSeconds()/2,A=j.getUTCFullYear()-1980,A<<=4,A|=j.getUTCMonth()+1,A<<=5,A|=j.getUTCDate(),R&&($=i(1,1)+i(p(N),4)+C,F+="up"+i($.length,2)+$),b&&(P=i(1,1)+i(p(U),4)+S,F+="uc"+i(P.length,2)+P);var Y="";return Y+=`
\0`,Y+=i(M,2),Y+=T.magic,Y+=i(w,2),Y+=i(A,2),Y+=i(et.crc32,4),Y+=i(et.compressedSize,4),Y+=i(et.uncompressedSize,4),Y+=i(N.length,2),Y+=i(F.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Y+N+F,dirRecord:m.CENTRAL_FILE_HEADER+i(at,2)+Y+i(U.length,2)+"\0\0\0\0"+i(k,4)+i(y,4)+N+F+U}}var s=r("../utils"),u=r("../stream/GenericWorker"),l=r("../utf8"),p=r("../crc32"),m=r("../signature");function d(h,c,f,y){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=c,this.zipPlatform=f,this.encodeFileName=y,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(d,u),d.prototype.push=function(h){var c=h.meta.percent||0,f=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,u.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:f?(c+100*(f-y-1))/f:100}}))},d.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var c=this.streamFiles&&!h.file.dir;if(c){var f=o(h,c,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(h){this.accumulate=!1;var c=this.streamFiles&&!h.file.dir,f=o(h,c,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),c)this.push({data:function(y){return m.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var h=this.bytesWritten,c=0;c<this.dirRecords.length;c++)this.push({data:this.dirRecords[c],meta:{percent:100}});var f=this.bytesWritten-h,y=function(g,v,w,A,_){var T=s.transformTo("string",_(A));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(v,4)+i(w,4)+i(T.length,2)+T}(this.dirRecords.length,f,h,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(h){this._sources.push(h);var c=this;return h.on("data",function(f){c.processChunk(f)}),h.on("end",function(){c.closedSource(c.previous.streamInfo),c._sources.length?c.prepareNextSource():c.end()}),h.on("error",function(f){c.error(f)}),this},d.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(h){var c=this._sources;if(!u.prototype.error.call(this,h))return!1;for(var f=0;f<c.length;f++)try{c[f].error(h)}catch{}return!0},d.prototype.lock=function(){u.prototype.lock.call(this);for(var h=this._sources,c=0;c<h.length;c++)h[c].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,a){var i=r("../compressions"),o=r("./ZipFileWorker");a.generateWorker=function(s,u,l){var p=new o(u.streamFiles,l,u.platform,u.encodeFileName),m=0;try{s.forEach(function(d,h){m++;var c=function(v,w){var A=v||w,_=i[A];if(!_)throw new Error(A+" is not a valid compression method !");return _}(h.options.compression,u.compression),f=h.options.compressionOptions||u.compressionOptions||{},y=h.dir,g=h.date;h._compressWorker(c,f).withStreamInfo("file",{name:d,dir:y,date:g,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(d){p.error(d)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=r("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,a){var i=r("./utils"),o=r("./external"),s=r("./utf8"),u=r("./zipEntries"),l=r("./stream/Crc32Probe"),p=r("./nodejsUtils");function m(d){return new o.Promise(function(h,c){var f=d.decompressed.getContentWorker().pipe(new l);f.on("error",function(y){c(y)}).on("end",function(){f.streamInfo.crc32!==d.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}n.exports=function(d,h){var c=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),p.isNode&&p.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",d,!0,h.optimizedBinaryString,h.base64).then(function(f){var y=new u(h);return y.load(f),y}).then(function(f){var y=[o.Promise.resolve(f)],g=f.files;if(h.checkCRC32)for(var v=0;v<g.length;v++)y.push(m(g[v]));return o.Promise.all(y)}).then(function(f){for(var y=f.shift(),g=y.files,v=0;v<g.length;v++){var w=g[v],A=w.fileNameStr,_=i.resolve(w.fileNameStr);c.file(_,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:h.createFolders}),w.dir||(c.file(_).unsafeOriginalName=A)}return y.zipComment.length&&(c.comment=y.zipComment),c})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,a){var i=r("../utils"),o=r("../stream/GenericWorker");function s(u,l){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}i.inherits(s,o),s.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(p){l.push({data:p,meta:{percent:0}})}).on("error",function(p){l.isPaused?this.generatedError=p:l.error(p)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,a){var i=r("readable-stream").Readable;function o(s,u,l){i.call(this,u),this._helper=s;var p=this;s.on("data",function(m,d){p.push(m)||p._helper.pause(),l&&l(d)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}r("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,n,a){function i(_,T,D){var N,C=s.getTypeOf(T),x=s.extend(D||{},p);x.date=x.date||new Date,x.compression!==null&&(x.compression=x.compression.toUpperCase()),typeof x.unixPermissions=="string"&&(x.unixPermissions=parseInt(x.unixPermissions,8)),x.unixPermissions&&16384&x.unixPermissions&&(x.dir=!0),x.dosPermissions&&16&x.dosPermissions&&(x.dir=!0),x.dir&&(_=g(_)),x.createFolders&&(N=y(_))&&v.call(this,N,!0);var U=C==="string"&&x.binary===!1&&x.base64===!1;D&&D.binary!==void 0||(x.binary=!U),(T instanceof m&&T.uncompressedSize===0||x.dir||!T||T.length===0)&&(x.base64=!1,x.binary=!0,T="",x.compression="STORE",C="string");var S=null;S=T instanceof m||T instanceof u?T:c.isNode&&c.isStream(T)?new f(_,T):s.prepareContent(_,T,x.binary,x.optimizedBinaryString,x.base64);var R=new d(_,S,x);this.files[_]=R}var o=r("./utf8"),s=r("./utils"),u=r("./stream/GenericWorker"),l=r("./stream/StreamHelper"),p=r("./defaults"),m=r("./compressedObject"),d=r("./zipObject"),h=r("./generate"),c=r("./nodejsUtils"),f=r("./nodejs/NodejsStreamInputAdapter"),y=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var T=_.lastIndexOf("/");return 0<T?_.substring(0,T):""},g=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},v=function(_,T){return T=T!==void 0?T:p.createFolders,_=g(_),this.files[_]||i.call(this,_,null,{dir:!0,createFolders:T}),this.files[_]};function w(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var T,D,N;for(T in this.files)N=this.files[T],(D=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&_(D,N)},filter:function(_){var T=[];return this.forEach(function(D,N){_(D,N)&&T.push(N)}),T},file:function(_,T,D){if(arguments.length!==1)return _=this.root+_,i.call(this,_,T,D),this;if(w(_)){var N=_;return this.filter(function(x,U){return!U.dir&&N.test(x)})}var C=this.files[this.root+_];return C&&!C.dir?C:null},folder:function(_){if(!_)return this;if(w(_))return this.filter(function(C,x){return x.dir&&_.test(C)});var T=this.root+_,D=v.call(this,T),N=this.clone();return N.root=D.name,N},remove:function(_){_=this.root+_;var T=this.files[_];if(T||(_.slice(-1)!=="/"&&(_+="/"),T=this.files[_]),T&&!T.dir)delete this.files[_];else for(var D=this.filter(function(C,x){return x.name.slice(0,_.length)===_}),N=0;N<D.length;N++)delete this.files[D[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var T,D={};try{if((D=s.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");s.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var N=D.comment||this.comment||"";T=h.generateWorker(this,D,N)}catch(C){(T=new u("error")).error(C)}return new l(T,D.type||"string",D.mimeType)},generateAsync:function(_,T){return this.generateInternalStream(_).accumulate(T)},generateNodeStream:function(_,T){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(T)}};n.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,a){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,a){var i=r("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}r("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),l=s.charCodeAt(1),p=s.charCodeAt(2),m=s.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===u&&this.data[d+1]===l&&this.data[d+2]===p&&this.data[d+3]===m)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),l=s.charCodeAt(1),p=s.charCodeAt(2),m=s.charCodeAt(3),d=this.readData(4);return u===d[0]&&l===d[1]&&p===d[2]&&m===d[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,a){var i=r("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,l=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=s,l},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,a){var i=r("./Uint8ArrayReader");function o(s){i.call(this,s)}r("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,a){var i=r("./DataReader");function o(s){i.call(this,s)}r("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,a){var i=r("./ArrayReader");function o(s){i.call(this,s)}r("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,a){var i=r("../utils"),o=r("../support"),s=r("./ArrayReader"),u=r("./StringReader"),l=r("./NodeBufferReader"),p=r("./Uint8ArrayReader");n.exports=function(m){var d=i.getTypeOf(m);return i.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new l(m):o.uint8array?new p(i.transformTo("uint8array",m)):new s(i.transformTo("array",m)):new u(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,a){var i=r("./GenericWorker"),o=r("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},n.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,a){var i=r("./GenericWorker"),o=r("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,a){var i=r("../utils"),o=r("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}o.prototype.processChunk.call(this,u)},n.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,a){var i=r("../utils"),o=r("./GenericWorker");function s(u){o.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(p){l.dataIsReady=!0,l.data=p,l.max=p&&p.length||0,l.type=i.getTypeOf(p),l.isPaused||l._tickAndRepeat()},function(p){l.error(p)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(r,n,a){var i=r("../utils"),o=r("./ConvertWorker"),s=r("./GenericWorker"),u=r("../base64"),l=r("../support"),p=r("../external"),m=null;if(l.nodestream)try{m=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(c,f){return new p.Promise(function(y,g){var v=[],w=c._internalType,A=c._outputType,_=c._mimeType;c.on("data",function(T,D){v.push(T),f&&f(D)}).on("error",function(T){v=[],g(T)}).on("end",function(){try{var T=function(D,N,C){switch(D){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),C);case"base64":return u.encode(N);default:return i.transformTo(D,N)}}(A,function(D,N){var C,x=0,U=null,S=0;for(C=0;C<N.length;C++)S+=N[C].length;switch(D){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(U=new Uint8Array(S),C=0;C<N.length;C++)U.set(N[C],x),x+=N[C].length;return U;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+D+"'")}}(w,v),_);y(T)}catch(D){g(D)}v=[]}).resume()})}function h(c,f,y){var g=f;switch(f){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=f,this._mimeType=y,i.checkSupport(g),this._worker=c.pipe(new o(g)),c.lock()}catch(v){this._worker=new s("error"),this._worker.error(v)}}h.prototype={accumulate:function(c){return d(this,c)},on:function(c,f){var y=this;return c==="data"?this._worker.on(c,function(g){f.call(y,g.data,g.meta)}):this._worker.on(c,function(){i.delay(f,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(c){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},c)}},n.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!r("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,a){for(var i=r("./utils"),o=r("./support"),s=r("./nodejsUtils"),u=r("./stream/GenericWorker"),l=new Array(256),p=0;p<256;p++)l[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;l[254]=l[254]=1;function m(){u.call(this,"utf-8 decode"),this.leftOver=null}function d(){u.call(this,"utf-8 encode")}a.utf8encode=function(h){return o.nodebuffer?s.newBufferFrom(h,"utf-8"):function(c){var f,y,g,v,w,A=c.length,_=0;for(v=0;v<A;v++)(64512&(y=c.charCodeAt(v)))==55296&&v+1<A&&(64512&(g=c.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),v++),_+=y<128?1:y<2048?2:y<65536?3:4;for(f=o.uint8array?new Uint8Array(_):new Array(_),v=w=0;w<_;v++)(64512&(y=c.charCodeAt(v)))==55296&&v+1<A&&(64512&(g=c.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),v++),y<128?f[w++]=y:(y<2048?f[w++]=192|y>>>6:(y<65536?f[w++]=224|y>>>12:(f[w++]=240|y>>>18,f[w++]=128|y>>>12&63),f[w++]=128|y>>>6&63),f[w++]=128|63&y);return f}(h)},a.utf8decode=function(h){return o.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(c){var f,y,g,v,w=c.length,A=new Array(2*w);for(f=y=0;f<w;)if((g=c[f++])<128)A[y++]=g;else if(4<(v=l[g]))A[y++]=65533,f+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&f<w;)g=g<<6|63&c[f++],v--;1<v?A[y++]=65533:g<65536?A[y++]=g:(g-=65536,A[y++]=55296|g>>10&1023,A[y++]=56320|1023&g)}return A.length!==y&&(A.subarray?A=A.subarray(0,y):A.length=y),i.applyFromCharCode(A)}(h=i.transformTo(o.uint8array?"uint8array":"array",h))},i.inherits(m,u),m.prototype.processChunk=function(h){var c=i.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var f=c;(c=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),c.set(f,this.leftOver.length)}else c=this.leftOver.concat(c);this.leftOver=null}var y=function(v,w){var A;for((w=w||v.length)>v.length&&(w=v.length),A=w-1;0<=A&&(192&v[A])==128;)A--;return A<0||A===0?w:A+l[v[A]]>w?A:w}(c),g=c;y!==c.length&&(o.uint8array?(g=c.subarray(0,y),this.leftOver=c.subarray(y,c.length)):(g=c.slice(0,y),this.leftOver=c.slice(y,c.length))),this.push({data:a.utf8decode(g),meta:h.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=m,i.inherits(d,u),d.prototype.processChunk=function(h){this.push({data:a.utf8encode(h.data),meta:h.meta})},a.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,a){var i=r("./support"),o=r("./base64"),s=r("./nodejsUtils"),u=r("./external");function l(f){return f}function p(f,y){for(var g=0;g<f.length;++g)y[g]=255&f.charCodeAt(g);return y}r("setimmediate"),a.newBlob=function(f,y){a.checkSupport("blob");try{return new Blob([f],{type:y})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(f),g.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(f,y,g){var v=[],w=0,A=f.length;if(A<=g)return String.fromCharCode.apply(null,f);for(;w<A;)y==="array"||y==="nodebuffer"?v.push(String.fromCharCode.apply(null,f.slice(w,Math.min(w+g,A)))):v.push(String.fromCharCode.apply(null,f.subarray(w,Math.min(w+g,A)))),w+=g;return v.join("")},stringifyByChar:function(f){for(var y="",g=0;g<f.length;g++)y+=String.fromCharCode(f[g]);return y},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function d(f){var y=65536,g=a.getTypeOf(f),v=!0;if(g==="uint8array"?v=m.applyCanBeUsed.uint8array:g==="nodebuffer"&&(v=m.applyCanBeUsed.nodebuffer),v)for(;1<y;)try{return m.stringifyByChunk(f,g,y)}catch{y=Math.floor(y/2)}return m.stringifyByChar(f)}function h(f,y){for(var g=0;g<f.length;g++)y[g]=f[g];return y}a.applyFromCharCode=d;var c={};c.string={string:l,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return c.string.uint8array(f).buffer},uint8array:function(f){return p(f,new Uint8Array(f.length))},nodebuffer:function(f){return p(f,s.allocBuffer(f.length))}},c.array={string:d,array:l,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return s.newBufferFrom(f)}},c.arraybuffer={string:function(f){return d(new Uint8Array(f))},array:function(f){return h(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:l,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return s.newBufferFrom(new Uint8Array(f))}},c.uint8array={string:d,array:function(f){return h(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:l,nodebuffer:function(f){return s.newBufferFrom(f)}},c.nodebuffer={string:d,array:function(f){return h(f,new Array(f.length))},arraybuffer:function(f){return c.nodebuffer.uint8array(f).buffer},uint8array:function(f){return h(f,new Uint8Array(f.length))},nodebuffer:l},a.transformTo=function(f,y){if(y=y||"",!f)return y;a.checkSupport(f);var g=a.getTypeOf(y);return c[g][f](y)},a.resolve=function(f){for(var y=f.split("/"),g=[],v=0;v<y.length;v++){var w=y[v];w==="."||w===""&&v!==0&&v!==y.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},a.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(f)?"nodebuffer":i.uint8array&&f instanceof Uint8Array?"uint8array":i.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(f){if(!i[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(f){var y,g,v="";for(g=0;g<(f||"").length;g++)v+="\\x"+((y=f.charCodeAt(g))<16?"0":"")+y.toString(16).toUpperCase();return v},a.delay=function(f,y,g){setImmediate(function(){f.apply(g||null,y||[])})},a.inherits=function(f,y){function g(){}g.prototype=y.prototype,f.prototype=new g},a.extend=function(){var f,y,g={};for(f=0;f<arguments.length;f++)for(y in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],y)&&g[y]===void 0&&(g[y]=arguments[f][y]);return g},a.prepareContent=function(f,y,g,v,w){return u.Promise.resolve(y).then(function(A){return i.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(_,T){var D=new FileReader;D.onload=function(N){_(N.target.result)},D.onerror=function(N){T(N.target.error)},D.readAsArrayBuffer(A)}):A}).then(function(A){var _=a.getTypeOf(A);return _?(_==="arraybuffer"?A=a.transformTo("uint8array",A):_==="string"&&(w?A=o.decode(A):g&&v!==!0&&(A=function(T){return p(T,i.uint8array?new Uint8Array(T.length):new Array(T.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,a){var i=r("./reader/readerFor"),o=r("./utils"),s=r("./signature"),u=r("./zipEntry"),l=r("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(m)+")")}},isSignature:function(m,d){var h=this.reader.index;this.reader.setIndex(m);var c=this.reader.readString(4)===d;return this.reader.setIndex(h),c},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),d=l.uint8array?"uint8array":"array",h=o.transformTo(d,m);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,d,h,c=this.zip64EndOfCentralSize-44;0<c;)m=this.reader.readInt(2),d=this.reader.readInt(4),h=this.reader.readData(d),this.zip64ExtensibleData[m]={id:m,length:d,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,d;for(m=0;m<this.files.length;m++)d=this.files[m],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(m=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var d=m;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var c=d-h;if(0<c)this.isSignature(d,s.CENTRAL_FILE_HEADER)||(this.reader.zero=c);else if(c<0)throw new Error("Corrupted zip: missing "+Math.abs(c)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,a){var i=r("./reader/readerFor"),o=r("./utils"),s=r("./compressedObject"),u=r("./crc32"),l=r("./utf8"),p=r("./compressions"),m=r("./support");function d(h,c){this.options=h,this.loadOptions=c}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var c,f;if(h.skip(22),this.fileNameLength=h.readInt(2),f=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((c=function(y){for(var g in p)if(Object.prototype.hasOwnProperty.call(p,g)&&p[g].magic===y)return p[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,c,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var c=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(c),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var c,f,y,g=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<g;)c=h.readInt(2),f=h.readInt(2),y=h.readData(f),this.extraFields[c]={id:c,length:f,value:y};h.setIndex(g)},handleUTF8:function(){var h=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{var f=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var g=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var c=i(h.value);return c.readInt(1)!==1||u(this.fileName)!==c.readInt(4)?null:l.utf8decode(c.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var c=i(h.value);return c.readInt(1)!==1||u(this.fileComment)!==c.readInt(4)?null:l.utf8decode(c.readData(h.length-5))}return null}},n.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,a){function i(c,f,y){this.name=c,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=f,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var o=r("./stream/StreamHelper"),s=r("./stream/DataWorker"),u=r("./utf8"),l=r("./compressedObject"),p=r("./stream/GenericWorker");i.prototype={internalStream:function(c){var f=null,y="string";try{if(!c)throw new Error("No output type specified.");var g=(y=c.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),f=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(f=f.pipe(new u.Utf8EncodeWorker)),!v&&g&&(f=f.pipe(new u.Utf8DecodeWorker))}catch(w){(f=new p("error")).error(w)}return new o(f,y,"")},async:function(c,f){return this.internalStream(c).accumulate(f)},nodeStream:function(c,f){return this.internalStream(c||"nodebuffer").toNodejsStream(f)},_compressWorker:function(c,f){if(this._data instanceof l&&this._data.compression.magic===c.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(y,c,f)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof p?this._data:new s(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<m.length;h++)i.prototype[m[h]]=d;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var l=0,p=new u(c),m=i.document.createTextNode("");p.observe(m,{characterData:!0}),o=function(){m.data=l=++l%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var f=i.document.createElement("script");f.onreadystatechange=function(){c(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},i.document.documentElement.appendChild(f)}:function(){setTimeout(c,0)};else{var d=new i.MessageChannel;d.port1.onmessage=c,o=function(){d.port2.postMessage(0)}}var h=[];function c(){var f,y;s=!0;for(var g=h.length;g;){for(y=h,h=[],f=-1;++f<g;)y[f]();g=h.length}s=!1}n.exports=function(f){h.push(f)!==1||s||o()}}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,a){var i=r("immediate");function o(){}var s={},u=["REJECTED"],l=["FULFILLED"],p=["PENDING"];function m(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,g!==o&&f(this,g)}function d(g,v,w){this.promise=g,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function h(g,v,w){i(function(){var A;try{A=v(w)}catch(_){return s.reject(g,_)}A===g?s.reject(g,new TypeError("Cannot resolve promise with itself")):s.resolve(g,A)})}function c(g){var v=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof v=="function")return function(){v.apply(g,arguments)}}function f(g,v){var w=!1;function A(D){w||(w=!0,s.reject(g,D))}function _(D){w||(w=!0,s.resolve(g,D))}var T=y(function(){v(_,A)});T.status==="error"&&A(T.value)}function y(g,v){var w={};try{w.value=g(v),w.status="success"}catch(A){w.status="error",w.value=A}return w}(n.exports=m).prototype.finally=function(g){if(typeof g!="function")return this;var v=this.constructor;return this.then(function(w){return v.resolve(g()).then(function(){return w})},function(w){return v.resolve(g()).then(function(){throw w})})},m.prototype.catch=function(g){return this.then(null,g)},m.prototype.then=function(g,v){if(typeof g!="function"&&this.state===l||typeof v!="function"&&this.state===u)return this;var w=new this.constructor(o);return this.state!==p?h(w,this.state===l?g:v,this.outcome):this.queue.push(new d(w,g,v)),w},d.prototype.callFulfilled=function(g){s.resolve(this.promise,g)},d.prototype.otherCallFulfilled=function(g){h(this.promise,this.onFulfilled,g)},d.prototype.callRejected=function(g){s.reject(this.promise,g)},d.prototype.otherCallRejected=function(g){h(this.promise,this.onRejected,g)},s.resolve=function(g,v){var w=y(c,v);if(w.status==="error")return s.reject(g,w.value);var A=w.value;if(A)f(g,A);else{g.state=l,g.outcome=v;for(var _=-1,T=g.queue.length;++_<T;)g.queue[_].callFulfilled(v)}return g},s.reject=function(g,v){g.state=u,g.outcome=v;for(var w=-1,A=g.queue.length;++w<A;)g.queue[w].callRejected(v);return g},m.resolve=function(g){return g instanceof this?g:s.resolve(new this(o),g)},m.reject=function(g){var v=new this(o);return s.reject(v,g)},m.all=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,A=!1;if(!w)return this.resolve([]);for(var _=new Array(w),T=0,D=-1,N=new this(o);++D<w;)C(g[D],D);return N;function C(x,U){v.resolve(x).then(function(S){_[U]=S,++T!==w||A||(A=!0,s.resolve(N,_))},function(S){A||(A=!0,s.reject(N,S))})}},m.race=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,A=!1;if(!w)return this.resolve([]);for(var _=-1,T=new this(o);++_<w;)D=g[_],v.resolve(D).then(function(N){A||(A=!0,s.resolve(T,N))},function(N){A||(A=!0,s.reject(T,N))});var D;return T}},{immediate:36}],38:[function(r,n,a){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,a){var i=r("./zlib/deflate"),o=r("./utils/common"),s=r("./utils/strings"),u=r("./zlib/messages"),l=r("./zlib/zstream"),p=Object.prototype.toString,m=0,d=-1,h=0,c=8;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({level:d,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},g||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(w!==m)throw new Error(u[w]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var A;if(A=typeof v.dictionary=="string"?s.string2buf(v.dictionary):p.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(w=i.deflateSetDictionary(this.strm,A))!==m)throw new Error(u[w]);this._dict_set=!0}}function y(g,v){var w=new f(v);if(w.push(g,!0),w.err)throw w.msg||u[w.err];return w.result}f.prototype.push=function(g,v){var w,A,_=this.strm,T=this.options.chunkSize;if(this.ended)return!1;A=v===~~v?v:v===!0?4:0,typeof g=="string"?_.input=s.string2buf(g):p.call(g)==="[object ArrayBuffer]"?_.input=new Uint8Array(g):_.input=g,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new o.Buf8(T),_.next_out=0,_.avail_out=T),(w=i.deflate(_,A))!==1&&w!==m)return this.onEnd(w),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(_.output,_.next_out))):this.onData(o.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&w!==1);return A===4?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===m):A!==2||(this.onEnd(m),!(_.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},a.Deflate=f,a.deflate=y,a.deflateRaw=function(g,v){return(v=v||{}).raw=!0,y(g,v)},a.gzip=function(g,v){return(v=v||{}).gzip=!0,y(g,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,a){var i=r("./zlib/inflate"),o=r("./utils/common"),s=r("./utils/strings"),u=r("./zlib/constants"),l=r("./zlib/messages"),p=r("./zlib/zstream"),m=r("./zlib/gzheader"),d=Object.prototype.toString;function h(f){if(!(this instanceof h))return new h(f);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},f||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||f&&f.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,y.windowBits);if(g!==u.Z_OK)throw new Error(l[g]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function c(f,y){var g=new h(y);if(g.push(f,!0),g.err)throw g.msg||l[g.err];return g.result}h.prototype.push=function(f,y){var g,v,w,A,_,T,D=this.strm,N=this.options.chunkSize,C=this.options.dictionary,x=!1;if(this.ended)return!1;v=y===~~y?y:y===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof f=="string"?D.input=s.binstring2buf(f):d.call(f)==="[object ArrayBuffer]"?D.input=new Uint8Array(f):D.input=f,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(N),D.next_out=0,D.avail_out=N),(g=i.inflate(D,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&C&&(T=typeof C=="string"?s.string2buf(C):d.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,g=i.inflateSetDictionary(this.strm,T)),g===u.Z_BUF_ERROR&&x===!0&&(g=u.Z_OK,x=!1),g!==u.Z_STREAM_END&&g!==u.Z_OK)return this.onEnd(g),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&g!==u.Z_STREAM_END&&(D.avail_in!==0||v!==u.Z_FINISH&&v!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=s.utf8border(D.output,D.next_out),A=D.next_out-w,_=s.buf2string(D.output,w),D.next_out=A,D.avail_out=N-A,A&&o.arraySet(D.output,D.output,w,A,0),this.onData(_)):this.onData(o.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(x=!0)}while((0<D.avail_in||D.avail_out===0)&&g!==u.Z_STREAM_END);return g===u.Z_STREAM_END&&(v=u.Z_FINISH),v===u.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u.Z_OK):v!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(D.avail_out=0))},h.prototype.onData=function(f){this.chunks.push(f)},h.prototype.onEnd=function(f){f===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},a.Inflate=h,a.inflate=c,a.inflateRaw=function(f,y){return(y=y||{}).raw=!0,c(f,y)},a.ungzip=c},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var p=l.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(u[m]=p[m])}}return u},a.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var o={arraySet:function(u,l,p,m,d){if(l.subarray&&u.subarray)u.set(l.subarray(p,p+m),d);else for(var h=0;h<m;h++)u[d+h]=l[p+h]},flattenChunks:function(u){var l,p,m,d,h,c;for(l=m=0,p=u.length;l<p;l++)m+=u[l].length;for(c=new Uint8Array(m),l=d=0,p=u.length;l<p;l++)h=u[l],c.set(h,d),d+=h.length;return c}},s={arraySet:function(u,l,p,m,d){for(var h=0;h<m;h++)u[d+h]=l[p+h]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(r,n,a){var i=r("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function p(m,d){if(d<65537&&(m.subarray&&s||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,d));for(var h="",c=0;c<d;c++)h+=String.fromCharCode(m[c]);return h}u[254]=u[254]=1,a.string2buf=function(m){var d,h,c,f,y,g=m.length,v=0;for(f=0;f<g;f++)(64512&(h=m.charCodeAt(f)))==55296&&f+1<g&&(64512&(c=m.charCodeAt(f+1)))==56320&&(h=65536+(h-55296<<10)+(c-56320),f++),v+=h<128?1:h<2048?2:h<65536?3:4;for(d=new i.Buf8(v),f=y=0;y<v;f++)(64512&(h=m.charCodeAt(f)))==55296&&f+1<g&&(64512&(c=m.charCodeAt(f+1)))==56320&&(h=65536+(h-55296<<10)+(c-56320),f++),h<128?d[y++]=h:(h<2048?d[y++]=192|h>>>6:(h<65536?d[y++]=224|h>>>12:(d[y++]=240|h>>>18,d[y++]=128|h>>>12&63),d[y++]=128|h>>>6&63),d[y++]=128|63&h);return d},a.buf2binstring=function(m){return p(m,m.length)},a.binstring2buf=function(m){for(var d=new i.Buf8(m.length),h=0,c=d.length;h<c;h++)d[h]=m.charCodeAt(h);return d},a.buf2string=function(m,d){var h,c,f,y,g=d||m.length,v=new Array(2*g);for(h=c=0;h<g;)if((f=m[h++])<128)v[c++]=f;else if(4<(y=u[f]))v[c++]=65533,h+=y-1;else{for(f&=y===2?31:y===3?15:7;1<y&&h<g;)f=f<<6|63&m[h++],y--;1<y?v[c++]=65533:f<65536?v[c++]=f:(f-=65536,v[c++]=55296|f>>10&1023,v[c++]=56320|1023&f)}return p(v,c)},a.utf8border=function(m,d){var h;for((d=d||m.length)>m.length&&(d=m.length),h=d-1;0<=h&&(192&m[h])==128;)h--;return h<0||h===0?d:h+u[m[h]]>d?h:d}},{"./common":41}],43:[function(r,n,a){n.exports=function(i,o,s,u){for(var l=65535&i|0,p=i>>>16&65535|0,m=0;s!==0;){for(s-=m=2e3<s?2e3:s;p=p+(l=l+o[u++]|0)|0,--m;);l%=65521,p%=65521}return l|p<<16|0}},{}],44:[function(r,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();n.exports=function(o,s,u,l){var p=i,m=l+u;o^=-1;for(var d=l;d<m;d++)o=o>>>8^p[255&(o^s[d])];return-1^o}},{}],46:[function(r,n,a){var i,o=r("../utils/common"),s=r("./trees"),u=r("./adler32"),l=r("./crc32"),p=r("./messages"),m=0,d=4,h=0,c=-2,f=-1,y=4,g=2,v=8,w=9,A=286,_=30,T=19,D=2*A+1,N=15,C=3,x=258,U=x+C+1,S=42,R=113,b=1,F=2,$=3,P=4;function K(E,G){return E.msg=p[G],G}function j(E){return(E<<1)-(4<E?9:0)}function et(E){for(var G=E.length;0<=--G;)E[G]=0}function M(E){var G=E.state,q=G.pending;q>E.avail_out&&(q=E.avail_out),q!==0&&(o.arraySet(E.output,G.pending_buf,G.pending_out,q,E.next_out),E.next_out+=q,G.pending_out+=q,E.total_out+=q,E.avail_out-=q,G.pending-=q,G.pending===0&&(G.pending_out=0))}function k(E,G){s._tr_flush_block(E,0<=E.block_start?E.block_start:-1,E.strstart-E.block_start,G),E.block_start=E.strstart,M(E.strm)}function at(E,G){E.pending_buf[E.pending++]=G}function Y(E,G){E.pending_buf[E.pending++]=G>>>8&255,E.pending_buf[E.pending++]=255&G}function B(E,G){var q,I,O=E.max_chain_length,L=E.strstart,H=E.prev_length,V=E.nice_match,z=E.strstart>E.w_size-U?E.strstart-(E.w_size-U):0,X=E.window,it=E.w_mask,Z=E.prev,st=E.strstart+x,pt=X[L+H-1],lt=X[L+H];E.prev_length>=E.good_match&&(O>>=2),V>E.lookahead&&(V=E.lookahead);do if(X[(q=G)+H]===lt&&X[q+H-1]===pt&&X[q]===X[L]&&X[++q]===X[L+1]){L+=2,q++;do;while(X[++L]===X[++q]&&X[++L]===X[++q]&&X[++L]===X[++q]&&X[++L]===X[++q]&&X[++L]===X[++q]&&X[++L]===X[++q]&&X[++L]===X[++q]&&X[++L]===X[++q]&&L<st);if(I=x-(st-L),L=st-x,H<I){if(E.match_start=G,V<=(H=I))break;pt=X[L+H-1],lt=X[L+H]}}while((G=Z[G&it])>z&&--O!=0);return H<=E.lookahead?H:E.lookahead}function Q(E){var G,q,I,O,L,H,V,z,X,it,Z=E.w_size;do{if(O=E.window_size-E.lookahead-E.strstart,E.strstart>=Z+(Z-U)){for(o.arraySet(E.window,E.window,Z,Z,0),E.match_start-=Z,E.strstart-=Z,E.block_start-=Z,G=q=E.hash_size;I=E.head[--G],E.head[G]=Z<=I?I-Z:0,--q;);for(G=q=Z;I=E.prev[--G],E.prev[G]=Z<=I?I-Z:0,--q;);O+=Z}if(E.strm.avail_in===0)break;if(H=E.strm,V=E.window,z=E.strstart+E.lookahead,X=O,it=void 0,it=H.avail_in,X<it&&(it=X),q=it===0?0:(H.avail_in-=it,o.arraySet(V,H.input,H.next_in,it,z),H.state.wrap===1?H.adler=u(H.adler,V,it,z):H.state.wrap===2&&(H.adler=l(H.adler,V,it,z)),H.next_in+=it,H.total_in+=it,it),E.lookahead+=q,E.lookahead+E.insert>=C)for(L=E.strstart-E.insert,E.ins_h=E.window[L],E.ins_h=(E.ins_h<<E.hash_shift^E.window[L+1])&E.hash_mask;E.insert&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[L+C-1])&E.hash_mask,E.prev[L&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=L,L++,E.insert--,!(E.lookahead+E.insert<C)););}while(E.lookahead<U&&E.strm.avail_in!==0)}function tt(E,G){for(var q,I;;){if(E.lookahead<U){if(Q(E),E.lookahead<U&&G===m)return b;if(E.lookahead===0)break}if(q=0,E.lookahead>=C&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+C-1])&E.hash_mask,q=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),q!==0&&E.strstart-q<=E.w_size-U&&(E.match_length=B(E,q)),E.match_length>=C)if(I=s._tr_tally(E,E.strstart-E.match_start,E.match_length-C),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=C){for(E.match_length--;E.strstart++,E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+C-1])&E.hash_mask,q=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart,--E.match_length!=0;);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+1])&E.hash_mask;else I=s._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(I&&(k(E,!1),E.strm.avail_out===0))return b}return E.insert=E.strstart<C-1?E.strstart:C-1,G===d?(k(E,!0),E.strm.avail_out===0?$:P):E.last_lit&&(k(E,!1),E.strm.avail_out===0)?b:F}function W(E,G){for(var q,I,O;;){if(E.lookahead<U){if(Q(E),E.lookahead<U&&G===m)return b;if(E.lookahead===0)break}if(q=0,E.lookahead>=C&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+C-1])&E.hash_mask,q=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=C-1,q!==0&&E.prev_length<E.max_lazy_match&&E.strstart-q<=E.w_size-U&&(E.match_length=B(E,q),E.match_length<=5&&(E.strategy===1||E.match_length===C&&4096<E.strstart-E.match_start)&&(E.match_length=C-1)),E.prev_length>=C&&E.match_length<=E.prev_length){for(O=E.strstart+E.lookahead-C,I=s._tr_tally(E,E.strstart-1-E.prev_match,E.prev_length-C),E.lookahead-=E.prev_length-1,E.prev_length-=2;++E.strstart<=O&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+C-1])&E.hash_mask,q=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),--E.prev_length!=0;);if(E.match_available=0,E.match_length=C-1,E.strstart++,I&&(k(E,!1),E.strm.avail_out===0))return b}else if(E.match_available){if((I=s._tr_tally(E,0,E.window[E.strstart-1]))&&k(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return b}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(I=s._tr_tally(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<C-1?E.strstart:C-1,G===d?(k(E,!0),E.strm.avail_out===0?$:P):E.last_lit&&(k(E,!1),E.strm.avail_out===0)?b:F}function rt(E,G,q,I,O){this.good_length=E,this.max_lazy=G,this.nice_length=q,this.max_chain=I,this.func=O}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*D),this.dyn_dtree=new o.Buf16(2*(2*_+1)),this.bl_tree=new o.Buf16(2*(2*T+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*A+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function nt(E){var G;return E&&E.state?(E.total_in=E.total_out=0,E.data_type=g,(G=E.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?S:R,E.adler=G.wrap===2?0:1,G.last_flush=m,s._tr_init(G),h):K(E,c)}function ut(E){var G=nt(E);return G===h&&function(q){q.window_size=2*q.w_size,et(q.head),q.max_lazy_match=i[q.level].max_lazy,q.good_match=i[q.level].good_length,q.nice_match=i[q.level].nice_length,q.max_chain_length=i[q.level].max_chain,q.strstart=0,q.block_start=0,q.lookahead=0,q.insert=0,q.match_length=q.prev_length=C-1,q.match_available=0,q.ins_h=0}(E.state),G}function ft(E,G,q,I,O,L){if(!E)return c;var H=1;if(G===f&&(G=6),I<0?(H=0,I=-I):15<I&&(H=2,I-=16),O<1||w<O||q!==v||I<8||15<I||G<0||9<G||L<0||y<L)return K(E,c);I===8&&(I=9);var V=new ot;return(E.state=V).strm=E,V.wrap=H,V.gzhead=null,V.w_bits=I,V.w_size=1<<V.w_bits,V.w_mask=V.w_size-1,V.hash_bits=O+7,V.hash_size=1<<V.hash_bits,V.hash_mask=V.hash_size-1,V.hash_shift=~~((V.hash_bits+C-1)/C),V.window=new o.Buf8(2*V.w_size),V.head=new o.Buf16(V.hash_size),V.prev=new o.Buf16(V.w_size),V.lit_bufsize=1<<O+6,V.pending_buf_size=4*V.lit_bufsize,V.pending_buf=new o.Buf8(V.pending_buf_size),V.d_buf=1*V.lit_bufsize,V.l_buf=3*V.lit_bufsize,V.level=G,V.strategy=L,V.method=q,ut(E)}i=[new rt(0,0,0,0,function(E,G){var q=65535;for(q>E.pending_buf_size-5&&(q=E.pending_buf_size-5);;){if(E.lookahead<=1){if(Q(E),E.lookahead===0&&G===m)return b;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;var I=E.block_start+q;if((E.strstart===0||E.strstart>=I)&&(E.lookahead=E.strstart-I,E.strstart=I,k(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-U&&(k(E,!1),E.strm.avail_out===0))return b}return E.insert=0,G===d?(k(E,!0),E.strm.avail_out===0?$:P):(E.strstart>E.block_start&&(k(E,!1),E.strm.avail_out),b)}),new rt(4,4,8,4,tt),new rt(4,5,16,8,tt),new rt(4,6,32,32,tt),new rt(4,4,16,16,W),new rt(8,16,32,32,W),new rt(8,16,128,128,W),new rt(8,32,128,256,W),new rt(32,128,258,1024,W),new rt(32,258,258,4096,W)],a.deflateInit=function(E,G){return ft(E,G,v,15,8,0)},a.deflateInit2=ft,a.deflateReset=ut,a.deflateResetKeep=nt,a.deflateSetHeader=function(E,G){return E&&E.state?E.state.wrap!==2?c:(E.state.gzhead=G,h):c},a.deflate=function(E,G){var q,I,O,L;if(!E||!E.state||5<G||G<0)return E?K(E,c):c;if(I=E.state,!E.output||!E.input&&E.avail_in!==0||I.status===666&&G!==d)return K(E,E.avail_out===0?-5:c);if(I.strm=E,q=I.last_flush,I.last_flush=G,I.status===S)if(I.wrap===2)E.adler=0,at(I,31),at(I,139),at(I,8),I.gzhead?(at(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),at(I,255&I.gzhead.time),at(I,I.gzhead.time>>8&255),at(I,I.gzhead.time>>16&255),at(I,I.gzhead.time>>24&255),at(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),at(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(at(I,255&I.gzhead.extra.length),at(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(E.adler=l(E.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(at(I,0),at(I,0),at(I,0),at(I,0),at(I,0),at(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),at(I,3),I.status=R);else{var H=v+(I.w_bits-8<<4)<<8;H|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(H|=32),H+=31-H%31,I.status=R,Y(I,H),I.strstart!==0&&(Y(I,E.adler>>>16),Y(I,65535&E.adler)),E.adler=1}if(I.status===69)if(I.gzhead.extra){for(O=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>O&&(E.adler=l(E.adler,I.pending_buf,I.pending-O,O)),M(E),O=I.pending,I.pending!==I.pending_buf_size));)at(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>O&&(E.adler=l(E.adler,I.pending_buf,I.pending-O,O)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){O=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>O&&(E.adler=l(E.adler,I.pending_buf,I.pending-O,O)),M(E),O=I.pending,I.pending===I.pending_buf_size)){L=1;break}L=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,at(I,L)}while(L!==0);I.gzhead.hcrc&&I.pending>O&&(E.adler=l(E.adler,I.pending_buf,I.pending-O,O)),L===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){O=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>O&&(E.adler=l(E.adler,I.pending_buf,I.pending-O,O)),M(E),O=I.pending,I.pending===I.pending_buf_size)){L=1;break}L=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,at(I,L)}while(L!==0);I.gzhead.hcrc&&I.pending>O&&(E.adler=l(E.adler,I.pending_buf,I.pending-O,O)),L===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&M(E),I.pending+2<=I.pending_buf_size&&(at(I,255&E.adler),at(I,E.adler>>8&255),E.adler=0,I.status=R)):I.status=R),I.pending!==0){if(M(E),E.avail_out===0)return I.last_flush=-1,h}else if(E.avail_in===0&&j(G)<=j(q)&&G!==d)return K(E,-5);if(I.status===666&&E.avail_in!==0)return K(E,-5);if(E.avail_in!==0||I.lookahead!==0||G!==m&&I.status!==666){var V=I.strategy===2?function(z,X){for(var it;;){if(z.lookahead===0&&(Q(z),z.lookahead===0)){if(X===m)return b;break}if(z.match_length=0,it=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,it&&(k(z,!1),z.strm.avail_out===0))return b}return z.insert=0,X===d?(k(z,!0),z.strm.avail_out===0?$:P):z.last_lit&&(k(z,!1),z.strm.avail_out===0)?b:F}(I,G):I.strategy===3?function(z,X){for(var it,Z,st,pt,lt=z.window;;){if(z.lookahead<=x){if(Q(z),z.lookahead<=x&&X===m)return b;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=C&&0<z.strstart&&(Z=lt[st=z.strstart-1])===lt[++st]&&Z===lt[++st]&&Z===lt[++st]){pt=z.strstart+x;do;while(Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&Z===lt[++st]&&st<pt);z.match_length=x-(pt-st),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=C?(it=s._tr_tally(z,1,z.match_length-C),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(it=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),it&&(k(z,!1),z.strm.avail_out===0))return b}return z.insert=0,X===d?(k(z,!0),z.strm.avail_out===0?$:P):z.last_lit&&(k(z,!1),z.strm.avail_out===0)?b:F}(I,G):i[I.level].func(I,G);if(V!==$&&V!==P||(I.status=666),V===b||V===$)return E.avail_out===0&&(I.last_flush=-1),h;if(V===F&&(G===1?s._tr_align(I):G!==5&&(s._tr_stored_block(I,0,0,!1),G===3&&(et(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),M(E),E.avail_out===0))return I.last_flush=-1,h}return G!==d?h:I.wrap<=0?1:(I.wrap===2?(at(I,255&E.adler),at(I,E.adler>>8&255),at(I,E.adler>>16&255),at(I,E.adler>>24&255),at(I,255&E.total_in),at(I,E.total_in>>8&255),at(I,E.total_in>>16&255),at(I,E.total_in>>24&255)):(Y(I,E.adler>>>16),Y(I,65535&E.adler)),M(E),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?h:1)},a.deflateEnd=function(E){var G;return E&&E.state?(G=E.state.status)!==S&&G!==69&&G!==73&&G!==91&&G!==103&&G!==R&&G!==666?K(E,c):(E.state=null,G===R?K(E,-3):h):c},a.deflateSetDictionary=function(E,G){var q,I,O,L,H,V,z,X,it=G.length;if(!E||!E.state||(L=(q=E.state).wrap)===2||L===1&&q.status!==S||q.lookahead)return c;for(L===1&&(E.adler=u(E.adler,G,it,0)),q.wrap=0,it>=q.w_size&&(L===0&&(et(q.head),q.strstart=0,q.block_start=0,q.insert=0),X=new o.Buf8(q.w_size),o.arraySet(X,G,it-q.w_size,q.w_size,0),G=X,it=q.w_size),H=E.avail_in,V=E.next_in,z=E.input,E.avail_in=it,E.next_in=0,E.input=G,Q(q);q.lookahead>=C;){for(I=q.strstart,O=q.lookahead-(C-1);q.ins_h=(q.ins_h<<q.hash_shift^q.window[I+C-1])&q.hash_mask,q.prev[I&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=I,I++,--O;);q.strstart=I,q.lookahead=C-1,Q(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=0,q.match_length=q.prev_length=C-1,q.match_available=0,E.next_in=V,E.input=z,E.avail_in=H,q.wrap=L,h},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,a){n.exports=function(i,o){var s,u,l,p,m,d,h,c,f,y,g,v,w,A,_,T,D,N,C,x,U,S,R,b,F;s=i.state,u=i.next_in,b=i.input,l=u+(i.avail_in-5),p=i.next_out,F=i.output,m=p-(o-i.avail_out),d=p+(i.avail_out-257),h=s.dmax,c=s.wsize,f=s.whave,y=s.wnext,g=s.window,v=s.hold,w=s.bits,A=s.lencode,_=s.distcode,T=(1<<s.lenbits)-1,D=(1<<s.distbits)-1;t:do{w<15&&(v+=b[u++]<<w,w+=8,v+=b[u++]<<w,w+=8),N=A[v&T];e:for(;;){if(v>>>=C=N>>>24,w-=C,(C=N>>>16&255)===0)F[p++]=65535&N;else{if(!(16&C)){if(!(64&C)){N=A[(65535&N)+(v&(1<<C)-1)];continue e}if(32&C){s.mode=12;break t}i.msg="invalid literal/length code",s.mode=30;break t}x=65535&N,(C&=15)&&(w<C&&(v+=b[u++]<<w,w+=8),x+=v&(1<<C)-1,v>>>=C,w-=C),w<15&&(v+=b[u++]<<w,w+=8,v+=b[u++]<<w,w+=8),N=_[v&D];r:for(;;){if(v>>>=C=N>>>24,w-=C,!(16&(C=N>>>16&255))){if(!(64&C)){N=_[(65535&N)+(v&(1<<C)-1)];continue r}i.msg="invalid distance code",s.mode=30;break t}if(U=65535&N,w<(C&=15)&&(v+=b[u++]<<w,(w+=8)<C&&(v+=b[u++]<<w,w+=8)),h<(U+=v&(1<<C)-1)){i.msg="invalid distance too far back",s.mode=30;break t}if(v>>>=C,w-=C,(C=p-m)<U){if(f<(C=U-C)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break t}if(R=g,(S=0)===y){if(S+=c-C,C<x){for(x-=C;F[p++]=g[S++],--C;);S=p-U,R=F}}else if(y<C){if(S+=c+y-C,(C-=y)<x){for(x-=C;F[p++]=g[S++],--C;);if(S=0,y<x){for(x-=C=y;F[p++]=g[S++],--C;);S=p-U,R=F}}}else if(S+=y-C,C<x){for(x-=C;F[p++]=g[S++],--C;);S=p-U,R=F}for(;2<x;)F[p++]=R[S++],F[p++]=R[S++],F[p++]=R[S++],x-=3;x&&(F[p++]=R[S++],1<x&&(F[p++]=R[S++]))}else{for(S=p-U;F[p++]=F[S++],F[p++]=F[S++],F[p++]=F[S++],2<(x-=3););x&&(F[p++]=F[S++],1<x&&(F[p++]=F[S++]))}break}}break}}while(u<l&&p<d);u-=x=w>>3,v&=(1<<(w-=x<<3))-1,i.next_in=u,i.next_out=p,i.avail_in=u<l?l-u+5:5-(u-l),i.avail_out=p<d?d-p+257:257-(p-d),s.hold=v,s.bits=w}},{}],49:[function(r,n,a){var i=r("../utils/common"),o=r("./adler32"),s=r("./crc32"),u=r("./inffast"),l=r("./inftrees"),p=1,m=2,d=0,h=-2,c=1,f=852,y=592;function g(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(S){var R;return S&&S.state?(R=S.state,S.total_in=S.total_out=R.total=0,S.msg="",R.wrap&&(S.adler=1&R.wrap),R.mode=c,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new i.Buf32(f),R.distcode=R.distdyn=new i.Buf32(y),R.sane=1,R.back=-1,d):h}function A(S){var R;return S&&S.state?((R=S.state).wsize=0,R.whave=0,R.wnext=0,w(S)):h}function _(S,R){var b,F;return S&&S.state?(F=S.state,R<0?(b=0,R=-R):(b=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?h:(F.window!==null&&F.wbits!==R&&(F.window=null),F.wrap=b,F.wbits=R,A(S))):h}function T(S,R){var b,F;return S?(F=new v,(S.state=F).window=null,(b=_(S,R))!==d&&(S.state=null),b):h}var D,N,C=!0;function x(S){if(C){var R;for(D=new i.Buf32(512),N=new i.Buf32(32),R=0;R<144;)S.lens[R++]=8;for(;R<256;)S.lens[R++]=9;for(;R<280;)S.lens[R++]=7;for(;R<288;)S.lens[R++]=8;for(l(p,S.lens,0,288,D,0,S.work,{bits:9}),R=0;R<32;)S.lens[R++]=5;l(m,S.lens,0,32,N,0,S.work,{bits:5}),C=!1}S.lencode=D,S.lenbits=9,S.distcode=N,S.distbits=5}function U(S,R,b,F){var $,P=S.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new i.Buf8(P.wsize)),F>=P.wsize?(i.arraySet(P.window,R,b-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(F<($=P.wsize-P.wnext)&&($=F),i.arraySet(P.window,R,b-F,$,P.wnext),(F-=$)?(i.arraySet(P.window,R,b-F,F,0),P.wnext=F,P.whave=P.wsize):(P.wnext+=$,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=$))),0}a.inflateReset=A,a.inflateReset2=_,a.inflateResetKeep=w,a.inflateInit=function(S){return T(S,15)},a.inflateInit2=T,a.inflate=function(S,R){var b,F,$,P,K,j,et,M,k,at,Y,B,Q,tt,W,rt,ot,nt,ut,ft,E,G,q,I,O=0,L=new i.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return h;(b=S.state).mode===12&&(b.mode=13),K=S.next_out,$=S.output,et=S.avail_out,P=S.next_in,F=S.input,j=S.avail_in,M=b.hold,k=b.bits,at=j,Y=et,G=d;t:for(;;)switch(b.mode){case c:if(b.wrap===0){b.mode=13;break}for(;k<16;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(2&b.wrap&&M===35615){L[b.check=0]=255&M,L[1]=M>>>8&255,b.check=s(b.check,L,2,0),k=M=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&M)<<8)+(M>>8))%31){S.msg="incorrect header check",b.mode=30;break}if((15&M)!=8){S.msg="unknown compression method",b.mode=30;break}if(k-=4,E=8+(15&(M>>>=4)),b.wbits===0)b.wbits=E;else if(E>b.wbits){S.msg="invalid window size",b.mode=30;break}b.dmax=1<<E,S.adler=b.check=1,b.mode=512&M?10:12,k=M=0;break;case 2:for(;k<16;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(b.flags=M,(255&b.flags)!=8){S.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){S.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=M>>8&1),512&b.flags&&(L[0]=255&M,L[1]=M>>>8&255,b.check=s(b.check,L,2,0)),k=M=0,b.mode=3;case 3:for(;k<32;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}b.head&&(b.head.time=M),512&b.flags&&(L[0]=255&M,L[1]=M>>>8&255,L[2]=M>>>16&255,L[3]=M>>>24&255,b.check=s(b.check,L,4,0)),k=M=0,b.mode=4;case 4:for(;k<16;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}b.head&&(b.head.xflags=255&M,b.head.os=M>>8),512&b.flags&&(L[0]=255&M,L[1]=M>>>8&255,b.check=s(b.check,L,2,0)),k=M=0,b.mode=5;case 5:if(1024&b.flags){for(;k<16;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}b.length=M,b.head&&(b.head.extra_len=M),512&b.flags&&(L[0]=255&M,L[1]=M>>>8&255,b.check=s(b.check,L,2,0)),k=M=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(j<(B=b.length)&&(B=j),B&&(b.head&&(E=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),i.arraySet(b.head.extra,F,P,B,E)),512&b.flags&&(b.check=s(b.check,F,B,P)),j-=B,P+=B,b.length-=B),b.length))break t;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(j===0)break t;for(B=0;E=F[P+B++],b.head&&E&&b.length<65536&&(b.head.name+=String.fromCharCode(E)),E&&B<j;);if(512&b.flags&&(b.check=s(b.check,F,B,P)),j-=B,P+=B,E)break t}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(j===0)break t;for(B=0;E=F[P+B++],b.head&&E&&b.length<65536&&(b.head.comment+=String.fromCharCode(E)),E&&B<j;);if(512&b.flags&&(b.check=s(b.check,F,B,P)),j-=B,P+=B,E)break t}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;k<16;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(M!==(65535&b.check)){S.msg="header crc mismatch",b.mode=30;break}k=M=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),S.adler=b.check=0,b.mode=12;break;case 10:for(;k<32;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}S.adler=b.check=g(M),k=M=0,b.mode=11;case 11:if(b.havedict===0)return S.next_out=K,S.avail_out=et,S.next_in=P,S.avail_in=j,b.hold=M,b.bits=k,2;S.adler=b.check=1,b.mode=12;case 12:if(R===5||R===6)break t;case 13:if(b.last){M>>>=7&k,k-=7&k,b.mode=27;break}for(;k<3;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}switch(b.last=1&M,k-=1,3&(M>>>=1)){case 0:b.mode=14;break;case 1:if(x(b),b.mode=20,R!==6)break;M>>>=2,k-=2;break t;case 2:b.mode=17;break;case 3:S.msg="invalid block type",b.mode=30}M>>>=2,k-=2;break;case 14:for(M>>>=7&k,k-=7&k;k<32;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if((65535&M)!=(M>>>16^65535)){S.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&M,k=M=0,b.mode=15,R===6)break t;case 15:b.mode=16;case 16:if(B=b.length){if(j<B&&(B=j),et<B&&(B=et),B===0)break t;i.arraySet($,F,P,B,K),j-=B,P+=B,et-=B,K+=B,b.length-=B;break}b.mode=12;break;case 17:for(;k<14;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(b.nlen=257+(31&M),M>>>=5,k-=5,b.ndist=1+(31&M),M>>>=5,k-=5,b.ncode=4+(15&M),M>>>=4,k-=4,286<b.nlen||30<b.ndist){S.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;k<3;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}b.lens[H[b.have++]]=7&M,M>>>=3,k-=3}for(;b.have<19;)b.lens[H[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,q={bits:b.lenbits},G=l(0,b.lens,0,19,b.lencode,0,b.work,q),b.lenbits=q.bits,G){S.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;rt=(O=b.lencode[M&(1<<b.lenbits)-1])>>>16&255,ot=65535&O,!((W=O>>>24)<=k);){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(ot<16)M>>>=W,k-=W,b.lens[b.have++]=ot;else{if(ot===16){for(I=W+2;k<I;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(M>>>=W,k-=W,b.have===0){S.msg="invalid bit length repeat",b.mode=30;break}E=b.lens[b.have-1],B=3+(3&M),M>>>=2,k-=2}else if(ot===17){for(I=W+3;k<I;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}k-=W,E=0,B=3+(7&(M>>>=W)),M>>>=3,k-=3}else{for(I=W+7;k<I;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}k-=W,E=0,B=11+(127&(M>>>=W)),M>>>=7,k-=7}if(b.have+B>b.nlen+b.ndist){S.msg="invalid bit length repeat",b.mode=30;break}for(;B--;)b.lens[b.have++]=E}}if(b.mode===30)break;if(b.lens[256]===0){S.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,q={bits:b.lenbits},G=l(p,b.lens,0,b.nlen,b.lencode,0,b.work,q),b.lenbits=q.bits,G){S.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,q={bits:b.distbits},G=l(m,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,q),b.distbits=q.bits,G){S.msg="invalid distances set",b.mode=30;break}if(b.mode=20,R===6)break t;case 20:b.mode=21;case 21:if(6<=j&&258<=et){S.next_out=K,S.avail_out=et,S.next_in=P,S.avail_in=j,b.hold=M,b.bits=k,u(S,Y),K=S.next_out,$=S.output,et=S.avail_out,P=S.next_in,F=S.input,j=S.avail_in,M=b.hold,k=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;rt=(O=b.lencode[M&(1<<b.lenbits)-1])>>>16&255,ot=65535&O,!((W=O>>>24)<=k);){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(rt&&!(240&rt)){for(nt=W,ut=rt,ft=ot;rt=(O=b.lencode[ft+((M&(1<<nt+ut)-1)>>nt)])>>>16&255,ot=65535&O,!(nt+(W=O>>>24)<=k);){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}M>>>=nt,k-=nt,b.back+=nt}if(M>>>=W,k-=W,b.back+=W,b.length=ot,rt===0){b.mode=26;break}if(32&rt){b.back=-1,b.mode=12;break}if(64&rt){S.msg="invalid literal/length code",b.mode=30;break}b.extra=15&rt,b.mode=22;case 22:if(b.extra){for(I=b.extra;k<I;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}b.length+=M&(1<<b.extra)-1,M>>>=b.extra,k-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;rt=(O=b.distcode[M&(1<<b.distbits)-1])>>>16&255,ot=65535&O,!((W=O>>>24)<=k);){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(!(240&rt)){for(nt=W,ut=rt,ft=ot;rt=(O=b.distcode[ft+((M&(1<<nt+ut)-1)>>nt)])>>>16&255,ot=65535&O,!(nt+(W=O>>>24)<=k);){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}M>>>=nt,k-=nt,b.back+=nt}if(M>>>=W,k-=W,b.back+=W,64&rt){S.msg="invalid distance code",b.mode=30;break}b.offset=ot,b.extra=15&rt,b.mode=24;case 24:if(b.extra){for(I=b.extra;k<I;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}b.offset+=M&(1<<b.extra)-1,M>>>=b.extra,k-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){S.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(et===0)break t;if(B=Y-et,b.offset>B){if((B=b.offset-B)>b.whave&&b.sane){S.msg="invalid distance too far back",b.mode=30;break}Q=B>b.wnext?(B-=b.wnext,b.wsize-B):b.wnext-B,B>b.length&&(B=b.length),tt=b.window}else tt=$,Q=K-b.offset,B=b.length;for(et<B&&(B=et),et-=B,b.length-=B;$[K++]=tt[Q++],--B;);b.length===0&&(b.mode=21);break;case 26:if(et===0)break t;$[K++]=b.length,et--,b.mode=21;break;case 27:if(b.wrap){for(;k<32;){if(j===0)break t;j--,M|=F[P++]<<k,k+=8}if(Y-=et,S.total_out+=Y,b.total+=Y,Y&&(S.adler=b.check=b.flags?s(b.check,$,Y,K-Y):o(b.check,$,Y,K-Y)),Y=et,(b.flags?M:g(M))!==b.check){S.msg="incorrect data check",b.mode=30;break}k=M=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;k<32;){if(j===0)break t;j--,M+=F[P++]<<k,k+=8}if(M!==(4294967295&b.total)){S.msg="incorrect length check",b.mode=30;break}k=M=0}b.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return h}return S.next_out=K,S.avail_out=et,S.next_in=P,S.avail_in=j,b.hold=M,b.bits=k,(b.wsize||Y!==S.avail_out&&b.mode<30&&(b.mode<27||R!==4))&&U(S,S.output,S.next_out,Y-S.avail_out)?(b.mode=31,-4):(at-=S.avail_in,Y-=S.avail_out,S.total_in+=at,S.total_out+=Y,b.total+=Y,b.wrap&&Y&&(S.adler=b.check=b.flags?s(b.check,$,Y,S.next_out-Y):o(b.check,$,Y,S.next_out-Y)),S.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(at==0&&Y===0||R===4)&&G===d&&(G=-5),G)},a.inflateEnd=function(S){if(!S||!S.state)return h;var R=S.state;return R.window&&(R.window=null),S.state=null,d},a.inflateGetHeader=function(S,R){var b;return S&&S.state&&2&(b=S.state).wrap?((b.head=R).done=!1,d):h},a.inflateSetDictionary=function(S,R){var b,F=R.length;return S&&S.state?(b=S.state).wrap!==0&&b.mode!==11?h:b.mode===11&&o(1,R,F,0)!==b.check?-3:U(S,R,F,F)?(b.mode=31,-4):(b.havedict=1,d):h},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,a){var i=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,m,d,h,c,f,y,g){var v,w,A,_,T,D,N,C,x,U=g.bits,S=0,R=0,b=0,F=0,$=0,P=0,K=0,j=0,et=0,M=0,k=null,at=0,Y=new i.Buf16(16),B=new i.Buf16(16),Q=null,tt=0;for(S=0;S<=15;S++)Y[S]=0;for(R=0;R<h;R++)Y[m[d+R]]++;for($=U,F=15;1<=F&&Y[F]===0;F--);if(F<$&&($=F),F===0)return c[f++]=20971520,c[f++]=20971520,g.bits=1,0;for(b=1;b<F&&Y[b]===0;b++);for($<b&&($=b),S=j=1;S<=15;S++)if(j<<=1,(j-=Y[S])<0)return-1;if(0<j&&(p===0||F!==1))return-1;for(B[1]=0,S=1;S<15;S++)B[S+1]=B[S]+Y[S];for(R=0;R<h;R++)m[d+R]!==0&&(y[B[m[d+R]]++]=R);if(D=p===0?(k=Q=y,19):p===1?(k=o,at-=257,Q=s,tt-=257,256):(k=u,Q=l,-1),S=b,T=f,K=R=M=0,A=-1,_=(et=1<<(P=$))-1,p===1&&852<et||p===2&&592<et)return 1;for(;;){for(N=S-K,x=y[R]<D?(C=0,y[R]):y[R]>D?(C=Q[tt+y[R]],k[at+y[R]]):(C=96,0),v=1<<S-K,b=w=1<<P;c[T+(M>>K)+(w-=v)]=N<<24|C<<16|x|0,w!==0;);for(v=1<<S-1;M&v;)v>>=1;if(v!==0?(M&=v-1,M+=v):M=0,R++,--Y[S]==0){if(S===F)break;S=m[d+y[R]]}if($<S&&(M&_)!==A){for(K===0&&(K=$),T+=b,j=1<<(P=S-K);P+K<F&&!((j-=Y[P+K])<=0);)P++,j<<=1;if(et+=1<<P,p===1&&852<et||p===2&&592<et)return 1;c[A=M&_]=$<<24|P<<16|T-f|0}}return M!==0&&(c[T+M]=S-K<<24|64<<16|0),g.bits=$,0}},{"../utils/common":41}],51:[function(r,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,a){var i=r("../utils/common"),o=0,s=1;function u(O){for(var L=O.length;0<=--L;)O[L]=0}var l=0,p=29,m=256,d=m+1+p,h=30,c=19,f=2*d+1,y=15,g=16,v=7,w=256,A=16,_=17,T=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(d+2));u(U);var S=new Array(2*h);u(S);var R=new Array(512);u(R);var b=new Array(256);u(b);var F=new Array(p);u(F);var $,P,K,j=new Array(h);function et(O,L,H,V,z){this.static_tree=O,this.extra_bits=L,this.extra_base=H,this.elems=V,this.max_length=z,this.has_stree=O&&O.length}function M(O,L){this.dyn_tree=O,this.max_code=0,this.stat_desc=L}function k(O){return O<256?R[O]:R[256+(O>>>7)]}function at(O,L){O.pending_buf[O.pending++]=255&L,O.pending_buf[O.pending++]=L>>>8&255}function Y(O,L,H){O.bi_valid>g-H?(O.bi_buf|=L<<O.bi_valid&65535,at(O,O.bi_buf),O.bi_buf=L>>g-O.bi_valid,O.bi_valid+=H-g):(O.bi_buf|=L<<O.bi_valid&65535,O.bi_valid+=H)}function B(O,L,H){Y(O,H[2*L],H[2*L+1])}function Q(O,L){for(var H=0;H|=1&O,O>>>=1,H<<=1,0<--L;);return H>>>1}function tt(O,L,H){var V,z,X=new Array(y+1),it=0;for(V=1;V<=y;V++)X[V]=it=it+H[V-1]<<1;for(z=0;z<=L;z++){var Z=O[2*z+1];Z!==0&&(O[2*z]=Q(X[Z]++,Z))}}function W(O){var L;for(L=0;L<d;L++)O.dyn_ltree[2*L]=0;for(L=0;L<h;L++)O.dyn_dtree[2*L]=0;for(L=0;L<c;L++)O.bl_tree[2*L]=0;O.dyn_ltree[2*w]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function rt(O){8<O.bi_valid?at(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function ot(O,L,H,V){var z=2*L,X=2*H;return O[z]<O[X]||O[z]===O[X]&&V[L]<=V[H]}function nt(O,L,H){for(var V=O.heap[H],z=H<<1;z<=O.heap_len&&(z<O.heap_len&&ot(L,O.heap[z+1],O.heap[z],O.depth)&&z++,!ot(L,V,O.heap[z],O.depth));)O.heap[H]=O.heap[z],H=z,z<<=1;O.heap[H]=V}function ut(O,L,H){var V,z,X,it,Z=0;if(O.last_lit!==0)for(;V=O.pending_buf[O.d_buf+2*Z]<<8|O.pending_buf[O.d_buf+2*Z+1],z=O.pending_buf[O.l_buf+Z],Z++,V===0?B(O,z,L):(B(O,(X=b[z])+m+1,L),(it=D[X])!==0&&Y(O,z-=F[X],it),B(O,X=k(--V),H),(it=N[X])!==0&&Y(O,V-=j[X],it)),Z<O.last_lit;);B(O,w,L)}function ft(O,L){var H,V,z,X=L.dyn_tree,it=L.stat_desc.static_tree,Z=L.stat_desc.has_stree,st=L.stat_desc.elems,pt=-1;for(O.heap_len=0,O.heap_max=f,H=0;H<st;H++)X[2*H]!==0?(O.heap[++O.heap_len]=pt=H,O.depth[H]=0):X[2*H+1]=0;for(;O.heap_len<2;)X[2*(z=O.heap[++O.heap_len]=pt<2?++pt:0)]=1,O.depth[z]=0,O.opt_len--,Z&&(O.static_len-=it[2*z+1]);for(L.max_code=pt,H=O.heap_len>>1;1<=H;H--)nt(O,X,H);for(z=st;H=O.heap[1],O.heap[1]=O.heap[O.heap_len--],nt(O,X,1),V=O.heap[1],O.heap[--O.heap_max]=H,O.heap[--O.heap_max]=V,X[2*z]=X[2*H]+X[2*V],O.depth[z]=(O.depth[H]>=O.depth[V]?O.depth[H]:O.depth[V])+1,X[2*H+1]=X[2*V+1]=z,O.heap[1]=z++,nt(O,X,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(lt,Ut){var ar,jt,or,vt,Wr,Tn,ee=Ut.dyn_tree,$i=Ut.max_code,Hs=Ut.stat_desc.static_tree,Vs=Ut.stat_desc.has_stree,Ws=Ut.stat_desc.extra_bits,qi=Ut.stat_desc.extra_base,sr=Ut.stat_desc.max_length,Xr=0;for(vt=0;vt<=y;vt++)lt.bl_count[vt]=0;for(ee[2*lt.heap[lt.heap_max]+1]=0,ar=lt.heap_max+1;ar<f;ar++)sr<(vt=ee[2*ee[2*(jt=lt.heap[ar])+1]+1]+1)&&(vt=sr,Xr++),ee[2*jt+1]=vt,$i<jt||(lt.bl_count[vt]++,Wr=0,qi<=jt&&(Wr=Ws[jt-qi]),Tn=ee[2*jt],lt.opt_len+=Tn*(vt+Wr),Vs&&(lt.static_len+=Tn*(Hs[2*jt+1]+Wr)));if(Xr!==0){do{for(vt=sr-1;lt.bl_count[vt]===0;)vt--;lt.bl_count[vt]--,lt.bl_count[vt+1]+=2,lt.bl_count[sr]--,Xr-=2}while(0<Xr);for(vt=sr;vt!==0;vt--)for(jt=lt.bl_count[vt];jt!==0;)$i<(or=lt.heap[--ar])||(ee[2*or+1]!==vt&&(lt.opt_len+=(vt-ee[2*or+1])*ee[2*or],ee[2*or+1]=vt),jt--)}}(O,L),tt(X,pt,O.bl_count)}function E(O,L,H){var V,z,X=-1,it=L[1],Z=0,st=7,pt=4;for(it===0&&(st=138,pt=3),L[2*(H+1)+1]=65535,V=0;V<=H;V++)z=it,it=L[2*(V+1)+1],++Z<st&&z===it||(Z<pt?O.bl_tree[2*z]+=Z:z!==0?(z!==X&&O.bl_tree[2*z]++,O.bl_tree[2*A]++):Z<=10?O.bl_tree[2*_]++:O.bl_tree[2*T]++,X=z,pt=(Z=0)===it?(st=138,3):z===it?(st=6,3):(st=7,4))}function G(O,L,H){var V,z,X=-1,it=L[1],Z=0,st=7,pt=4;for(it===0&&(st=138,pt=3),V=0;V<=H;V++)if(z=it,it=L[2*(V+1)+1],!(++Z<st&&z===it)){if(Z<pt)for(;B(O,z,O.bl_tree),--Z!=0;);else z!==0?(z!==X&&(B(O,z,O.bl_tree),Z--),B(O,A,O.bl_tree),Y(O,Z-3,2)):Z<=10?(B(O,_,O.bl_tree),Y(O,Z-3,3)):(B(O,T,O.bl_tree),Y(O,Z-11,7));X=z,pt=(Z=0)===it?(st=138,3):z===it?(st=6,3):(st=7,4)}}u(j);var q=!1;function I(O,L,H,V){Y(O,(l<<1)+(V?1:0),3),function(z,X,it,Z){rt(z),Z&&(at(z,it),at(z,~it)),i.arraySet(z.pending_buf,z.window,X,it,z.pending),z.pending+=it}(O,L,H,!0)}a._tr_init=function(O){q||(function(){var L,H,V,z,X,it=new Array(y+1);for(z=V=0;z<p-1;z++)for(F[z]=V,L=0;L<1<<D[z];L++)b[V++]=z;for(b[V-1]=z,z=X=0;z<16;z++)for(j[z]=X,L=0;L<1<<N[z];L++)R[X++]=z;for(X>>=7;z<h;z++)for(j[z]=X<<7,L=0;L<1<<N[z]-7;L++)R[256+X++]=z;for(H=0;H<=y;H++)it[H]=0;for(L=0;L<=143;)U[2*L+1]=8,L++,it[8]++;for(;L<=255;)U[2*L+1]=9,L++,it[9]++;for(;L<=279;)U[2*L+1]=7,L++,it[7]++;for(;L<=287;)U[2*L+1]=8,L++,it[8]++;for(tt(U,d+1,it),L=0;L<h;L++)S[2*L+1]=5,S[2*L]=Q(L,5);$=new et(U,D,m+1,d,y),P=new et(S,N,0,h,y),K=new et(new Array(0),C,0,c,v)}(),q=!0),O.l_desc=new M(O.dyn_ltree,$),O.d_desc=new M(O.dyn_dtree,P),O.bl_desc=new M(O.bl_tree,K),O.bi_buf=0,O.bi_valid=0,W(O)},a._tr_stored_block=I,a._tr_flush_block=function(O,L,H,V){var z,X,it=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(Z){var st,pt=4093624447;for(st=0;st<=31;st++,pt>>>=1)if(1&pt&&Z.dyn_ltree[2*st]!==0)return o;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return s;for(st=32;st<m;st++)if(Z.dyn_ltree[2*st]!==0)return s;return o}(O)),ft(O,O.l_desc),ft(O,O.d_desc),it=function(Z){var st;for(E(Z,Z.dyn_ltree,Z.l_desc.max_code),E(Z,Z.dyn_dtree,Z.d_desc.max_code),ft(Z,Z.bl_desc),st=c-1;3<=st&&Z.bl_tree[2*x[st]+1]===0;st--);return Z.opt_len+=3*(st+1)+5+5+4,st}(O),z=O.opt_len+3+7>>>3,(X=O.static_len+3+7>>>3)<=z&&(z=X)):z=X=H+5,H+4<=z&&L!==-1?I(O,L,H,V):O.strategy===4||X===z?(Y(O,2+(V?1:0),3),ut(O,U,S)):(Y(O,4+(V?1:0),3),function(Z,st,pt,lt){var Ut;for(Y(Z,st-257,5),Y(Z,pt-1,5),Y(Z,lt-4,4),Ut=0;Ut<lt;Ut++)Y(Z,Z.bl_tree[2*x[Ut]+1],3);G(Z,Z.dyn_ltree,st-1),G(Z,Z.dyn_dtree,pt-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,it+1),ut(O,O.dyn_ltree,O.dyn_dtree)),W(O),V&&rt(O)},a._tr_tally=function(O,L,H){return O.pending_buf[O.d_buf+2*O.last_lit]=L>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&L,O.pending_buf[O.l_buf+O.last_lit]=255&H,O.last_lit++,L===0?O.dyn_ltree[2*H]++:(O.matches++,L--,O.dyn_ltree[2*(b[H]+m+1)]++,O.dyn_dtree[2*k(L)]++),O.last_lit===O.lit_bufsize-1},a._tr_align=function(O){Y(O,2,3),B(O,w,U),function(L){L.bi_valid===16?(at(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(r,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,a){(function(i){(function(o,s){if(!o.setImmediate){var u,l,p,m,d=1,h={},c=!1,f=o.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(o);y=y&&y.setTimeout?y:o,u={}.toString.call(o.process)==="[object process]"?function(A){process.nextTick(function(){v(A)})}:function(){if(o.postMessage&&!o.importScripts){var A=!0,_=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=_,A}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(A){o.postMessage(m+A,"*")}):o.MessageChannel?((p=new MessageChannel).port1.onmessage=function(A){v(A.data)},function(A){p.port2.postMessage(A)}):f&&"onreadystatechange"in f.createElement("script")?(l=f.documentElement,function(A){var _=f.createElement("script");_.onreadystatechange=function(){v(A),_.onreadystatechange=null,l.removeChild(_),_=null},l.appendChild(_)}):function(A){setTimeout(v,0,A)},y.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var _=new Array(arguments.length-1),T=0;T<_.length;T++)_[T]=arguments[T+1];var D={callback:A,args:_};return h[d]=D,u(d),d++},y.clearImmediate=g}function g(A){delete h[A]}function v(A){if(c)setTimeout(v,0,A);else{var _=h[A];if(_){c=!0;try{(function(T){var D=T.callback,N=T.args;switch(N.length){case 0:D();break;case 1:D(N[0]);break;case 2:D(N[0],N[1]);break;case 3:D(N[0],N[1],N[2]);break;default:D.apply(s,N)}})(_)}finally{g(A),c=!1}}}}function w(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(m)===0&&v(+A.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Io);var Dc=Io.exports;const Cn=oi(Dc);var Ro={exports:{}};(function(t,e){(function(r,n){n()})(Ct,function(){function r(l,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function n(l,p,m){var d=new XMLHttpRequest;d.open("GET",l),d.responseType="blob",d.onload=function(){u(d.response,p,m)},d.onerror=function(){console.error("could not download file")},d.send()}function a(l){var p=new XMLHttpRequest;p.open("HEAD",l,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function i(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ct=="object"&&Ct.global===Ct?Ct:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(l,p,m){var d=o.URL||o.webkitURL,h=document.createElement("a");p=p||l.name||"download",h.download=p,h.rel="noopener",typeof l=="string"?(h.href=l,h.origin===location.origin?i(h):a(h.href)?n(l,p,m):i(h,h.target="_blank")):(h.href=d.createObjectURL(l),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(l,p,m){if(p=p||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,m),p);else if(a(l))n(l,p,m);else{var d=document.createElement("a");d.href=l,d.target="_blank",setTimeout(function(){i(d)})}}:function(l,p,m,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof l=="string")return n(l,p,m);var h=l.type==="application/octet-stream",c=/constructor/i.test(o.HTMLElement)||o.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||h&&c||s)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var w=y.result;w=f?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=w:location=w,d=null},y.readAsDataURL(l)}else{var g=o.URL||o.webkitURL,v=g.createObjectURL(l);d?d.location=v:location.href=v,d=null,setTimeout(function(){g.revokeObjectURL(v)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})})(Ro);var On=Ro.exports,No={},lr={},cr={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.PromisePoolError=void 0;class Tc extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}Ur.PromisePoolError=Tc;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.StopThePromisePoolError=void 0;class Cc extends Error{}Mr.StopThePromisePoolError=Cc;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.ValidationError=void 0;class Oc extends Error{constructor(e){super(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}zr.ValidationError=Oc;var ia;function xc(){if(ia)return cr;ia=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.PromisePoolExecutor=void 0;const t=Vn(),e=Ur,r=Mr,n=zr;class a{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(o){if(!this.isValidConcurrency(o))throw n.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${o}" (${typeof o})`);return this.meta.concurrency=o,this}isValidConcurrency(o){return typeof o=="number"&&o>=1}withTaskTimeout(o){return this.meta.taskTimeout=o,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(o){return this.meta.shouldResultsCorrespond=o,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(o){return this.meta.items=o,this}items(){return this.meta.items}itemsCount(){const o=this.items();return Array.isArray(o)?o.length:NaN}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(o){return this.handler=o,this}hasErrorHandler(){return!!this.errorHandler}handleError(o){return this.errorHandler=o,this}onTaskStarted(o){return this.onTaskStartedHandlers=o,this}onTaskFinished(o){return this.onTaskFinishedHandlers=o,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new r.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw n.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const o=this.taskTimeout();if(!(o==null||typeof o=="number"&&o>=0))throw n.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(o)}" (${typeof o})`);if(!this.areItemsValid())throw n.ValidationError.createFrom(`"items" must be an array, an iterable or an async iterable. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw n.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(s=>{if(s&&typeof s!="function")throw n.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof s}"`)}),this.onTaskFinishedHandlers.forEach(s=>{if(s&&typeof s!="function")throw n.ValidationError.createFrom(`The error handler must be a function. Received "${typeof s}"`)}),this}areItemsValid(){const o=this.items();return!!(Array.isArray(o)||typeof o[Symbol.iterator]=="function"||typeof o[Symbol.asyncIterator]=="function")}prepareResultsArray(){const o=this.items();return Array.isArray(o)?this.shouldUseCorrespondingResults()?(this.meta.results=Array(o.length).fill(t.PromisePool.notRun),this):this:this}async process(){let o=0;for await(const s of this.items()){if(this.isStopped())break;this.shouldUseCorrespondingResults()&&(this.results()[o]=t.PromisePool.notRun),this.startProcessing(s,o),o+=1,await this.waitForProcessingSlot()}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(o,s){const u=this.createTaskFor(o,s).then(l=>{this.save(l,s).removeActive(u)}).catch(async l=>{await this.handleErrorFor(l,o,s),this.removeActive(u)}).finally(()=>{this.processedItems().push(o),this.runOnTaskFinishedHandlers(o)});this.tasks().push(u),this.runOnTaskStartedHandlers(o)}async createTaskFor(o,s){if(this.taskTimeout()===void 0)return this.handler(o,s,this);const[u,l]=this.createTaskTimeout(o);return Promise.race([this.handler(o,s,this),u()]).finally(l)}createTaskTimeout(o){let s;return[async()=>new Promise((p,m)=>{s=setTimeout(()=>{m(new e.PromisePoolError(`Task in promise pool timed out after ${this.taskTimeout()}ms`,o))},this.taskTimeout())}),()=>clearTimeout(s)]}save(o,s){return this.shouldUseCorrespondingResults()?this.results()[s]=o:this.results().push(o),this}removeActive(o){return this.tasks().splice(this.tasks().indexOf(o),1),this}async handleErrorFor(o,s,u){if(this.shouldUseCorrespondingResults()&&(this.results()[u]=t.PromisePool.failed),!this.isStoppingThePoolError(o)){if(this.isValidationError(o))throw this.markAsStopped(),o;this.hasErrorHandler()?await this.runErrorHandlerFor(o,s):this.saveErrorFor(o,s)}}isStoppingThePoolError(o){return o instanceof r.StopThePromisePoolError}isValidationError(o){return o instanceof n.ValidationError}async runErrorHandlerFor(o,s){var u;try{await((u=this.errorHandler)==null?void 0:u.call(this,o,s,this))}catch(l){this.rethrowIfNotStoppingThePool(l)}}runOnTaskStartedHandlers(o){this.onTaskStartedHandlers.forEach(s=>{s(o,this)})}runOnTaskFinishedHandlers(o){this.onTaskFinishedHandlers.forEach(s=>{s(o,this)})}rethrowIfNotStoppingThePool(o){if(!this.isStoppingThePoolError(o))throw o}saveErrorFor(o,s){this.errors().push(e.PromisePoolError.createFrom(o,s))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}return cr.PromisePoolExecutor=a,cr}var aa;function Vn(){if(aa)return lr;aa=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.PromisePool=void 0;const t=xc();class e{constructor(n){this.timeout=void 0,this.concurrency=10,this.items=n??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[],this.shouldResultsCorrespond=!1}withConcurrency(n){return this.concurrency=n,this}static withConcurrency(n){return new this().withConcurrency(n)}withTaskTimeout(n){return this.timeout=n,this}static withTaskTimeout(n){return new this().withTaskTimeout(n)}for(n){const a=new e(n).withConcurrency(this.concurrency);return typeof this.errorHandler=="function"&&a.handleError(this.errorHandler),typeof this.timeout=="number"?a.withTaskTimeout(this.timeout):a}static for(n){return new this().for(n)}handleError(n){return this.errorHandler=n,this}onTaskStarted(n){return this.onTaskStartedHandlers.push(n),this}onTaskFinished(n){return this.onTaskFinishedHandlers.push(n),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(n){return new t.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(n).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}return lr.PromisePool=e,e.notRun=Symbol("notRun"),e.failed=Symbol("failed"),lr}var Po={};Object.defineProperty(Po,"__esModule",{value:!0});var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});(function(t){var e=Ct&&Ct.__createBinding||(Object.create?function(a,i,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(a,s,u)}:function(a,i,o,s){s===void 0&&(s=o),a[s]=i[o]}),r=Ct&&Ct.__exportStar||function(a,i){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,a,o)};Object.defineProperty(t,"__esModule",{value:!0});const n=Vn();t.default=n.PromisePool,r(Po,t),r(Vn(),t),r(Ur,t),r(Bo,t),r(Mr,t),r(zr,t)})(No);var vi=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,a){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(a)},e.off=function(n,a){if(!this.listeners[n])return!1;var i=this.listeners[n].indexOf(a);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(i,1),i>-1},e.trigger=function(n){var a=this.listeners[n];if(a)if(arguments.length===2)for(var i=a.length,o=0;o<i;++o)a[o].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),u=a.length,l=0;l<u;++l)a[l].apply(this,s)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(a){n.push(a)})},t}();function $e(){return $e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$e.apply(this,arguments)}var gr;typeof window<"u"?gr=window:typeof Ct<"u"?gr=Ct:typeof self<"u"?gr=self:gr={};var Ic=gr;const mt=oi(Ic);var Rc=function(e){return mt.atob?mt.atob(e):Buffer.from(e,"base64").toString("binary")};function Fo(t){for(var e=Rc(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}/*! @name m3u8-parser @version 7.1.0 @license Apache-2.0 */class Nc extends vi{constructor(){super(),this.buffer=""}push(e){let r;for(this.buffer+=e,r=this.buffer.indexOf(`
`);r>-1;r=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,r)),this.buffer=this.buffer.substring(r+1)}}const Pc=String.fromCharCode(9),xn=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),r={};return e[1]&&(r.length=parseInt(e[1],10)),e[2]&&(r.offset=parseInt(e[2],10)),r},Bc=function(){const t="[^=]*",e='"[^"]*"|[^,]*',r="(?:"+t+")=(?:"+e+")";return new RegExp("(?:^|,)("+r+")")},Lt=function(t){const e={};if(!t)return e;const r=t.split(Bc());let n=r.length,a;for(;n--;)r[n]!==""&&(a=/([^=]*)=(.*)/.exec(r[n]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),e[a[0]]=a[1]);return e};class Fc extends vi{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let r,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((i,o)=>{const s=o(e);return s===e?i:i.concat([s])},[e]).forEach(i=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,i))return;if(i.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:i.slice(1)});return}if(i=i.replace("\r",""),r=/^#EXTM3U/.exec(i),r){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(r=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(i),r){n={type:"tag",tagType:"inf"},r[1]&&(n.duration=parseFloat(r[1])),r[2]&&(n.title=r[2]),this.trigger("data",n);return}if(r=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(i),r){n={type:"tag",tagType:"targetduration"},r[1]&&(n.duration=parseInt(r[1],10)),this.trigger("data",n);return}if(r=/^#EXT-X-VERSION:([0-9.]*)?/.exec(i),r){n={type:"tag",tagType:"version"},r[1]&&(n.version=parseInt(r[1],10)),this.trigger("data",n);return}if(r=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(i),r){n={type:"tag",tagType:"media-sequence"},r[1]&&(n.number=parseInt(r[1],10)),this.trigger("data",n);return}if(r=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(i),r){n={type:"tag",tagType:"discontinuity-sequence"},r[1]&&(n.number=parseInt(r[1],10)),this.trigger("data",n);return}if(r=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(i),r){n={type:"tag",tagType:"playlist-type"},r[1]&&(n.playlistType=r[1]),this.trigger("data",n);return}if(r=/^#EXT-X-BYTERANGE:(.*)?$/.exec(i),r){n=$e(xn(r[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(r=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(i),r){n={type:"tag",tagType:"allow-cache"},r[1]&&(n.allowed=!/NO/.test(r[1])),this.trigger("data",n);return}if(r=/^#EXT-X-MAP:(.*)$/.exec(i),r){if(n={type:"tag",tagType:"map"},r[1]){const o=Lt(r[1]);o.URI&&(n.uri=o.URI),o.BYTERANGE&&(n.byterange=xn(o.BYTERANGE))}this.trigger("data",n);return}if(r=/^#EXT-X-STREAM-INF:(.*)$/.exec(i),r){if(n={type:"tag",tagType:"stream-inf"},r[1]){if(n.attributes=Lt(r[1]),n.attributes.RESOLUTION){const o=n.attributes.RESOLUTION.split("x"),s={};o[0]&&(s.width=parseInt(o[0],10)),o[1]&&(s.height=parseInt(o[1],10)),n.attributes.RESOLUTION=s}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n);return}if(r=/^#EXT-X-MEDIA:(.*)$/.exec(i),r){n={type:"tag",tagType:"media"},r[1]&&(n.attributes=Lt(r[1])),this.trigger("data",n);return}if(r=/^#EXT-X-ENDLIST/.exec(i),r){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(r=/^#EXT-X-DISCONTINUITY/.exec(i),r){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(r=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(i),r){n={type:"tag",tagType:"program-date-time"},r[1]&&(n.dateTimeString=r[1],n.dateTimeObject=new Date(r[1])),this.trigger("data",n);return}if(r=/^#EXT-X-KEY:(.*)$/.exec(i),r){n={type:"tag",tagType:"key"},r[1]&&(n.attributes=Lt(r[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(r=/^#EXT-X-START:(.*)$/.exec(i),r){n={type:"tag",tagType:"start"},r[1]&&(n.attributes=Lt(r[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(r=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(i),r){n={type:"tag",tagType:"cue-out-cont"},r[1]?n.data=r[1]:n.data="",this.trigger("data",n);return}if(r=/^#EXT-X-CUE-OUT:(.*)?$/.exec(i),r){n={type:"tag",tagType:"cue-out"},r[1]?n.data=r[1]:n.data="",this.trigger("data",n);return}if(r=/^#EXT-X-CUE-IN:(.*)?$/.exec(i),r){n={type:"tag",tagType:"cue-in"},r[1]?n.data=r[1]:n.data="",this.trigger("data",n);return}if(r=/^#EXT-X-SKIP:(.*)$/.exec(i),r&&r[1]){n={type:"tag",tagType:"skip"},n.attributes=Lt(r[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(Pc)),this.trigger("data",n);return}if(r=/^#EXT-X-PART:(.*)$/.exec(i),r&&r[1]){n={type:"tag",tagType:"part"},n.attributes=Lt(r[1]),["DURATION"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/.test(n.attributes[o]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=xn(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(r=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(i),r&&r[1]){n={type:"tag",tagType:"server-control"},n.attributes=Lt(r[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/.test(n.attributes[o]))}),this.trigger("data",n);return}if(r=/^#EXT-X-PART-INF:(.*)$/.exec(i),r&&r[1]){n={type:"tag",tagType:"part-inf"},n.attributes=Lt(r[1]),["PART-TARGET"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),this.trigger("data",n);return}if(r=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(i),r&&r[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=Lt(r[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(n.attributes.hasOwnProperty(o)){n.attributes[o]=parseInt(n.attributes[o],10);const s=o==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[s]=n.attributes[o],delete n.attributes[o]}}),this.trigger("data",n);return}if(r=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(i),r&&r[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=Lt(r[1]),["LAST-MSN","LAST-PART"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseInt(n.attributes[o],10))}),this.trigger("data",n);return}if(r=/^#EXT-X-DATERANGE:(.*)$/.exec(i),r&&r[1]){n={type:"tag",tagType:"daterange"},n.attributes=Lt(r[1]),["ID","CLASS"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=String(n.attributes[s]))}),["START-DATE","END-DATE"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=new Date(n.attributes[s]))}),["DURATION","PLANNED-DURATION"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=parseFloat(n.attributes[s]))}),["END-ON-NEXT"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=/YES/i.test(n.attributes[s]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=n.attributes[s].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const s in n.attributes){if(!o.test(s))continue;const u=/[0-9A-Fa-f]{6}/g.test(n.attributes[s]),l=/^\d+(\.\d+)?$/.test(n.attributes[s]);n.attributes[s]=u?n.attributes[s].toString(16):l?parseFloat(n.attributes[s]):String(n.attributes[s])}this.trigger("data",n);return}if(r=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(i),r){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(r=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(i),r){n={type:"tag",tagType:"content-steering"},n.attributes=Lt(r[1]),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:i.slice(4)})})}addParser({expression:e,customType:r,dataParser:n,segment:a}){typeof n!="function"&&(n=i=>i),this.customParsers.push(i=>{if(e.exec(i))return this.trigger("data",{type:"custom",data:n(i),customType:r,segment:a}),!0})}addTagMapper({expression:e,map:r}){const n=a=>e.test(a)?r(a):a;this.tagMappers.push(n)}}const kc=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),de=function(t){const e={};return Object.keys(t).forEach(function(r){e[kc(r)]=t[r]}),e},In=function(t){const{serverControl:e,targetDuration:r,partTargetDuration:n}=t;if(!e)return;const a="#EXT-X-SERVER-CONTROL",i="holdBack",o="partHoldBack",s=r&&r*3,u=n&&n*2;r&&!e.hasOwnProperty(i)&&(e[i]=s,this.trigger("info",{message:`${a} defaulting HOLD-BACK to targetDuration * 3 (${s}).`})),s&&e[i]<s&&(this.trigger("warn",{message:`${a} clamping HOLD-BACK (${e[i]}) to targetDuration * 3 (${s})`}),e[i]=s),n&&!e.hasOwnProperty(o)&&(e[o]=n*3,this.trigger("info",{message:`${a} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),n&&e[o]<u&&(this.trigger("warn",{message:`${a} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${u}).`}),e[o]=u)};class Lc extends vi{constructor(){super(),this.lineStream=new Nc,this.parseStream=new Fc,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const e=this,r=[];let n={},a,i,o=!1;const s=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let p=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let m=0,d=0;const h={};this.on("end",()=>{n.uri||!n.parts&&!n.preloadHints||(!n.map&&a&&(n.map=a),!n.key&&i&&(n.key=i),!n.timeline&&typeof p=="number"&&(n.timeline=p),this.manifest.preloadSegment=n)}),this.parseStream.on("data",function(c){let f,y;({tag(){({version(){c.version&&(this.manifest.version=c.version)},"allow-cache"(){this.manifest.allowCache=c.allowed,"allowed"in c||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const g={};"length"in c&&(n.byterange=g,g.length=c.length,"offset"in c||(c.offset=m)),"offset"in c&&(n.byterange=g,g.offset=c.offset),m=g.offset+g.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),c.title&&(n.title=c.title),c.duration>0&&(n.duration=c.duration),c.duration===0&&(n.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key(){if(!c.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(c.attributes.METHOD==="NONE"){i=null;return}if(!c.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(c.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:c.attributes};return}if(c.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:c.attributes.URI};return}if(c.attributes.KEYFORMAT===l){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(c.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(c.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),c.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(c.attributes.KEYID&&c.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:c.attributes.KEYFORMAT,keyId:c.attributes.KEYID.substring(2)},pssh:Fo(c.attributes.URI.split(",")[1])};return}c.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:c.attributes.METHOD||"AES-128",uri:c.attributes.URI},typeof c.attributes.IV<"u"&&(i.iv=c.attributes.IV)},"media-sequence"(){if(!isFinite(c.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+c.number});return}this.manifest.mediaSequence=c.number},"discontinuity-sequence"(){if(!isFinite(c.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+c.number});return}this.manifest.discontinuitySequence=c.number,p=c.number},"playlist-type"(){if(!/VOD|EVENT/.test(c.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+c.playlist});return}this.manifest.playlistType=c.playlistType},map(){a={},c.uri&&(a.uri=c.uri),c.byterange&&(a.byterange=c.byterange),i&&(a.key=i)},"stream-inf"(){if(this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!c.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}n.attributes||(n.attributes={}),$e(n.attributes,c.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(c.attributes&&c.attributes.TYPE&&c.attributes["GROUP-ID"]&&c.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const g=this.manifest.mediaGroups[c.attributes.TYPE];g[c.attributes["GROUP-ID"]]=g[c.attributes["GROUP-ID"]]||{},f=g[c.attributes["GROUP-ID"]],y={default:/yes/i.test(c.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(c.attributes.AUTOSELECT),c.attributes.LANGUAGE&&(y.language=c.attributes.LANGUAGE),c.attributes.URI&&(y.uri=c.attributes.URI),c.attributes["INSTREAM-ID"]&&(y.instreamId=c.attributes["INSTREAM-ID"]),c.attributes.CHARACTERISTICS&&(y.characteristics=c.attributes.CHARACTERISTICS),c.attributes.FORCED&&(y.forced=/yes/i.test(c.attributes.FORCED)),f[c.attributes.NAME]=y},discontinuity(){p+=1,n.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=c.dateTimeString,this.manifest.dateTimeObject=c.dateTimeObject),n.dateTimeString=c.dateTimeString,n.dateTimeObject=c.dateTimeObject;const{lastProgramDateTime:g}=this;this.lastProgramDateTime=new Date(c.dateTimeString).getTime(),g===null&&this.manifest.segments.reduceRight((v,w)=>(w.programDateTime=v-w.duration*1e3,w.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(c.duration)||c.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+c.duration});return}this.manifest.targetDuration=c.duration,In.call(this,this.manifest)},start(){if(!c.attributes||isNaN(c.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:c.attributes["TIME-OFFSET"],precise:c.attributes.PRECISE}},"cue-out"(){n.cueOut=c.data},"cue-out-cont"(){n.cueOutCont=c.data},"cue-in"(){n.cueIn=c.data},skip(){this.manifest.skip=de(c.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",c.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const g=this.manifest.segments.length,v=de(c.attributes);n.parts=n.parts||[],n.parts.push(v),v.byterange&&(v.byterange.hasOwnProperty("offset")||(v.byterange.offset=d),d=v.byterange.offset+v.byterange.length);const w=n.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${w} for segment #${g}`,c.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((A,_)=>{A.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${_} lacks required attribute(s): LAST-PART`})})},"server-control"(){const g=this.manifest.serverControl=de(c.attributes);g.hasOwnProperty("canBlockReload")||(g.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),In.call(this,this.manifest),g.canSkipDateranges&&!g.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const g=this.manifest.segments.length,v=de(c.attributes),w=v.type&&v.type==="PART";n.preloadHints=n.preloadHints||[],n.preloadHints.push(v),v.byterange&&(v.byterange.hasOwnProperty("offset")||(v.byterange.offset=w?d:0,w&&(d=v.byterange.offset+v.byterange.length)));const A=n.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${A} for segment #${g}`,c.attributes,["TYPE","URI"]),!!v.type)for(let _=0;_<n.preloadHints.length-1;_++){const T=n.preloadHints[_];T.type&&T.type===v.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${A} for segment #${g} has the same TYPE ${v.type} as preload hint #${_}`})}},"rendition-report"(){const g=de(c.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(g);const v=this.manifest.renditionReports.length-1,w=["LAST-MSN","URI"];o&&w.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${v}`,c.attributes,w)},"part-inf"(){this.manifest.partInf=de(c.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",c.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),In.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(de(c.attributes));const g=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${g}`,c.attributes,["ID","START-DATE"]);const v=this.manifest.dateRanges[g];v.endDate&&v.startDate&&new Date(v.endDate)<new Date(v.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),v.duration&&v.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),v.plannedDuration&&v.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const w=!!v.endOnNext;if(w&&!v.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),w&&(v.duration||v.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),v.duration&&v.endDate){const _=v.startDate.getTime()+v.duration*1e3;this.manifest.dateRanges[g].endDate=new Date(_)}if(!h[v.id])h[v.id]=v;else{for(const _ in h[v.id])if(v[_]&&JSON.stringify(h[v.id][_])!==JSON.stringify(v[_])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const A=this.manifest.dateRanges.findIndex(_=>_.id===v.id);this.manifest.dateRanges[A]=$e(this.manifest.dateRanges[A],v),h[v.id]=$e(h[v.id],v),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=de(c.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",c.attributes,["SERVER-URI"])}}[c.tagType]||s).call(e)},uri(){n.uri=c.uri,r.push(n),this.manifest.targetDuration&&!("duration"in n)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),n.duration=this.manifest.targetDuration),i&&(n.key=i),n.timeline=p,a&&(n.map=a),d=0,this.lastProgramDateTime!==null&&(n.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=n.duration*1e3),n={}},comment(){},custom(){c.segment?(n.custom=n.custom||{},n.custom[c.customType]=c.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[c.customType]=c.data)}})[c.type].call(e)})}warnOnMissingAttributes_(e,r,n){const a=[];n.forEach(function(i){r.hasOwnProperty(i)||a.push(i)}),a.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${a.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var ko={exports:{}};(function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,a=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(u,l,p){if(p=p||{},u=u.trim(),l=l.trim(),!l){if(!p.alwaysNormalize)return u;var m=s.parseURL(u);if(!m)throw new Error("Error trying to parse base URL.");return m.path=s.normalizePath(m.path),s.buildURLFromParts(m)}var d=s.parseURL(l);if(!d)throw new Error("Error trying to parse relative URL.");if(d.scheme)return p.alwaysNormalize?(d.path=s.normalizePath(d.path),s.buildURLFromParts(d)):l;var h=s.parseURL(u);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var c=a.exec(h.path);h.netLoc=c[1],h.path=c[2]}h.netLoc&&!h.path&&(h.path="/");var f={scheme:h.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};if(!d.netLoc&&(f.netLoc=h.netLoc,d.path[0]!=="/"))if(!d.path)f.path=h.path,d.params||(f.params=h.params,d.query||(f.query=h.query));else{var y=h.path,g=y.substring(0,y.lastIndexOf("/")+1)+d.path;f.path=s.normalizePath(g)}return f.path===null&&(f.path=p.alwaysNormalize?s.normalizePath(d.path):d.path),s.buildURLFromParts(f)},parseURL:function(u){var l=n.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(i,"");u.length!==(u=u.replace(o,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};t.exports=s})()})(ko);var Uc=ko.exports;const oa=oi(Uc);var sa="http://example.com",bi=function(e,r){if(/^[a-z]+:/i.test(r))return r;/^data:/.test(e)&&(e=mt.location&&mt.location.href||"");var n=typeof mt.URL=="function",a=/^\/\//.test(e),i=!mt.location&&!/\/\//i.test(e);if(n?e=new mt.URL(e,mt.location||sa):/\/\//i.test(e)||(e=oa.buildAbsoluteURL(mt.location&&mt.location.href||"",e)),n){var o=new URL(r,e);return i?o.href.slice(sa.length):a?o.href.slice(o.protocol.length):o.href}return oa.buildAbsoluteURL(e,r)},Mc=function(e,r,n){r.forEach(function(a){for(var i in e.mediaGroups[a])for(var o in e.mediaGroups[a][i]){var s=e.mediaGroups[a][i][o];n(s,a,i,o)}})},ve={},fe={};function zc(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];if(e.call(void 0,a,n,t))return a}}function Ei(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function $c(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}var Lo=Ei({HTML:"text/html",isHTML:function(t){return t===Lo.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Uo=Ei({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===Uo.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});fe.assign=$c;fe.find=zc;fe.freeze=Ei;fe.MIME_TYPE=Lo;fe.NAMESPACE=Uo;var Mo=fe,Kt=Mo.find,xr=Mo.NAMESPACE;function qc(t){return t!==""}function Gc(t){return t?t.split(/[\t\n\f\r ]+/).filter(qc):[]}function jc(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function ua(t){if(!t)return[];var e=Gc(t);return Object.keys(e.reduce(jc,{}))}function Hc(t){return function(e){return t&&t.indexOf(e)!==-1}}function $r(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Ft(t,e){var r=t.prototype;if(!(r instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,$r(r,n),t.prototype=r=n}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var kt={},qt=kt.ELEMENT_NODE=1,Ze=kt.ATTRIBUTE_NODE=2,cn=kt.TEXT_NODE=3,zo=kt.CDATA_SECTION_NODE=4,$o=kt.ENTITY_REFERENCE_NODE=5,Vc=kt.ENTITY_NODE=6,qo=kt.PROCESSING_INSTRUCTION_NODE=7,Go=kt.COMMENT_NODE=8,jo=kt.DOCUMENT_NODE=9,Ho=kt.DOCUMENT_TYPE_NODE=10,ue=kt.DOCUMENT_FRAGMENT_NODE=11,Wc=kt.NOTATION_NODE=12,It={},Dt={};It.INDEX_SIZE_ERR=(Dt[1]="Index size error",1);It.DOMSTRING_SIZE_ERR=(Dt[2]="DOMString size error",2);var Nt=It.HIERARCHY_REQUEST_ERR=(Dt[3]="Hierarchy request error",3);It.WRONG_DOCUMENT_ERR=(Dt[4]="Wrong document",4);It.INVALID_CHARACTER_ERR=(Dt[5]="Invalid character",5);It.NO_DATA_ALLOWED_ERR=(Dt[6]="No data allowed",6);It.NO_MODIFICATION_ALLOWED_ERR=(Dt[7]="No modification allowed",7);var Vo=It.NOT_FOUND_ERR=(Dt[8]="Not found",8);It.NOT_SUPPORTED_ERR=(Dt[9]="Not supported",9);var la=It.INUSE_ATTRIBUTE_ERR=(Dt[10]="Attribute in use",10);It.INVALID_STATE_ERR=(Dt[11]="Invalid state",11);It.SYNTAX_ERR=(Dt[12]="Syntax error",12);It.INVALID_MODIFICATION_ERR=(Dt[13]="Invalid modification",13);It.NAMESPACE_ERR=(Dt[14]="Invalid namespace",14);It.INVALID_ACCESS_ERR=(Dt[15]="Invalid access",15);function bt(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,Dt[t]),this.message=Dt[t],Error.captureStackTrace&&Error.captureStackTrace(this,bt);return r.code=t,e&&(this.message=this.message+": "+e),r}bt.prototype=Error.prototype;$r(It,bt);function ae(){}ae.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)ze(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Ke(t,e){this._node=t,this._refresh=e,wi(this)}function wi(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var r=t._refresh(t._node);if(is(t,"length",r.length),!t.$$length||r.length<t.$$length)for(var n=r.length;n in t;n++)Object.prototype.hasOwnProperty.call(t,n)&&delete t[n];$r(r,t),t._inc=e}}Ke.prototype.item=function(t){return wi(this),this[t]||null};Ft(Ke,ae);function fn(){}function Wo(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function ca(t,e,r,n){if(n?e[Wo(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var a=t.ownerDocument;a&&(n&&Zo(a,t,n),Xc(a,t,r))}}function fa(t,e,r){var n=Wo(e,r);if(n>=0){for(var a=e.length-1;n<a;)e[n]=e[++n];if(e.length=a,t){var i=t.ownerDocument;i&&(Zo(i,t,r),r.ownerElement=null)}}else throw new bt(Vo,new Error(t.tagName+"@"+r))}fn.prototype={length:0,item:ae.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new bt(la);var r=this.getNamedItem(t.nodeName);return ca(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new bt(la);return r=this.getNamedItemNS(t.namespaceURI,t.localName),ca(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return fa(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return fa(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function Xo(){}Xo.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new qr;if(n.implementation=this,n.childNodes=new ae,n.doctype=r||null,r&&n.appendChild(r),e){var a=n.createElementNS(t,e);n.appendChild(a)}return n},createDocumentType:function(t,e,r){var n=new wn;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}};function ht(){}ht.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return dn(this,t,e)},replaceChild:function(t,e){dn(this,t,e,Jo),e&&this.removeChild(e)},removeChild:function(t){return Ko(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return Wn(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==cn&&t.nodeType==cn?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n}e=e.nodeType==Ze?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==Ze?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function Yo(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}$r(kt,ht);$r(kt,ht.prototype);function Ir(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Ir(t,e))return!0;while(t=t.nextSibling)}function qr(){this.ownerDocument=this}function Xc(t,e,r){t&&t._inc++;var n=r.namespaceURI;n===xr.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function Zo(t,e,r,n){t&&t._inc++;var a=r.namespaceURI;a===xr.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function Ai(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var a=e.firstChild,i=0;a;)n[i++]=a,a=a.nextSibling;n.length=i,delete n[n.length]}}}function Ko(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Ai(t.ownerDocument,t),e}function Yc(t){return t&&(t.nodeType===ht.DOCUMENT_NODE||t.nodeType===ht.DOCUMENT_FRAGMENT_NODE||t.nodeType===ht.ELEMENT_NODE)}function Zc(t){return t&&(Jt(t)||Si(t)||le(t)||t.nodeType===ht.DOCUMENT_FRAGMENT_NODE||t.nodeType===ht.COMMENT_NODE||t.nodeType===ht.PROCESSING_INSTRUCTION_NODE)}function le(t){return t&&t.nodeType===ht.DOCUMENT_TYPE_NODE}function Jt(t){return t&&t.nodeType===ht.ELEMENT_NODE}function Si(t){return t&&t.nodeType===ht.TEXT_NODE}function da(t,e){var r=t.childNodes||[];if(Kt(r,Jt)||le(e))return!1;var n=Kt(r,le);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function pa(t,e){var r=t.childNodes||[];function n(i){return Jt(i)&&i!==e}if(Kt(r,n))return!1;var a=Kt(r,le);return!(e&&a&&r.indexOf(a)>r.indexOf(e))}function Kc(t,e,r){if(!Yc(t))throw new bt(Nt,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new bt(Vo,"child not in parent");if(!Zc(e)||le(e)&&t.nodeType!==ht.DOCUMENT_NODE)throw new bt(Nt,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Jc(t,e,r){var n=t.childNodes||[],a=e.childNodes||[];if(e.nodeType===ht.DOCUMENT_FRAGMENT_NODE){var i=a.filter(Jt);if(i.length>1||Kt(a,Si))throw new bt(Nt,"More than one element or text in fragment");if(i.length===1&&!da(t,r))throw new bt(Nt,"Element in fragment can not be inserted before doctype")}if(Jt(e)&&!da(t,r))throw new bt(Nt,"Only one element can be added and only after doctype");if(le(e)){if(Kt(n,le))throw new bt(Nt,"Only one doctype is allowed");var o=Kt(n,Jt);if(r&&n.indexOf(o)<n.indexOf(r))throw new bt(Nt,"Doctype can only be inserted before an element");if(!r&&o)throw new bt(Nt,"Doctype can not be appended since element is present")}}function Jo(t,e,r){var n=t.childNodes||[],a=e.childNodes||[];if(e.nodeType===ht.DOCUMENT_FRAGMENT_NODE){var i=a.filter(Jt);if(i.length>1||Kt(a,Si))throw new bt(Nt,"More than one element or text in fragment");if(i.length===1&&!pa(t,r))throw new bt(Nt,"Element in fragment can not be inserted before doctype")}if(Jt(e)&&!pa(t,r))throw new bt(Nt,"Only one element can be added and only after doctype");if(le(e)){if(Kt(n,function(u){return le(u)&&u!==r}))throw new bt(Nt,"Only one doctype is allowed");var o=Kt(n,Jt);if(r&&n.indexOf(o)<n.indexOf(r))throw new bt(Nt,"Doctype can only be inserted before an element")}}function dn(t,e,r,n){Kc(t,e,r),t.nodeType===ht.DOCUMENT_NODE&&(n||Jc)(t,e,r);var a=e.parentNode;if(a&&a.removeChild(e),e.nodeType===ue){var i=e.firstChild;if(i==null)return e;var o=e.lastChild}else i=o=e;var s=r?r.previousSibling:t.lastChild;i.previousSibling=s,o.nextSibling=r,s?s.nextSibling=i:t.firstChild=i,r==null?t.lastChild=o:r.previousSibling=o;do i.parentNode=t;while(i!==o&&(i=i.nextSibling));return Ai(t.ownerDocument||t,t),e.nodeType==ue&&(e.firstChild=e.lastChild=null),e}function Qc(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,Ai(t.ownerDocument,t,e),e}qr.prototype={nodeName:"#document",nodeType:jo,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==ue){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return dn(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===qt&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Ko(this,t)},replaceChild:function(t,e){dn(this,t,e,Jo),t.ownerDocument=this,e&&this.removeChild(e),Jt(t)&&(this.documentElement=t)},importNode:function(t,e){return ns(this,t,e)},getElementById:function(t){var e=null;return Ir(this.documentElement,function(r){if(r.nodeType==qt&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=ua(t);return new Ke(this,function(r){var n=[];return e.length>0&&Ir(r.documentElement,function(a){if(a!==r&&a.nodeType===qt){var i=a.getAttribute("class");if(i){var o=t===i;if(!o){var s=ua(i);o=e.every(Hc(s))}o&&n.push(a)}}}),n})},createElement:function(t){var e=new De;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new ae;var r=e.attributes=new fn;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new An;return t.ownerDocument=this,t.childNodes=new ae,t},createTextNode:function(t){var e=new _i;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Di;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Ti;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new Oi;return r.ownerDocument=this,r.tagName=r.nodeName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new pn;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Ci;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new De,n=e.split(":"),a=r.attributes=new fn;return r.childNodes=new ae,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,a._ownerElement=r,r},createAttributeNS:function(t,e){var r=new pn,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}};Ft(qr,ht);function De(){this._nsMap={}}De.prototype={nodeType:qt,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===ue?this.insertBefore(t,null):Qc(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Ke(this,function(e){var r=[];return Ir(e,function(n){n!==e&&n.nodeType==qt&&(t==="*"||n.tagName==t)&&r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new Ke(this,function(r){var n=[];return Ir(r,function(a){a!==r&&a.nodeType===qt&&(t==="*"||a.namespaceURI===t)&&(e==="*"||a.localName==e)&&n.push(a)}),n})}};qr.prototype.getElementsByTagName=De.prototype.getElementsByTagName;qr.prototype.getElementsByTagNameNS=De.prototype.getElementsByTagNameNS;Ft(De,ht);function pn(){}pn.prototype.nodeType=Ze;Ft(pn,ht);function Gr(){}Gr.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(Dt[Nt])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var n=this.data.substring(0,t),a=this.data.substring(t+e);r=n+r+a,this.nodeValue=this.data=r,this.length=r.length}};Ft(Gr,ht);function _i(){}_i.prototype={nodeName:"#text",nodeType:cn,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Ft(_i,Gr);function Di(){}Di.prototype={nodeName:"#comment",nodeType:Go};Ft(Di,Gr);function Ti(){}Ti.prototype={nodeName:"#cdata-section",nodeType:zo};Ft(Ti,Gr);function wn(){}wn.prototype.nodeType=Ho;Ft(wn,ht);function Qo(){}Qo.prototype.nodeType=Wc;Ft(Qo,ht);function ts(){}ts.prototype.nodeType=Vc;Ft(ts,ht);function Ci(){}Ci.prototype.nodeType=$o;Ft(Ci,ht);function An(){}An.prototype.nodeName="#document-fragment";An.prototype.nodeType=ue;Ft(An,ht);function Oi(){}Oi.prototype.nodeType=qo;Ft(Oi,ht);function es(){}es.prototype.serializeToString=function(t,e,r){return rs.call(t,e,r)};ht.prototype.toString=rs;function rs(t,e){var r=[],n=this.nodeType==9&&this.documentElement||this,a=n.prefix,i=n.namespaceURI;if(i&&a==null){var a=n.lookupPrefix(i);if(a==null)var o=[{namespace:i,prefix:null}]}return ze(this,r,t,e,o),r.join("")}function ha(t,e,r){var n=t.prefix||"",a=t.namespaceURI;if(!a||n==="xml"&&a===xr.XML||a===xr.XMLNS)return!1;for(var i=r.length;i--;){var o=r[i];if(o.prefix===n)return o.namespace!==a}return!0}function Rn(t,e,r){t.push(" ",e,'="',r.replace(/[<>&"\t\n\r]/g,Yo),'"')}function ze(t,e,r,n,a){if(a||(a=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case qt:var i=t.attributes,o=i.length,g=t.firstChild,s=t.tagName;r=xr.isHTML(t.namespaceURI)||r;var u=s;if(!r&&!t.prefix&&t.namespaceURI){for(var l,p=0;p<i.length;p++)if(i.item(p).name==="xmlns"){l=i.item(p).value;break}if(!l)for(var m=a.length-1;m>=0;m--){var d=a[m];if(d.prefix===""&&d.namespace===t.namespaceURI){l=d.namespace;break}}if(l!==t.namespaceURI)for(var m=a.length-1;m>=0;m--){var d=a[m];if(d.namespace===t.namespaceURI){d.prefix&&(u=d.prefix+":"+s);break}}}e.push("<",u);for(var h=0;h<o;h++){var c=i.item(h);c.prefix=="xmlns"?a.push({prefix:c.localName,namespace:c.value}):c.nodeName=="xmlns"&&a.push({prefix:"",namespace:c.value})}for(var h=0;h<o;h++){var c=i.item(h);if(ha(c,r,a)){var f=c.prefix||"",y=c.namespaceURI;Rn(e,f?"xmlns:"+f:"xmlns",y),a.push({prefix:f,namespace:y})}ze(c,e,r,n,a)}if(s===u&&ha(t,r,a)){var f=t.prefix||"",y=t.namespaceURI;Rn(e,f?"xmlns:"+f:"xmlns",y),a.push({prefix:f,namespace:y})}if(g||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(e.push(">"),r&&/^script$/i.test(s))for(;g;)g.data?e.push(g.data):ze(g,e,r,n,a.slice()),g=g.nextSibling;else for(;g;)ze(g,e,r,n,a.slice()),g=g.nextSibling;e.push("</",u,">")}else e.push("/>");return;case jo:case ue:for(var g=t.firstChild;g;)ze(g,e,r,n,a.slice()),g=g.nextSibling;return;case Ze:return Rn(e,t.name,t.value);case cn:return e.push(t.data.replace(/[<&>]/g,Yo));case zo:return e.push("<![CDATA[",t.data,"]]>");case Go:return e.push("<!--",t.data,"-->");case Ho:var v=t.publicId,w=t.systemId;if(e.push("<!DOCTYPE ",t.name),v)e.push(" PUBLIC ",v),w&&w!="."&&e.push(" ",w),e.push(">");else if(w&&w!=".")e.push(" SYSTEM ",w,">");else{var A=t.internalSubset;A&&e.push(" [",A,"]"),e.push(">")}return;case qo:return e.push("<?",t.target," ",t.data,"?>");case $o:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function ns(t,e,r){var n;switch(e.nodeType){case qt:n=e.cloneNode(!1),n.ownerDocument=t;case ue:break;case Ze:r=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var a=e.firstChild;a;)n.appendChild(ns(t,a,r)),a=a.nextSibling;return n}function Wn(t,e,r){var n=new e.constructor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=e[a];typeof i!="object"&&i!=n[a]&&(n[a]=i)}switch(e.childNodes&&(n.childNodes=new ae),n.ownerDocument=t,n.nodeType){case qt:var o=e.attributes,s=n.attributes=new fn,u=o.length;s._ownerElement=n;for(var l=0;l<u;l++)n.setAttributeNode(Wn(t,o.item(l),!0));break;case Ze:r=!0}if(r)for(var p=e.firstChild;p;)n.appendChild(Wn(t,p,r)),p=p.nextSibling;return n}function is(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case qt:case ue:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};Object.defineProperty(Ke.prototype,"length",{get:function(){return wi(this),this.$$length}}),Object.defineProperty(ht.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case qt:case ue:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),is=function(e,r,n){e["$$"+r]=n}}}catch{}ve.DocumentType=wn;ve.DOMException=bt;ve.DOMImplementation=Xo;ve.Element=De;ve.Node=ht;ve.NodeList=ae;ve.XMLSerializer=es;var Sn={},as={};(function(t){var e=fe.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(as);var xi={},Rr=fe.NAMESPACE,Xn=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ma=new RegExp("[\\-\\.0-9"+Xn.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ga=new RegExp("^"+Xn.source+ma.source+"*(?::"+Xn.source+ma.source+"*)?$"),fr=0,pe=1,Re=2,dr=3,Ne=4,Pe=5,pr=6,Jr=7;function Je(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Je)}Je.prototype=new Error;Je.prototype.name=Je.name;function os(){}os.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),ss(e,e={}),tf(t,e,r,n,this.errorHandler),n.endDocument()}};function tf(t,e,r,n,a){function i($){if($>65535){$-=65536;var P=55296+($>>10),K=56320+($&1023);return String.fromCharCode(P,K)}else return String.fromCharCode($)}function o($){var P=$.slice(1,-1);return Object.hasOwnProperty.call(r,P)?r[P]:P.charAt(0)==="#"?i(parseInt(P.substr(1).replace("x","0x"))):(a.error("entity not found:"+$),$)}function s($){if($>f){var P=t.substring(f,$).replace(/&#?\w+;/g,o);d&&u(f),n.characters(P,0,$-f),f=$}}function u($,P){for(;$>=p&&(P=m.exec(t));)l=P.index,p=l+P[0].length,d.lineNumber++;d.columnNumber=$-l+1}for(var l=0,p=0,m=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,h=[{currentNSMap:e}],c={},f=0;;){try{var y=t.indexOf("<",f);if(y<0){if(!t.substr(f).match(/^\s*$/)){var g=n.doc,v=g.createTextNode(t.substr(f));g.appendChild(v),n.currentElement=v}return}switch(y>f&&s(y),t.charAt(y+1)){case"/":var U=t.indexOf(">",y+3),w=t.substring(y+2,U).replace(/[ \t\n\r]+$/g,""),A=h.pop();U<0?(w=t.substring(y+2).replace(/[\s<].*/,""),a.error("end tag name: "+w+" is not complete:"+A.tagName),U=y+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),a.error("end tag name: "+w+" maybe not complete"),U=y+1+w.length);var _=A.localNSMap,T=A.tagName==w,D=T||A.tagName&&A.tagName.toLowerCase()==w.toLowerCase();if(D){if(n.endElement(A.uri,A.localName,w),_)for(var N in _)Object.prototype.hasOwnProperty.call(_,N)&&n.endPrefixMapping(N);T||a.fatalError("end tag name: "+w+" is not match the current start tagName:"+A.tagName)}else h.push(A);U++;break;case"?":d&&u(y),U=of(t,y,n);break;case"!":d&&u(y),U=af(t,y,n,a);break;default:d&&u(y);var C=new us,x=h[h.length-1].currentNSMap,U=ef(t,y,C,x,o,a),S=C.length;if(!C.closed&&nf(t,U,C.tagName,c)&&(C.closed=!0,r.nbsp||a.warning("unclosed xml attribute")),d&&S){for(var R=ya(d,{}),b=0;b<S;b++){var F=C[b];u(F.offset),F.locator=ya(d,{})}n.locator=R,va(C,n,x)&&h.push(C),n.locator=d}else va(C,n,x)&&h.push(C);Rr.isHTML(C.uri)&&!C.closed?U=rf(t,U,C.tagName,o,n):U++}}catch($){if($ instanceof Je)throw $;a.error("element parse error: "+$),U=-1}U>f?f=U:s(Math.max(y,f)+1)}}function ya(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function ef(t,e,r,n,a,i){function o(d,h,c){r.attributeNames.hasOwnProperty(d)&&i.fatalError("Attribute "+d+" redefined"),r.addValue(d,h.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,a),c)}for(var s,u,l=++e,p=fr;;){var m=t.charAt(l);switch(m){case"=":if(p===pe)s=t.slice(e,l),p=dr;else if(p===Re)p=dr;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(p===dr||p===pe)if(p===pe&&(i.warning('attribute value must after "="'),s=t.slice(e,l)),e=l+1,l=t.indexOf(m,e),l>0)u=t.slice(e,l),o(s,u,e-1),p=Pe;else throw new Error("attribute value no end '"+m+"' match");else if(p==Ne)u=t.slice(e,l),o(s,u,e),i.warning('attribute "'+s+'" missed start quot('+m+")!!"),e=l+1,p=Pe;else throw new Error('attribute value must after "="');break;case"/":switch(p){case fr:r.setTagName(t.slice(e,l));case Pe:case pr:case Jr:p=Jr,r.closed=!0;case Ne:case pe:break;case Re:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),p==fr&&r.setTagName(t.slice(e,l)),l;case">":switch(p){case fr:r.setTagName(t.slice(e,l));case Pe:case pr:case Jr:break;case Ne:case pe:u=t.slice(e,l),u.slice(-1)==="/"&&(r.closed=!0,u=u.slice(0,-1));case Re:p===Re&&(u=s),p==Ne?(i.warning('attribute "'+u+'" missed quot(")!'),o(s,u,e)):((!Rr.isHTML(n[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),o(u,u,e));break;case dr:throw new Error("attribute value missed!!")}return l;case"":m=" ";default:if(m<=" ")switch(p){case fr:r.setTagName(t.slice(e,l)),p=pr;break;case pe:s=t.slice(e,l),p=Re;break;case Ne:var u=t.slice(e,l);i.warning('attribute "'+u+'" missed quot(")!!'),o(s,u,e);case Pe:p=pr;break}else switch(p){case Re:r.tagName,(!Rr.isHTML(n[""])||!s.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),o(s,s,e),e=l,p=pe;break;case Pe:i.warning('attribute space is required"'+s+'"!!');case pr:p=pe,e=l;break;case dr:p=Ne,e=l;break;case Jr:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function va(t,e,r){for(var n=t.tagName,a=null,m=t.length;m--;){var i=t[m],o=i.qName,s=i.value,d=o.indexOf(":");if(d>0)var u=i.prefix=o.slice(0,d),l=o.slice(d+1),p=u==="xmlns"&&l;else l=o,u=null,p=o==="xmlns"&&"";i.localName=l,p!==!1&&(a==null&&(a={},ss(r,r={})),r[p]=a[p]=s,i.uri=Rr.XMLNS,e.startPrefixMapping(p,s))}for(var m=t.length;m--;){i=t[m];var u=i.prefix;u&&(u==="xml"&&(i.uri=Rr.XML),u!=="xmlns"&&(i.uri=r[u||""]))}var d=n.indexOf(":");d>0?(u=t.prefix=n.slice(0,d),l=t.localName=n.slice(d+1)):(u=null,l=t.localName=n);var h=t.uri=r[u||""];if(e.startElement(h,l,n,t),t.closed){if(e.endElement(h,l,n),a)for(u in a)Object.prototype.hasOwnProperty.call(a,u)&&e.endPrefixMapping(u)}else return t.currentNSMap=r,t.localNSMap=a,!0}function rf(t,e,r,n,a){if(/^(?:script|textarea)$/i.test(r)){var i=t.indexOf("</"+r+">",e),o=t.substring(e+1,i);if(/[&<]/.test(o))return/^script$/i.test(r)?(a.characters(o,0,o.length),i):(o=o.replace(/&#?\w+;/g,n),a.characters(o,0,o.length),i)}return e+1}function nf(t,e,r,n){var a=n[r];return a==null&&(a=t.lastIndexOf("</"+r+">"),a<e&&(a=t.lastIndexOf("</"+r)),n[r]=a),a<e}function ss(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function af(t,e,r,n){var a=t.charAt(e+2);switch(a){case"-":if(t.charAt(e+3)==="-"){var i=t.indexOf("-->",e+4);return i>e?(r.comment(t,e+4,i-e-4),i+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var i=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,i-e-9),r.endCDATA(),i+3}var o=sf(t,e),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var u=o[1][0],l=!1,p=!1;s>3&&(/^public$/i.test(o[2][0])?(l=o[3][0],p=s>4&&o[4][0]):/^system$/i.test(o[2][0])&&(p=o[3][0]));var m=o[s-1];return r.startDTD(u,l,p),r.endDTD(),m.index+m[0].length}}return-1}function of(t,e,r){var n=t.indexOf("?>",e);if(n){var a=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return a?(a[0].length,r.processingInstruction(a[1],a[2]),n+2):-1}return-1}function us(){this.attributeNames={}}us.prototype={setTagName:function(t){if(!ga.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!ga.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function sf(t,e){var r,n=[],a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(a.lastIndex=e,a.exec(t);r=a.exec(t);)if(n.push(r),r[1])return n}xi.XMLReader=os;xi.ParseError=Je;var uf=fe,lf=ve,ba=as,ls=xi,cf=lf.DOMImplementation,Ea=uf.NAMESPACE,ff=ls.ParseError,df=ls.XMLReader;function cs(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function fs(t){this.options=t||{locator:{}}}fs.prototype.parseFromString=function(t,e){var r=this.options,n=new df,a=r.domBuilder||new jr,i=r.errorHandler,o=r.locator,s=r.xmlns||{},u=/\/x?html?$/.test(e),l=u?ba.HTML_ENTITIES:ba.XML_ENTITIES;o&&a.setDocumentLocator(o),n.errorHandler=pf(i,a,o),n.domBuilder=r.domBuilder||a,u&&(s[""]=Ea.HTML),s.xml=s.xml||Ea.XML;var p=r.normalizeLineEndings||cs;return t&&typeof t=="string"?n.parse(p(t),s,l):n.errorHandler.error("invalid doc source"),a.doc};function pf(t,e,r){if(!t){if(e instanceof jr)return e;t=e}var n={},a=t instanceof Function;r=r||{};function i(o){var s=t[o];!s&&a&&(s=t.length==2?function(u){t(o,u)}:t),n[o]=s&&function(u){s("[xmldom "+o+"]	"+u+Yn(r))}||function(){}}return i("warning"),i("error"),i("fatalError"),n}function jr(){this.cdata=!1}function Be(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}jr.prototype={startDocument:function(){this.doc=new cf().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var a=this.doc,i=a.createElementNS(t,r||e),o=n.length;Qr(this,i),this.currentElement=i,this.locator&&Be(this.locator,i);for(var s=0;s<o;s++){var t=n.getURI(s),u=n.getValue(s),r=n.getQName(s),l=a.createAttributeNS(t,r);this.locator&&Be(n.getLocator(s),l),l.value=l.nodeValue=u,i.setAttributeNode(l)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&Be(this.locator,r),Qr(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=wa.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&Be(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=wa.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&Be(this.locator,n),Qr(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var a=n.createDocumentType(t,e,r);this.locator&&Be(this.locator,a),Qr(this,a),this.doc.doctype=a}},warning:function(t){console.warn("[xmldom warning]	"+t,Yn(this.locator))},error:function(t){console.error("[xmldom error]	"+t,Yn(this.locator))},fatalError:function(t){throw new ff(t,this.locator)}};function Yn(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function wa(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){jr.prototype[t]=function(){return null}});function Qr(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Sn.__DOMHandler=jr;Sn.normalizeLineEndings=cs;Sn.DOMParser=fs;var hf=Sn.DOMParser;/*! @name mpd-parser @version 1.2.2 @license Apache-2.0 */const Aa=t=>!!t&&typeof t=="object",St=(...t)=>t.reduce((e,r)=>(typeof r!="object"||Object.keys(r).forEach(n=>{Array.isArray(e[n])&&Array.isArray(r[n])?e[n]=e[n].concat(r[n]):Aa(e[n])&&Aa(r[n])?e[n]=St(e[n],r[n]):e[n]=r[n]}),e),{}),ds=t=>Object.keys(t).map(e=>t[e]),mf=(t,e)=>{const r=[];for(let n=t;n<e;n++)r.push(n);return r},Qe=t=>t.reduce((e,r)=>e.concat(r),[]),ps=t=>{if(!t.length)return[];const e=[];for(let r=0;r<t.length;r++)e.push(t[r]);return e},gf=(t,e)=>t.reduce((r,n,a)=>(n[e]&&r.push(a),r),[]),yf=(t,e)=>ds(t.reduce((r,n)=>(n.forEach(a=>{r[e(a)]=a}),r),{}));var Nr={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Pr=({baseUrl:t="",source:e="",range:r="",indexRange:n=""})=>{const a={uri:e,resolvedUri:bi(t||"",e)};if(r||n){const o=(r||n).split("-");let s=mt.BigInt?mt.BigInt(o[0]):parseInt(o[0],10),u=mt.BigInt?mt.BigInt(o[1]):parseInt(o[1],10);s<Number.MAX_SAFE_INTEGER&&typeof s=="bigint"&&(s=Number(s)),u<Number.MAX_SAFE_INTEGER&&typeof u=="bigint"&&(u=Number(u));let l;typeof u=="bigint"||typeof s=="bigint"?l=mt.BigInt(u)-mt.BigInt(s)+mt.BigInt(1):l=u-s+1,typeof l=="bigint"&&l<Number.MAX_SAFE_INTEGER&&(l=Number(l)),a.byterange={length:l,offset:s}}return a},vf=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=mt.BigInt(t.offset)+mt.BigInt(t.length)-mt.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},Sa=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),bf={static(t){const{duration:e,timescale:r=1,sourceDuration:n,periodDuration:a}=t,i=Sa(t.endNumber),o=e/r;return typeof i=="number"?{start:0,end:i}:typeof a=="number"?{start:0,end:a/o}:{start:0,end:n/o}},dynamic(t){const{NOW:e,clientOffset:r,availabilityStartTime:n,timescale:a=1,duration:i,periodStart:o=0,minimumUpdatePeriod:s=0,timeShiftBufferDepth:u=1/0}=t,l=Sa(t.endNumber),p=(e+r)/1e3,m=n+o,h=p+s-m,c=Math.ceil(h*a/i),f=Math.floor((p-m-u)*a/i),y=Math.floor((p-m)*a/i);return{start:Math.max(0,f),end:typeof l=="number"?l:Math.min(c,y)}}},Ef=t=>e=>{const{duration:r,timescale:n=1,periodStart:a,startNumber:i=1}=t;return{number:i+e,duration:r/n,timeline:a,time:e*r}},Ii=t=>{const{type:e,duration:r,timescale:n=1,periodDuration:a,sourceDuration:i}=t,{start:o,end:s}=bf[e](t),u=mf(o,s).map(Ef(t));if(e==="static"){const l=u.length-1,p=typeof a=="number"?a:i;u[l].duration=p-r/n*l}return u},hs=t=>{const{baseUrl:e,initialization:r={},sourceDuration:n,indexRange:a="",periodStart:i,presentationTime:o,number:s=0,duration:u}=t;if(!e)throw new Error(Nr.NO_BASE_URL);const l=Pr({baseUrl:e,source:r.sourceURL,range:r.range}),p=Pr({baseUrl:e,source:e,indexRange:a});if(p.map=l,u){const m=Ii(t);m.length&&(p.duration=m[0].duration,p.timeline=m[0].timeline)}else n&&(p.duration=n,p.timeline=i);return p.presentationTime=o||i,p.number=s,[p]},wf=(t,e,r)=>{const n=t.sidx.map?t.sidx.map:null,a=t.sidx.duration,i=t.timeline||0,o=t.sidx.byterange,s=o.offset+o.length,u=e.timescale,l=e.references.filter(y=>y.referenceType!==1),p=[],m=t.endList?"static":"dynamic",d=t.sidx.timeline;let h=d,c=t.mediaSequence||0,f;typeof e.firstOffset=="bigint"?f=mt.BigInt(s)+e.firstOffset:f=s+e.firstOffset;for(let y=0;y<l.length;y++){const g=e.references[y],v=g.referencedSize,w=g.subsegmentDuration;let A;typeof f=="bigint"?A=f+mt.BigInt(v)-mt.BigInt(1):A=f+v-1;const _=`${f}-${A}`,D=hs({baseUrl:r,timescale:u,timeline:i,periodStart:d,presentationTime:h,number:c,duration:w,sourceDuration:a,indexRange:_,type:m})[0];n&&(D.map=n),p.push(D),typeof f=="bigint"?f+=mt.BigInt(v):f+=v,h+=w/u,c++}return t.segments=p,t},Af=["AUDIO","SUBTITLES"],Sf=1/60,ms=t=>yf(t,({timeline:e})=>e).sort((e,r)=>e.timeline>r.timeline?1:-1),_f=(t,e)=>{for(let r=0;r<t.length;r++)if(t[r].attributes.NAME===e)return t[r];return null},_a=t=>{let e=[];return Mc(t,Af,(r,n,a,i)=>{e=e.concat(r.playlists||[])}),e},Da=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((r,n)=>{r.number=t.mediaSequence+n})},Df=({oldPlaylists:t,newPlaylists:e,timelineStarts:r})=>{e.forEach(n=>{n.discontinuitySequence=r.findIndex(function({timeline:u}){return u===n.timeline});const a=_f(t,n.attributes.NAME);if(!a||n.sidx)return;const i=n.segments[0],o=a.segments.findIndex(function(u){return Math.abs(u.presentationTime-i.presentationTime)<Sf});if(o===-1){Da({playlist:n,mediaSequence:a.mediaSequence+a.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!a.segments.length&&n.timeline>a.timeline||a.segments.length&&n.timeline>a.segments[a.segments.length-1].timeline)&&n.discontinuitySequence--;return}a.segments[o].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),Da({playlist:n,mediaSequence:a.segments[o].number})})},Tf=({oldManifest:t,newManifest:e})=>{const r=t.playlists.concat(_a(t)),n=e.playlists.concat(_a(e));return e.timelineStarts=ms([t.timelineStarts,e.timelineStarts]),Df({oldPlaylists:r,newPlaylists:n,timelineStarts:e.timelineStarts}),e},Cf=t=>t&&t.uri+"-"+vf(t.byterange),Nn=t=>{const e=t.reduce(function(n,a){return n[a.attributes.baseUrl]||(n[a.attributes.baseUrl]=[]),n[a.attributes.baseUrl].push(a),n},{});let r=[];return Object.values(e).forEach(n=>{const a=ds(n.reduce((i,o)=>{const s=o.attributes.id+(o.attributes.lang||"");return i[s]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),i[s].segments.push(...o.segments)),o.attributes.contentProtection&&(i[s].attributes.contentProtection=o.attributes.contentProtection)):(i[s]=o,i[s].attributes.timelineStarts=[]),i[s].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),i},{}));r=r.concat(a)}),r.map(n=>(n.discontinuityStarts=gf(n.segments||[],"discontinuity"),n))},Ri=(t,e)=>{const r=Cf(t.sidx),n=r&&e[r]&&e[r].sidx;return n&&wf(t,n,t.sidx.resolvedUri),t},Of=(t,e={})=>{if(!Object.keys(e).length)return t;for(const r in t)t[r]=Ri(t[r],e);return t},xf=({attributes:t,segments:e,sidx:r,mediaSequence:n,discontinuitySequence:a,discontinuityStarts:i},o)=>{const s={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:a,discontinuityStarts:i,timelineStarts:t.timelineStarts,mediaSequence:n,segments:e};return t.contentProtection&&(s.contentProtection=t.contentProtection),t.serviceLocation&&(s.attributes.serviceLocation=t.serviceLocation),r&&(s.sidx=r),o&&(s.attributes.AUDIO="audio",s.attributes.SUBTITLES="subs"),s},If=({attributes:t,segments:e,mediaSequence:r,discontinuityStarts:n,discontinuitySequence:a})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const i={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(i.CODECS=t.codecs);const o={attributes:i,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:n,discontinuitySequence:a,mediaSequence:r,segments:e};return t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),o},Rf=(t,e={},r=!1)=>{let n;const a=t.reduce((i,o)=>{const s=o.attributes.role&&o.attributes.role.value||"",u=o.attributes.lang||"";let l=o.attributes.label||"main";if(u&&!o.attributes.label){const m=s?` (${s})`:"";l=`${o.attributes.lang}${m}`}i[l]||(i[l]={language:u,autoselect:!0,default:s==="main",playlists:[],uri:""});const p=Ri(xf(o,r),e);return i[l].playlists.push(p),typeof n>"u"&&s==="main"&&(n=o,n.default=!0),i},{});if(!n){const i=Object.keys(a)[0];a[i].default=!0}return a},Nf=(t,e={})=>t.reduce((r,n)=>{const a=n.attributes.label||n.attributes.lang||"text";return r[a]||(r[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),r[a].playlists.push(Ri(If(n),e)),r},{}),Pf=t=>t.reduce((e,r)=>(r&&r.forEach(n=>{const{channel:a,language:i}=n;e[i]={autoselect:!1,default:!1,instreamId:a,language:i},n.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[i].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[i]["3D"]=n["3D"])}),e),{}),Bf=({attributes:t,segments:e,sidx:r,discontinuityStarts:n})=>{const a={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:n,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(a.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(a.contentProtection=t.contentProtection),t.serviceLocation&&(a.attributes.serviceLocation=t.serviceLocation),r&&(a.sidx=r),a},Ff=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",kf=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",Lf=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",Uf=(t,e)=>{t.forEach(r=>{r.mediaSequence=0,r.discontinuitySequence=e.findIndex(function({timeline:n}){return n===r.timeline}),r.segments&&r.segments.forEach((n,a)=>{n.number=a})})},Ta=t=>t?Object.keys(t).reduce((e,r)=>{const n=t[r];return e.concat(n.playlists)},[]):[],Mf=({dashPlaylists:t,locations:e,contentSteering:r,sidxMapping:n={},previousManifest:a,eventStream:i})=>{if(!t.length)return{};const{sourceDuration:o,type:s,suggestedPresentationDelay:u,minimumUpdatePeriod:l}=t[0].attributes,p=Nn(t.filter(Ff)).map(Bf),m=Nn(t.filter(kf)),d=Nn(t.filter(Lf)),h=t.map(A=>A.attributes.captionServices).filter(Boolean),c={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:Of(p,n)};l>=0&&(c.minimumUpdatePeriod=l*1e3),e&&(c.locations=e),r&&(c.contentSteering=r),s==="dynamic"&&(c.suggestedPresentationDelay=u),i&&i.length>0&&(c.eventStream=i);const f=c.playlists.length===0,y=m.length?Rf(m,n,f):null,g=d.length?Nf(d,n):null,v=p.concat(Ta(y),Ta(g)),w=v.map(({timelineStarts:A})=>A);return c.timelineStarts=ms(w),Uf(v,c.timelineStarts),y&&(c.mediaGroups.AUDIO.audio=y),g&&(c.mediaGroups.SUBTITLES.subs=g),h.length&&(c.mediaGroups["CLOSED-CAPTIONS"].cc=Pf(h)),a?Tf({oldManifest:a,newManifest:c}):c},zf=(t,e,r)=>{const{NOW:n,clientOffset:a,availabilityStartTime:i,timescale:o=1,periodStart:s=0,minimumUpdatePeriod:u=0}=t,l=(n+a)/1e3,p=i+s,d=l+u-p;return Math.ceil((d*o-e)/r)},gs=(t,e)=>{const{type:r,minimumUpdatePeriod:n=0,media:a="",sourceDuration:i,timescale:o=1,startNumber:s=1,periodStart:u}=t,l=[];let p=-1;for(let m=0;m<e.length;m++){const d=e[m],h=d.d,c=d.r||0,f=d.t||0;p<0&&(p=f),f&&f>p&&(p=f);let y;if(c<0){const w=m+1;w===e.length?r==="dynamic"&&n>0&&a.indexOf("$Number$")>0?y=zf(t,p,h):y=(i*o-p)/h:y=(e[w].t-p)/h}else y=c+1;const g=s+l.length+y;let v=s+l.length;for(;v<g;)l.push({number:v,duration:h/o,time:p,timeline:u}),p+=h,v++}return l},$f=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,qf=t=>(e,r,n,a)=>{if(e==="$$")return"$";if(typeof t[r]>"u")return e;const i=""+t[r];return r==="RepresentationID"||(n?a=parseInt(a,10):a=1,i.length>=a)?i:`${new Array(a-i.length+1).join("0")}${i}`},Ca=(t,e)=>t.replace($f,qf(e)),Gf=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?Ii(t):gs(t,e),jf=(t,e)=>{const r={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=t,a=Pr({baseUrl:t.baseUrl,source:Ca(n.sourceURL,r),range:n.range});return Gf(t,e).map(o=>{r.Number=o.number,r.Time=o.time;const s=Ca(t.media||"",r),u=t.timescale||1,l=t.presentationTimeOffset||0,p=t.periodStart+(o.time-l)/u;return{uri:s,timeline:o.timeline,duration:o.duration,resolvedUri:bi(t.baseUrl||"",s),map:a,number:o.number,presentationTime:p}})},Hf=(t,e)=>{const{baseUrl:r,initialization:n={}}=t,a=Pr({baseUrl:r,source:n.sourceURL,range:n.range}),i=Pr({baseUrl:r,source:e.media,range:e.mediaRange});return i.map=a,i},Vf=(t,e)=>{const{duration:r,segmentUrls:n=[],periodStart:a}=t;if(!r&&!e||r&&e)throw new Error(Nr.SEGMENT_TIME_UNSPECIFIED);const i=n.map(u=>Hf(t,u));let o;return r&&(o=Ii(t)),e&&(o=gs(t,e)),o.map((u,l)=>{if(i[l]){const p=i[l],m=t.timescale||1,d=t.presentationTimeOffset||0;return p.timeline=u.timeline,p.duration=u.duration,p.number=u.number,p.presentationTime=a+(u.time-d)/m,p}}).filter(u=>u)},Wf=({attributes:t,segmentInfo:e})=>{let r,n;e.template?(n=jf,r=St(t,e.template)):e.base?(n=hs,r=St(t,e.base)):e.list&&(n=Vf,r=St(t,e.list));const a={attributes:t};if(!n)return a;const i=n(r,e.segmentTimeline);if(r.duration){const{duration:o,timescale:s=1}=r;r.duration=o/s}else i.length?r.duration=i.reduce((o,s)=>Math.max(o,Math.ceil(s.duration)),0):r.duration=0;return a.attributes=r,a.segments=i,e.base&&r.indexRange&&(a.sidx=i[0],a.segments=[]),a},Xf=t=>t.map(Wf),gt=(t,e)=>ps(t.childNodes).filter(({tagName:r})=>r===e),Hr=t=>t.textContent.trim(),Yf=t=>parseFloat(t.split("/").reduce((e,r)=>e/r)),Fe=t=>{const s=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!s)return 0;const[u,l,p,m,d,h]=s.slice(1);return parseFloat(u||0)*31536e3+parseFloat(l||0)*2592e3+parseFloat(p||0)*86400+parseFloat(m||0)*3600+parseFloat(d||0)*60+parseFloat(h||0)},Zf=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),Oa={mediaPresentationDuration(t){return Fe(t)},availabilityStartTime(t){return Zf(t)/1e3},minimumUpdatePeriod(t){return Fe(t)},suggestedPresentationDelay(t){return Fe(t)},type(t){return t},timeShiftBufferDepth(t){return Fe(t)},start(t){return Fe(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return Yf(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?Fe(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},Et=t=>t&&t.attributes?ps(t.attributes).reduce((e,r)=>{const n=Oa[r.name]||Oa.DEFAULT;return e[r.name]=n(r.value),e},{}):{},Kf={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},_n=(t,e)=>e.length?Qe(t.map(function(r){return e.map(function(n){const a=Hr(n),i=bi(r.baseUrl,a),o=St(Et(n),{baseUrl:i});return i!==a&&!o.serviceLocation&&r.serviceLocation&&(o.serviceLocation=r.serviceLocation),o})})):t,Ni=t=>{const e=gt(t,"SegmentTemplate")[0],r=gt(t,"SegmentList")[0],n=r&&gt(r,"SegmentURL").map(m=>St({tag:"SegmentURL"},Et(m))),a=gt(t,"SegmentBase")[0],i=r||e,o=i&&gt(i,"SegmentTimeline")[0],s=r||a||e,u=s&&gt(s,"Initialization")[0],l=e&&Et(e);l&&u?l.initialization=u&&Et(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});const p={template:l,segmentTimeline:o&&gt(o,"S").map(m=>Et(m)),list:r&&St(Et(r),{segmentUrls:n,initialization:Et(u)}),base:a&&St(Et(a),{initialization:Et(u)})};return Object.keys(p).forEach(m=>{p[m]||delete p[m]}),p},Jf=(t,e,r)=>n=>{const a=gt(n,"BaseURL"),i=_n(e,a),o=St(t,Et(n)),s=Ni(n);return i.map(u=>({segmentInfo:St(r,s),attributes:St(o,u)}))},Qf=t=>t.reduce((e,r)=>{const n=Et(r);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const a=Kf[n.schemeIdUri];if(a){e[a]={attributes:n};const i=gt(r,"cenc:pssh")[0];if(i){const o=Hr(i);e[a].pssh=o&&Fo(o)}}return e},{}),td=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(r=>{let n,a;return a=r,/^CC\d=/.test(r)?[n,a]=r.split("="):/^CC\d$/.test(r)&&(n=r),{channel:n,language:a}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(r=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(r)){const[a,i=""]=r.split("=");n.channel=a,n.language=r,i.split(",").forEach(o=>{const[s,u]=o.split(":");s==="lang"?n.language=u:s==="er"?n.easyReader=Number(u):s==="war"?n.aspectRatio=Number(u):s==="3D"&&(n["3D"]=Number(u))})}else n.language=r;return n.channel&&(n.channel="SERVICE"+n.channel),n})},ed=t=>Qe(gt(t.node,"EventStream").map(e=>{const r=Et(e),n=r.schemeIdUri;return gt(e,"Event").map(a=>{const i=Et(a),o=i.presentationTime||0,s=r.timescale||1,u=i.duration||0,l=o/s+t.attributes.start;return{schemeIdUri:n,value:r.value,id:i.id,start:l,end:l+u/s,messageData:Hr(a)||i.messageData,contentEncoding:r.contentEncoding,presentationTimeOffset:r.presentationTimeOffset||0}})})),rd=(t,e,r)=>n=>{const a=Et(n),i=_n(e,gt(n,"BaseURL")),o=gt(n,"Role")[0],s={role:Et(o)};let u=St(t,a,s);const l=gt(n,"Accessibility")[0],p=td(Et(l));p&&(u=St(u,{captionServices:p}));const m=gt(n,"Label")[0];if(m&&m.childNodes.length){const y=m.childNodes[0].nodeValue.trim();u=St(u,{label:y})}const d=Qf(gt(n,"ContentProtection"));Object.keys(d).length&&(u=St(u,{contentProtection:d}));const h=Ni(n),c=gt(n,"Representation"),f=St(r,h);return Qe(c.map(Jf(u,i,f)))},nd=(t,e)=>(r,n)=>{const a=_n(e,gt(r.node,"BaseURL")),i=St(t,{periodStart:r.attributes.start});typeof r.attributes.duration=="number"&&(i.periodDuration=r.attributes.duration);const o=gt(r.node,"AdaptationSet"),s=Ni(r.node);return Qe(o.map(rd(i,a,s)))},id=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const r=St({serverURL:Hr(t[0])},Et(t[0]));return r.queryBeforeStart=r.queryBeforeStart==="true",r},ad=({attributes:t,priorPeriodAttributes:e,mpdType:r})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&r==="static"?0:null,od=(t,e={})=>{const{manifestUri:r="",NOW:n=Date.now(),clientOffset:a=0,eventHandler:i=function(){}}=e,o=gt(t,"Period");if(!o.length)throw new Error(Nr.INVALID_NUMBER_OF_PERIOD);const s=gt(t,"Location"),u=Et(t),l=_n([{baseUrl:r}],gt(t,"BaseURL")),p=gt(t,"ContentSteering");u.type=u.type||"static",u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=n,u.clientOffset=a,s.length&&(u.locations=s.map(Hr));const m=[];return o.forEach((d,h)=>{const c=Et(d),f=m[h-1];c.start=ad({attributes:c,priorPeriodAttributes:f?f.attributes:null,mpdType:u.type}),m.push({node:d,attributes:c})}),{locations:u.locations,contentSteeringInfo:id(p,i),representationInfo:Qe(m.map(nd(u,l))),eventStream:Qe(m.map(ed))}},sd=t=>{if(t==="")throw new Error(Nr.DASH_EMPTY_MANIFEST);const e=new hf;let r,n;try{r=e.parseFromString(t,"application/xml"),n=r&&r.documentElement.tagName==="MPD"?r.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(Nr.DASH_INVALID_XML);return n},ud=(t,e={})=>{const r=od(sd(t),e),n=Xf(r.representationInfo);return Mf({dashPlaylists:n,locations:r.locations,contentSteering:r.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:r.eventStream})};(function(t){if(typeof exports=="object"&&typeof module<"u")module.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.muxjs=t()}})(function(){return function(){function t(e,r,n){function a(s,u){if(!r[s]){if(!e[s]){var l=typeof require=="function"&&require;if(!u&&l)return l(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var m=r[s]={exports:{}};e[s][0].call(m.exports,function(d){var h=e[s][1][d];return a(h||d)},m,m.exports,t,e,r,n)}return r[s].exports}for(var i=typeof require=="function"&&require,o=0;o<n.length;o++)a(n[o]);return a}return t}()({1:[function(t,e,r){var n=t(31),a=t(2),i;i=function(){var o=new Uint8Array,s=0;i.prototype.init.call(this),this.setTimestamp=function(u){s=u},this.push=function(u){var l=0,p=0,m,d,h,c;for(o.length?(c=o.length,o=new Uint8Array(u.byteLength+c),o.set(o.subarray(0,c)),o.set(u,c)):o=u;o.length-p>=3;){if(o[p]==="I".charCodeAt(0)&&o[p+1]==="D".charCodeAt(0)&&o[p+2]==="3".charCodeAt(0)){if(o.length-p<10||(l=a.parseId3TagSize(o,p),p+l>o.length))break;d={type:"timed-metadata",data:o.subarray(p,p+l)},this.trigger("data",d),p+=l;continue}else if((o[p]&255)===255&&(o[p+1]&240)===240){if(o.length-p<7||(l=a.parseAdtsSize(o,p),p+l>o.length))break;h={type:"audio",data:o.subarray(p,p+l),pts:s,dts:s},this.trigger("data",h),p+=l;continue}p++}m=o.length-p,m>0?o=o.subarray(p):o=new Uint8Array},this.reset=function(){o=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){o=new Uint8Array,this.trigger("endedtimeline")}},i.prototype=new n,e.exports=i},{2:2,31:31}],2:[function(t,e,r){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=function(c,f){var y=c[f+6]<<21|c[f+7]<<14|c[f+8]<<7|c[f+9],g=c[f+5],v=(g&16)>>4;return y=y>=0?y:0,v?y+20:y+10},i=function(c,f){return c.length-f<10||c[f]!=="I".charCodeAt(0)||c[f+1]!=="D".charCodeAt(0)||c[f+2]!=="3".charCodeAt(0)?f:(f+=a(c,f),i(c,f))},o=function(c){var f=i(c,0);return c.length>=f+2&&(c[f]&255)===255&&(c[f+1]&240)===240&&(c[f+1]&22)===16},s=function(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]},u=function(c,f,y){var g,v="";for(g=f;g<y;g++)v+="%"+("00"+c[g].toString(16)).slice(-2);return v},l=function(c,f,y){return unescape(u(c,f,y))},p=function(c,f){var y=(c[f+5]&224)>>5,g=c[f+4]<<3,v=c[f+3]&6144;return v|g|y},m=function(c,f){return c[f]==="I".charCodeAt(0)&&c[f+1]==="D".charCodeAt(0)&&c[f+2]==="3".charCodeAt(0)?"timed-metadata":c[f]&!0&&(c[f+1]&240)===240?"audio":null},d=function(c){for(var f=0;f+5<c.length;){if(c[f]!==255||(c[f+1]&246)!==240){f++;continue}return n[(c[f+2]&60)>>>2]}return null},h=function(c){var f,y,g,v;f=10,c[5]&64&&(f+=4,f+=s(c.subarray(10,14)));do{if(y=s(c.subarray(f+4,f+8)),y<1)return null;if(v=String.fromCharCode(c[f],c[f+1],c[f+2],c[f+3]),v==="PRIV"){g=c.subarray(f+10,f+y+10);for(var w=0;w<g.byteLength;w++)if(g[w]===0){var A=l(g,0,w);if(A==="com.apple.streaming.transportStreamTimestamp"){var _=g.subarray(w+1),T=(_[3]&1)<<30|_[4]<<22|_[5]<<14|_[6]<<6|_[7]>>>2;return T*=4,T+=_[7]&3,T}break}}f+=10,f+=y}while(f<c.byteLength);return null};e.exports={isLikelyAacData:o,parseId3TagSize:a,parseAdtsSize:p,parseType:m,parseSampleRate:d,parseAacTimestamp:h}},{}],3:[function(t,e,r){var n=t(31),a=t(29).ONE_SECOND_IN_TS,i,o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=function(s){var u,l=0;i.prototype.init.call(this),this.push=function(p){var m=0,d,h,c,f,y,g;if(s||(l=0),p.type==="audio")for(u?(f=u,u=new Uint8Array(f.byteLength+p.data.byteLength),u.set(f),u.set(p.data,f.byteLength)):u=p.data;m+5<u.length;){if(u[m]!==255||(u[m+1]&246)!==240){m++;continue}if(h=(~u[m+1]&1)*2,d=(u[m+3]&3)<<11|u[m+4]<<3|(u[m+5]&224)>>5,y=((u[m+6]&3)+1)*1024,g=y*a/o[(u[m+2]&60)>>>2],c=m+d,u.byteLength<c)return;if(this.trigger("data",{pts:p.pts+l*g,dts:p.dts+l*g,sampleCount:y,audioobjecttype:(u[m+2]>>>6&3)+1,channelcount:(u[m+2]&1)<<2|(u[m+3]&192)>>>6,samplerate:o[(u[m+2]&60)>>>2],samplingfrequencyindex:(u[m+2]&60)>>>2,samplesize:16,data:u.subarray(m+7+h,c)}),l++,u.byteLength===c){u=void 0;return}u=u.subarray(c)}},this.flush=function(){l=0,this.trigger("done")},this.reset=function(){u=void 0,this.trigger("reset")},this.endTimeline=function(){u=void 0,this.trigger("endedtimeline")}},i.prototype=new n,e.exports=i},{29:29,31:31}],4:[function(t,e,r){var n=t(31),a=t(30),i,o,s;o=function(){var u=0,l,p;o.prototype.init.call(this),this.push=function(m){var d;p?(d=new Uint8Array(p.byteLength+m.data.byteLength),d.set(p),d.set(m.data,p.byteLength),p=d):p=m.data;for(var h=p.byteLength;u<h-3;u++)if(p[u+2]===1){l=u+5;break}for(;l<h;)switch(p[l]){case 0:if(p[l-1]!==0){l+=2;break}else if(p[l-2]!==0){l++;break}u+3!==l-2&&this.trigger("data",p.subarray(u+3,l-2));do l++;while(p[l]!==1&&l<h);u=l-2,l+=3;break;case 1:if(p[l-1]!==0||p[l-2]!==0){l+=3;break}this.trigger("data",p.subarray(u+3,l-2)),u=l-2,l+=3;break;default:l+=3;break}p=p.subarray(u),l-=u,u=0},this.reset=function(){p=null,u=0,this.trigger("reset")},this.flush=function(){p&&p.byteLength>3&&this.trigger("data",p.subarray(u+3)),p=null,u=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},o.prototype=new n,s={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},i=function(){var u=new o,l,p,m,d,h,c,f;i.prototype.init.call(this),l=this,this.push=function(y){y.type==="video"&&(p=y.trackId,m=y.pts,d=y.dts,u.push(y))},u.on("data",function(y){var g={trackId:p,pts:m,dts:d,data:y};switch(y[0]&31){case 5:g.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:g.nalUnitType="sei_rbsp",g.escapedRBSP=h(y.subarray(1));break;case 7:g.nalUnitType="seq_parameter_set_rbsp",g.escapedRBSP=h(y.subarray(1)),g.config=c(g.escapedRBSP);break;case 8:g.nalUnitType="pic_parameter_set_rbsp";break;case 9:g.nalUnitType="access_unit_delimiter_rbsp";break}l.trigger("data",g)}),u.on("done",function(){l.trigger("done")}),u.on("partialdone",function(){l.trigger("partialdone")}),u.on("reset",function(){l.trigger("reset")}),u.on("endedtimeline",function(){l.trigger("endedtimeline")}),this.flush=function(){u.flush()},this.partialFlush=function(){u.partialFlush()},this.reset=function(){u.reset()},this.endTimeline=function(){u.endTimeline()},f=function(y,g){var v=8,w=8,A,_;for(A=0;A<y;A++)w!==0&&(_=g.readExpGolomb(),w=(v+_+256)%256),v=w===0?v:w},h=function(y){for(var g=y.byteLength,v=[],w=1,A,_;w<g-2;)y[w]===0&&y[w+1]===0&&y[w+2]===3?(v.push(w+2),w+=2):w++;if(v.length===0)return y;A=g-v.length,_=new Uint8Array(A);var T=0;for(w=0;w<A;T++,w++)T===v[0]&&(T++,v.shift()),_[w]=y[T];return _},c=function(y){var g=0,v=0,w=0,A=0,_=1,T,D,N,C,x,U,S,R,b,F,$,P,K,j;if(T=new a(y),D=T.readUnsignedByte(),C=T.readUnsignedByte(),N=T.readUnsignedByte(),T.skipUnsignedExpGolomb(),s[D]&&(x=T.readUnsignedExpGolomb(),x===3&&T.skipBits(1),T.skipUnsignedExpGolomb(),T.skipUnsignedExpGolomb(),T.skipBits(1),T.readBoolean()))for($=x!==3?8:12,j=0;j<$;j++)T.readBoolean()&&(j<6?f(16,T):f(64,T));if(T.skipUnsignedExpGolomb(),U=T.readUnsignedExpGolomb(),U===0)T.readUnsignedExpGolomb();else if(U===1)for(T.skipBits(1),T.skipExpGolomb(),T.skipExpGolomb(),S=T.readUnsignedExpGolomb(),j=0;j<S;j++)T.skipExpGolomb();if(T.skipUnsignedExpGolomb(),T.skipBits(1),R=T.readUnsignedExpGolomb(),b=T.readUnsignedExpGolomb(),F=T.readBits(1),F===0&&T.skipBits(1),T.skipBits(1),T.readBoolean()&&(g=T.readUnsignedExpGolomb(),v=T.readUnsignedExpGolomb(),w=T.readUnsignedExpGolomb(),A=T.readUnsignedExpGolomb()),T.readBoolean()&&T.readBoolean()){switch(K=T.readUnsignedByte(),K){case 1:P=[1,1];break;case 2:P=[12,11];break;case 3:P=[10,11];break;case 4:P=[16,11];break;case 5:P=[40,33];break;case 6:P=[24,11];break;case 7:P=[20,11];break;case 8:P=[32,11];break;case 9:P=[80,33];break;case 10:P=[18,11];break;case 11:P=[15,11];break;case 12:P=[64,33];break;case 13:P=[160,99];break;case 14:P=[4,3];break;case 15:P=[3,2];break;case 16:P=[2,1];break;case 255:{P=[T.readUnsignedByte()<<8|T.readUnsignedByte(),T.readUnsignedByte()<<8|T.readUnsignedByte()];break}}P&&(_=P[0]/P[1])}return{profileIdc:D,levelIdc:N,profileCompatibility:C,width:Math.ceil(((R+1)*16-g*2-v*2)*_),height:(2-F)*(b+1)*16-w*2-A*2,sarRatio:P}}},i.prototype=new n,e.exports={H264Stream:i,NalByteStream:o}},{30:30,31:31}],5:[function(t,e,r){var n=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];e.exports=n},{}],6:[function(t,e,r){var n=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];e.exports=n},{}],7:[function(t,e,r){var n=[33,16,5,32,164,27],a=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],i=function(u){for(var l=[];u--;)l.push(0);return l},o=function(u){return Object.keys(u).reduce(function(l,p){return l[p]=new Uint8Array(u[p].reduce(function(m,d){return m.concat(d)},[])),l},{})},s;e.exports=function(){if(!s){var u={96e3:[n,[227,64],i(154),[56]],88200:[n,[231],i(170),[56]],64e3:[n,[248,192],i(240),[56]],48e3:[n,[255,192],i(268),[55,148,128],i(54),[112]],44100:[n,[255,192],i(268),[55,163,128],i(84),[112]],32e3:[n,[255,192],i(268),[55,234],i(226),[112]],24e3:[n,[255,192],i(268),[55,255,128],i(268),[111,112],i(126),[224]],16e3:[n,[255,192],i(268),[55,255,128],i(268),[111,255],i(269),[223,108],i(195),[1,192]],12e3:[a,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,253,128],i(259),[56]],11025:[a,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,255,192],i(268),[55,175,128],i(108),[112]],8e3:[a,i(268),[3,121,16],i(47),[7]]};s=o(u)}return s}},{}],8:[function(t,e,r){var n=t(31),a=t(23),i=function(){i.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new m(0,0),new m(0,1),new m(1,0),new m(1,1)],this.reset(),this.ccStreams_.forEach(function(d){d.on("data",this.trigger.bind(this,"data")),d.on("partialdone",this.trigger.bind(this,"partialdone")),d.on("done",this.trigger.bind(this,"done"))},this)};i.prototype=new n,i.prototype.push=function(d){var h,c,f;if(d.nalUnitType==="sei_rbsp"&&(h=a.parseSei(d.escapedRBSP),h.payloadType===a.USER_DATA_REGISTERED_ITU_T_T35&&(c=a.parseUserData(h),!!c))){if(d.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(d.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}f=a.parseCaptionPackets(d.pts,c),this.captionPackets_=this.captionPackets_.concat(f),this.latestDts_!==d.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=d.dts}},i.prototype.flushCCStreams=function(d){this.ccStreams_.forEach(function(h){return d==="flush"?h.flush():h.partialFlush()},this)},i.prototype.flushStream=function(d){if(!this.captionPackets_.length){this.flushCCStreams(d);return}this.captionPackets_.forEach(function(h,c){h.presortIndex=c}),this.captionPackets_.sort(function(h,c){return h.pts===c.pts?h.presortIndex-c.presortIndex:h.pts-c.pts}),this.captionPackets_.forEach(function(h){h.type<2&&this.dispatchCea608Packet(h)},this),this.captionPackets_.length=0,this.flushCCStreams(d)},i.prototype.flush=function(){return this.flushStream("flush")},i.prototype.partialFlush=function(){return this.flushStream("partialFlush")},i.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(d){d.reset()})},i.prototype.dispatchCea608Packet=function(d){this.setsTextOrXDSActive(d)?this.activeCea608Channel_[d.type]=null:this.setsChannel1Active(d)?this.activeCea608Channel_[d.type]=0:this.setsChannel2Active(d)&&(this.activeCea608Channel_[d.type]=1),this.activeCea608Channel_[d.type]!==null&&this.ccStreams_[(d.type<<1)+this.activeCea608Channel_[d.type]].push(d)},i.prototype.setsChannel1Active=function(d){return(d.ccData&30720)===4096},i.prototype.setsChannel2Active=function(d){return(d.ccData&30720)===6144},i.prototype.setsTextOrXDSActive=function(d){return(d.ccData&28928)===256||(d.ccData&30974)===4138||(d.ccData&30974)===6186};var o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},s=function(d){return d===null?"":(d=o[d]||d,String.fromCharCode(d))},u=14,l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],p=function(){for(var d=[],h=u+1;h--;)d.push("");return d},m=function(d,h){m.prototype.init.call(this),this.field_=d||0,this.dataChannel_=h||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(c){var f,y,g,v,w;if(f=c.ccData&32639,f===this.lastControlCode_){this.lastControlCode_=null;return}if((f&61440)===4096?this.lastControlCode_=f:f!==this.PADDING_&&(this.lastControlCode_=null),g=f>>>8,v=f&255,f!==this.PADDING_)if(f===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(f===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(c.pts),this.flushDisplayed(c.pts),y=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=y,this.startPts_=c.pts;else if(f===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(c.pts);else if(f===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(c.pts);else if(f===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(c.pts);else if(f===this.CARRIAGE_RETURN_)this.clearFormatting(c.pts),this.flushDisplayed(c.pts),this.shiftRowsUp_(),this.startPts_=c.pts;else if(f===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(f===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(c.pts),this.displayed_=p();else if(f===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=p();else if(f===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(c.pts),this.displayed_=p()),this.mode_="paintOn",this.startPts_=c.pts;else if(this.isSpecialCharacter(g,v))g=(g&3)<<8,w=s(g|v),this[this.mode_](c.pts,w),this.column_++;else if(this.isExtCharacter(g,v))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),g=(g&3)<<8,w=s(g|v),this[this.mode_](c.pts,w),this.column_++;else if(this.isMidRowCode(g,v))this.clearFormatting(c.pts),this[this.mode_](c.pts," "),this.column_++,(v&14)===14&&this.addFormatting(c.pts,["i"]),(v&1)===1&&this.addFormatting(c.pts,["u"]);else if(this.isOffsetControlCode(g,v))this.column_+=v&3;else if(this.isPAC(g,v)){var A=l.indexOf(f&7968);this.mode_==="rollUp"&&(A-this.rollUpRows_+1<0&&(A=this.rollUpRows_-1),this.setRollUp(c.pts,A)),A!==this.row_&&(this.clearFormatting(c.pts),this.row_=A),v&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(c.pts,["u"]),(f&16)===16&&(this.column_=((f&14)>>1)*4),this.isColorPAC(v)&&(v&14)===14&&this.addFormatting(c.pts,["i"])}else this.isNormalChar(g)&&(v===0&&(v=null),w=s(g),w+=s(v),this[this.mode_](c.pts,w),this.column_+=w.length)}};m.prototype=new n,m.prototype.flushDisplayed=function(d){var h=this.displayed_.map(function(c){try{return c.trim()}catch{return console.error("Skipping malformed caption."),""}}).join(`
`).replace(/^\n+|\n+$/g,"");h.length&&this.trigger("data",{startPts:this.startPts_,endPts:d,text:h,stream:this.name_})},m.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=p(),this.nonDisplayed_=p(),this.lastControlCode_=null,this.column_=0,this.row_=u,this.rollUpRows_=2,this.formatting_=[]},m.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},m.prototype.isSpecialCharacter=function(d,h){return d===this.EXT_&&h>=48&&h<=63},m.prototype.isExtCharacter=function(d,h){return(d===this.EXT_+1||d===this.EXT_+2)&&h>=32&&h<=63},m.prototype.isMidRowCode=function(d,h){return d===this.EXT_&&h>=32&&h<=47},m.prototype.isOffsetControlCode=function(d,h){return d===this.OFFSET_&&h>=33&&h<=35},m.prototype.isPAC=function(d,h){return d>=this.BASE_&&d<this.BASE_+8&&h>=64&&h<=127},m.prototype.isColorPAC=function(d){return d>=64&&d<=79||d>=96&&d<=127},m.prototype.isNormalChar=function(d){return d>=32&&d<=127},m.prototype.setRollUp=function(d,h){if(this.mode_!=="rollUp"&&(this.row_=u,this.mode_="rollUp",this.flushDisplayed(d),this.nonDisplayed_=p(),this.displayed_=p()),h!==void 0&&h!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[h-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";h===void 0&&(h=this.row_),this.topRow_=h-this.rollUpRows_+1},m.prototype.addFormatting=function(d,h){this.formatting_=this.formatting_.concat(h);var c=h.reduce(function(f,y){return f+"<"+y+">"},"");this[this.mode_](d,c)},m.prototype.clearFormatting=function(d){if(this.formatting_.length){var h=this.formatting_.reverse().reduce(function(c,f){return c+"</"+f+">"},"");this.formatting_=[],this[this.mode_](d,h)}},m.prototype.popOn=function(d,h){var c=this.nonDisplayed_[this.row_];c+=h,this.nonDisplayed_[this.row_]=c},m.prototype.rollUp=function(d,h){var c=this.displayed_[this.row_];c+=h,this.displayed_[this.row_]=c},m.prototype.shiftRowsUp_=function(){var d;for(d=0;d<this.topRow_;d++)this.displayed_[d]="";for(d=this.row_+1;d<u+1;d++)this.displayed_[d]="";for(d=this.topRow_;d<this.row_;d++)this.displayed_[d]=this.displayed_[d+1];this.displayed_[this.row_]=""},m.prototype.paintOn=function(d,h){var c=this.displayed_[this.row_];c+=h,this.displayed_[this.row_]=c},e.exports={CaptionStream:i,Cea608Stream:m}},{23:23,31:31}],9:[function(t,e,r){var n=t(31),a=t(8),i=t(11),o=t(12).TimestampRolloverStream,s,u,l,p=188,m=71;s=function(){var c=new Uint8Array(p),f=0;s.prototype.init.call(this),this.push=function(y){var g=0,v=p,w;for(f?(w=new Uint8Array(y.byteLength+f),w.set(c.subarray(0,f)),w.set(y,f),f=0):w=y;v<w.byteLength;){if(w[g]===m&&w[v]===m){this.trigger("data",w.subarray(g,v)),g+=p,v+=p;continue}g++,v++}g<w.byteLength&&(c.set(w.subarray(g),0),f=w.byteLength-g)},this.flush=function(){f===p&&c[0]===m&&(this.trigger("data",c),f=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){f=0,this.trigger("reset")}},s.prototype=new n,u=function(){var c,f,y,g;u.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,c=function(v,w){var A=0;w.payloadUnitStartIndicator&&(A+=v[A]+1),w.type==="pat"?f(v.subarray(A),w):y(v.subarray(A),w)},f=function(v,w){w.section_number=v[7],w.last_section_number=v[8],g.pmtPid=(v[10]&31)<<8|v[11],w.pmtPid=g.pmtPid},y=function(v,w){var A,_,T,D;if(v[5]&1){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},A=(v[1]&15)<<8|v[2],_=3+A-4,T=(v[10]&15)<<8|v[11],D=12+T;D<_;){var N=v[D],C=(v[D+1]&31)<<8|v[D+2];N===i.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=C:N===i.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=C:N===i.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][C]=N),D+=((v[D+3]&15)<<8|v[D+4])+5}w.programMapTable=g.programMapTable}},this.push=function(v){var w={},A=4;if(w.payloadUnitStartIndicator=!!(v[1]&64),w.pid=v[1]&31,w.pid<<=8,w.pid|=v[2],(v[3]&48)>>>4>1&&(A+=v[A]+1),w.pid===0)w.type="pat",c(v.subarray(A),w),this.trigger("data",w);else if(w.pid===this.pmtPid)for(w.type="pmt",c(v.subarray(A),w),this.trigger("data",w);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([v,A,w]):this.processPes_(v,A,w)},this.processPes_=function(v,w,A){A.pid===this.programMapTable.video?A.streamType=i.H264_STREAM_TYPE:A.pid===this.programMapTable.audio?A.streamType=i.ADTS_STREAM_TYPE:A.streamType=this.programMapTable["timed-metadata"][A.pid],A.type="pes",A.data=v.subarray(w),this.trigger("data",A)}},u.prototype=new n,u.STREAM_TYPES={h264:27,adts:15},l=function(){var c=this,f={data:[],size:0},y={data:[],size:0},g={data:[],size:0},v,w=function(_,T){var D;T.packetLength=6+(_[4]<<8|_[5]),T.dataAlignmentIndicator=(_[6]&4)!==0,D=_[7],D&192&&(T.pts=(_[9]&14)<<27|(_[10]&255)<<20|(_[11]&254)<<12|(_[12]&255)<<5|(_[13]&254)>>>3,T.pts*=4,T.pts+=(_[13]&6)>>>1,T.dts=T.pts,D&64&&(T.dts=(_[14]&14)<<27|(_[15]&255)<<20|(_[16]&254)<<12|(_[17]&255)<<5|(_[18]&254)>>>3,T.dts*=4,T.dts+=(_[18]&6)>>>1)),T.data=_.subarray(9+_[8])},A=function(_,T,D){var N=new Uint8Array(_.size),C={type:T},x=0,U=0,S=!1,R;if(!(!_.data.length||_.size<9)){for(C.trackId=_.data[0].pid,x=0;x<_.data.length;x++)R=_.data[x],N.set(R.data,U),U+=R.data.byteLength;w(N,C),S=T==="video"||C.packetLength<=_.size,(D||S)&&(_.size=0,_.data.length=0),S&&c.trigger("data",C)}};l.prototype.init.call(this),this.push=function(_){({pat:function(){},pes:function(){var T,D;switch(_.streamType){case i.H264_STREAM_TYPE:T=f,D="video";break;case i.ADTS_STREAM_TYPE:T=y,D="audio";break;case i.METADATA_STREAM_TYPE:T=g,D="timed-metadata";break;default:return}_.payloadUnitStartIndicator&&A(T,D,!0),T.data.push(_),T.size+=_.data.byteLength},pmt:function(){var T={type:"metadata",tracks:[]};v=_.programMapTable,v.video!==null&&T.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+v.video,codec:"avc",type:"video"}),v.audio!==null&&T.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+v.audio,codec:"adts",type:"audio"}),c.trigger("data",T)}})[_.type]()},this.reset=function(){f.size=0,f.data.length=0,y.size=0,y.data.length=0,this.trigger("reset")},this.flushStreams_=function(){A(f,"video"),A(y,"audio"),A(g,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},l.prototype=new n;var d={PAT_PID:0,MP2T_PACKET_LENGTH:p,TransportPacketStream:s,TransportParseStream:u,ElementaryStream:l,TimestampRolloverStream:o,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:t(10)};for(var h in i)i.hasOwnProperty(h)&&(d[h]=i[h]);e.exports=d},{10:10,11:11,12:12,31:31,8:8}],10:[function(t,e,r){var n=t(31),a=t(11),i=function(m,d,h){var c,f="";for(c=d;c<h;c++)f+="%"+("00"+m[c].toString(16)).slice(-2);return f},o=function(m,d,h){return decodeURIComponent(i(m,d,h))},s=function(m,d,h){return unescape(i(m,d,h))},u=function(m){return m[0]<<21|m[1]<<14|m[2]<<7|m[3]},l={TXXX:function(m){var d;if(m.data[0]===3){for(d=1;d<m.data.length;d++)if(m.data[d]===0){m.description=o(m.data,1,d),m.value=o(m.data,d+1,m.data.length).replace(/\0*$/,"");break}m.data=m.value}},WXXX:function(m){var d;if(m.data[0]===3){for(d=1;d<m.data.length;d++)if(m.data[d]===0){m.description=o(m.data,1,d),m.url=o(m.data,d+1,m.data.length);break}}},PRIV:function(m){var d;for(d=0;d<m.data.length;d++)if(m.data[d]===0){m.owner=s(m.data,0,d);break}m.privateData=m.data.subarray(d+1),m.data=m.privateData}},p;p=function(m){var d={debug:!!(m&&m.debug),descriptor:m&&m.descriptor},h=0,c=[],f=0,y;if(p.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),d.descriptor)for(y=0;y<d.descriptor.length;y++)this.dispatchType+=("00"+d.descriptor[y].toString(16)).slice(-2);this.push=function(g){var v,w,A,_,T,D;if(g.type==="timed-metadata"){if(g.dataAlignmentIndicator&&(f=0,c.length=0),c.length===0&&(g.data.length<10||g.data[0]!=="I".charCodeAt(0)||g.data[1]!=="D".charCodeAt(0)||g.data[2]!=="3".charCodeAt(0))){d.debug&&console.log("Skipping unrecognized metadata packet");return}if(c.push(g),f+=g.data.byteLength,c.length===1&&(h=u(g.data.subarray(6,10)),h+=10),!(f<h)){for(v={data:new Uint8Array(h),frames:[],pts:c[0].pts,dts:c[0].dts},T=0;T<h;)v.data.set(c[0].data.subarray(0,h-T),T),T+=c[0].data.byteLength,f-=c[0].data.byteLength,c.shift();w=10,v.data[5]&64&&(w+=4,w+=u(v.data.subarray(10,14)),h-=u(v.data.subarray(16,20)));do{if(A=u(v.data.subarray(w+4,w+8)),A<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(D=String.fromCharCode(v.data[w],v.data[w+1],v.data[w+2],v.data[w+3]),_={id:D,data:v.data.subarray(w+10,w+A+10)},_.key=_.id,l[_.id]&&(l[_.id](_),_.owner==="com.apple.streaming.transportStreamTimestamp")){var N=_.data,C=(N[3]&1)<<30|N[4]<<22|N[5]<<14|N[6]<<6|N[7]>>>2;C*=4,C+=N[7]&3,_.timeStamp=C,v.pts===void 0&&v.dts===void 0&&(v.pts=_.timeStamp,v.dts=_.timeStamp),this.trigger("timestamp",_)}v.frames.push(_),w+=10,w+=A}while(w<h);this.trigger("data",v)}}}},p.prototype=new n,e.exports=p},{11:11,31:31}],11:[function(t,e,r){e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],12:[function(t,e,r){var n=t(31),a=8589934592,i=4294967296,o="shared",s=function(l,p){var m=1;for(l>p&&(m=-1);Math.abs(p-l)>i;)l+=m*a;return l},u=function(l){var p,m;u.prototype.init.call(this),this.type_=l||o,this.push=function(d){this.type_!==o&&d.type!==this.type_||(m===void 0&&(m=d.dts),d.dts=s(d.dts,m),d.pts=s(d.pts,m),p=d.dts,this.trigger("data",d))},this.flush=function(){m=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){m=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};u.prototype=new n,e.exports={TimestampRolloverStream:u,handleRollover:s}},{31:31}],13:[function(t,e,r){var n=t(7),a=t(29),i=function(p){var m,d,h=0;for(m=0;m<p.length;m++)d=p[m],h+=d.data.byteLength;return h},o=function(p,m,d,h){var c,f=0,y=0,g=0,v=0,w,A,_;if(m.length&&(c=a.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),f=Math.ceil(a.ONE_SECOND_IN_TS/(p.samplerate/1024)),d&&h&&(y=c-Math.max(d,h),g=Math.floor(y/f),v=g*f),!(g<1||v>a.ONE_SECOND_IN_TS/2))){for(w=n()[p.samplerate],w||(w=m[0].data),A=0;A<g;A++)_=m[0],m.splice(0,0,{data:w,dts:_.dts-f,pts:_.pts-f});p.baseMediaDecodeTime-=Math.floor(a.videoTsToAudioTs(v,p.samplerate))}},s=function(p,m,d){return m.minSegmentDts>=d?p:(m.minSegmentDts=1/0,p.filter(function(h){return h.dts>=d?(m.minSegmentDts=Math.min(m.minSegmentDts,h.dts),m.minSegmentPts=m.minSegmentDts,!0):!1}))},u=function(p){var m,d,h=[];for(m=0;m<p.length;m++)d=p[m],h.push({size:d.data.byteLength,duration:1024});return h},l=function(p){var m,d,h=0,c=new Uint8Array(i(p));for(m=0;m<p.length;m++)d=p[m],c.set(d.data,h),h+=d.data.byteLength;return c};e.exports={prefixWithSilence:o,trimAdtsFramesByEarliestDts:s,generateSampleTable:u,concatenateFrameData:l}},{29:29,7:7}],14:[function(t,e,r){var n=t(23).discardEmulationPreventionBytes,a=t(8).CaptionStream,i=t(15),o=t(25),s=t(27),u=t(26),l=function(f,y){for(var g=f,v=0;v<y.length;v++){var w=y[v];if(g<w.size)return w;g-=w.size}return null},p=function(f,y,g){var v=new DataView(f.buffer,f.byteOffset,f.byteLength),w=[],A,_,T,D;for(_=0;_+4<f.length;_+=T)if(T=v.getUint32(_),_+=4,!(T<=0))switch(f[_]&31){case 6:var N=f.subarray(_+1,_+1+T),C=l(_,y);if(A={nalUnitType:"sei_rbsp",size:T,data:N,escapedRBSP:n(N),trackId:g},C)A.pts=C.pts,A.dts=C.dts,D=C;else if(D)A.pts=D.pts,A.dts=D.dts;else{console.log("We've encountered a nal unit without data. See mux.js#233.");break}w.push(A);break}return w},m=function(f,y,g){var v=y,w=g.defaultSampleDuration||0,A=g.defaultSampleSize||0,_=g.trackId,T=[];return f.forEach(function(D){var N=s(D),C=N.samples;C.forEach(function(x){x.duration===void 0&&(x.duration=w),x.size===void 0&&(x.size=A),x.trackId=_,x.dts=v,x.compositionTimeOffset===void 0&&(x.compositionTimeOffset=0),x.pts=v+x.compositionTimeOffset,v+=x.duration}),T=T.concat(C)}),T},d=function(f,y){var g=i(f,["moof","traf"]),v=i(f,["mdat"]),w={},A=[];return v.forEach(function(_,T){var D=g[T];A.push({mdat:_,traf:D})}),A.forEach(function(_){var T=_.mdat,D=_.traf,N=i(D,["tfhd"]),C=u(N[0]),x=C.trackId,U=i(D,["tfdt"]),S=U.length>0?o(U[0]).baseMediaDecodeTime:0,R=i(D,["trun"]),b,F;y===x&&R.length>0&&(b=m(R,S,C),F=p(T,b,x),w[x]||(w[x]=[]),w[x]=w[x].concat(F))}),w},h=function(f,y,g){var v;return y===null?null:(v=d(f,y),{seiNals:v[y],timescale:g})},c=function(){var f=!1,y,g,v,w,A,_;this.isInitialized=function(){return f},this.init=function(T){y=new a,f=!0,_=T?T.isPartial:!1,y.on("data",function(D){D.startTime=D.startPts/w,D.endTime=D.endPts/w,A.captions.push(D),A.captionStreams[D.stream]=!0})},this.isNewInit=function(T,D){return T&&T.length===0||D&&typeof D=="object"&&Object.keys(D).length===0?!1:v!==T[0]||w!==D[v]},this.parse=function(T,D,N){var C;if(this.isInitialized()){if(!D||!N)return null;if(this.isNewInit(D,N))v=D[0],w=N[v];else if(v===null||!w)return g.push(T),null}else return null;for(;g.length>0;){var x=g.shift();this.parse(x,D,N)}return C=h(T,v,w),C===null||!C.seiNals?null:(this.pushNals(C.seiNals),this.flushStream(),A)},this.pushNals=function(T){if(!this.isInitialized()||!T||T.length===0)return null;T.forEach(function(D){y.push(D)})},this.flushStream=function(){if(!this.isInitialized())return null;_?y.partialFlush():y.flush()},this.clearParsedCaptions=function(){A.captions=[],A.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;y.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){g=[],v=null,w=null,A?this.clearParsedCaptions():A={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};e.exports=c},{15:15,23:23,25:25,26:26,27:27,8:8}],15:[function(t,e,r){var n=t(28).toUnsigned,a=t(19),i=function(o,s){var u=[],l,p,m,d,h;if(!s.length)return null;for(l=0;l<o.byteLength;)p=n(o[l]<<24|o[l+1]<<16|o[l+2]<<8|o[l+3]),m=a(o.subarray(l+4,l+8)),d=p>1?l+p:o.byteLength,m===s[0]&&(s.length===1?u.push(o.subarray(l+8,d)):(h=i(o.subarray(l+8,d),s.slice(1)),h.length&&(u=u.concat(h)))),l=d;return u};e.exports=i},{19:19,28:28}],16:[function(t,e,r){var n=function(d){var h,c,f=[],y=[];for(y.byteLength=0,y.nalCount=0,y.duration=0,f.byteLength=0,h=0;h<d.length;h++)c=d[h],c.nalUnitType==="access_unit_delimiter_rbsp"?(f.length&&(f.duration=c.dts-f.dts,y.byteLength+=f.byteLength,y.nalCount+=f.length,y.duration+=f.duration,y.push(f)),f=[c],f.byteLength=c.data.byteLength,f.pts=c.pts,f.dts=c.dts):(c.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(f.keyFrame=!0),f.duration=c.dts-f.dts,f.byteLength+=c.data.byteLength,f.push(c));return y.length&&(!f.duration||f.duration<=0)&&(f.duration=y[y.length-1].duration),y.byteLength+=f.byteLength,y.nalCount+=f.length,y.duration+=f.duration,y.push(f),y},a=function(d){var h,c,f=[],y=[];for(f.byteLength=0,f.nalCount=0,f.duration=0,f.pts=d[0].pts,f.dts=d[0].dts,y.byteLength=0,y.nalCount=0,y.duration=0,y.pts=d[0].pts,y.dts=d[0].dts,h=0;h<d.length;h++)c=d[h],c.keyFrame?(f.length&&(y.push(f),y.byteLength+=f.byteLength,y.nalCount+=f.nalCount,y.duration+=f.duration),f=[c],f.nalCount=c.length,f.byteLength=c.byteLength,f.pts=c.pts,f.dts=c.dts,f.duration=c.duration):(f.duration+=c.duration,f.nalCount+=c.length,f.byteLength+=c.byteLength,f.push(c));return y.length&&f.duration<=0&&(f.duration=y[y.length-1].duration),y.byteLength+=f.byteLength,y.nalCount+=f.nalCount,y.duration+=f.duration,y.push(f),y},i=function(d){var h;return!d[0][0].keyFrame&&d.length>1&&(h=d.shift(),d.byteLength-=h.byteLength,d.nalCount-=h.nalCount,d[0][0].dts=h.dts,d[0][0].pts=h.pts,d[0][0].duration+=h.duration),d},o=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},s=function(d,h){var c=o();return c.dataOffset=h,c.compositionTimeOffset=d.pts-d.dts,c.duration=d.duration,c.size=4*d.length,c.size+=d.byteLength,d.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c},u=function(d,h){var c,f,y,g,v,w=h||0,A=[];for(c=0;c<d.length;c++)for(g=d[c],f=0;f<g.length;f++)v=g[f],y=s(v,w),w+=y.size,A.push(y);return A},l=function(d){var h,c,f,y,g,v,w=0,A=d.byteLength,_=d.nalCount,T=A+4*_,D=new Uint8Array(T),N=new DataView(D.buffer);for(h=0;h<d.length;h++)for(y=d[h],c=0;c<y.length;c++)for(g=y[c],f=0;f<g.length;f++)v=g[f],N.setUint32(w,v.data.byteLength),w+=4,D.set(v.data,w),w+=v.data.byteLength;return D},p=function(d,h){var c,f=h||0,y=[];return c=s(d,f),y.push(c),y},m=function(d){var h,c,f=0,y=d.byteLength,g=d.length,v=y+4*g,w=new Uint8Array(v),A=new DataView(w.buffer);for(h=0;h<d.length;h++)c=d[h],A.setUint32(f,c.data.byteLength),f+=4,w.set(c.data,f),f+=c.data.byteLength;return w};e.exports={groupNalsIntoFrames:n,groupFramesIntoGops:a,extendFirstKeyFrame:i,generateSampleTable:u,concatenateNalData:l,generateSampleTableForFrame:p,concatenateNalDataForFrame:m}},{}],17:[function(t,e,r){e.exports={generator:t(18),probe:t(20),Transmuxer:t(22).Transmuxer,AudioSegmentStream:t(22).AudioSegmentStream,VideoSegmentStream:t(22).VideoSegmentStream,CaptionParser:t(14)}},{14:14,18:18,20:20,22:22}],18:[function(t,e,r){var n=Math.pow(2,32)-1,a,i,o,s,u,l,p,m,d,h,c,f,y,g,v,w,A,_,T,D,N,C,x,U,S,R,b,F,$,P,K,j,et,M,k,at,Y=4294967295;(function(){var B;if(x={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(B in x)x.hasOwnProperty(B)&&(x[B]=[B.charCodeAt(0),B.charCodeAt(1),B.charCodeAt(2),B.charCodeAt(3)]);U=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),R=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),S=new Uint8Array([0,0,0,1]),b=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),F=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),$={video:b,audio:F},j=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),K=new Uint8Array([0,0,0,0,0,0,0,0]),et=new Uint8Array([0,0,0,0,0,0,0,0]),M=et,k=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),at=et,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(B){var Q=[],tt=0,W,rt,ot;for(W=1;W<arguments.length;W++)Q.push(arguments[W]);for(W=Q.length;W--;)tt+=Q[W].byteLength;for(rt=new Uint8Array(tt+8),ot=new DataView(rt.buffer,rt.byteOffset,rt.byteLength),ot.setUint32(0,rt.byteLength),rt.set(B,4),W=0,tt=8;W<Q.length;W++)rt.set(Q[W],tt),tt+=Q[W].byteLength;return rt},i=function(){return a(x.dinf,a(x.dref,j))},o=function(B){return a(x.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,B.audioobjecttype<<3|B.samplingfrequencyindex>>>1,B.samplingfrequencyindex<<7|B.channelcount<<3,6,1,2]))},s=function(){return a(x.ftyp,U,S,U,R)},w=function(B){return a(x.hdlr,$[B])},u=function(B){return a(x.mdat,B)},v=function(B){var Q=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,B.duration>>>24&255,B.duration>>>16&255,B.duration>>>8&255,B.duration&255,85,196,0,0]);return B.samplerate&&(Q[12]=B.samplerate>>>24&255,Q[13]=B.samplerate>>>16&255,Q[14]=B.samplerate>>>8&255,Q[15]=B.samplerate&255,B.duration=B.duration/9e4*B.samplerate,Q[16]=B.duration>>>24&255,Q[17]=B.duration>>>16&255,Q[18]=B.duration>>>8&255,Q[19]=B.duration&255),a(x.mdhd,Q)},g=function(B){return a(x.mdia,v(B),w(B.type),p(B))},l=function(B){return a(x.mfhd,new Uint8Array([0,0,0,0,(B&4278190080)>>24,(B&16711680)>>16,(B&65280)>>8,B&255]))},p=function(B){return a(x.minf,B.type==="video"?a(x.vmhd,P):a(x.smhd,K),i(),_(B))},m=function(B,Q){for(var tt=[],W=Q.length;W--;)tt[W]=D(Q[W]);return a.apply(null,[x.moof,l(B)].concat(tt))},d=function(B){for(var Q=B.length,tt=[];Q--;)tt[Q]=f(B[Q]);return a.apply(null,[x.moov,c(Y)].concat(tt).concat(h(B)))},h=function(B){for(var Q=B.length,tt=[];Q--;)tt[Q]=N(B[Q]);return a.apply(null,[x.mvex].concat(tt))},c=function(B){var Q=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(B&4278190080)>>24,(B&16711680)>>16,(B&65280)>>8,B&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(x.mvhd,Q)},A=function(B){var Q=B.samples||[],tt=new Uint8Array(4+Q.length),W,rt;for(rt=0;rt<Q.length;rt++)W=Q[rt].flags,tt[rt+4]=W.dependsOn<<4|W.isDependedOn<<2|W.hasRedundancy;return a(x.sdtp,tt)},_=function(B){return a(x.stbl,T(B),a(x.stts,at),a(x.stsc,M),a(x.stsz,k),a(x.stco,et))},function(){var B,Q;T=function(tt){return a(x.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),tt.type==="video"?B(tt):Q(tt))},B=function(tt){var W=tt.sps||[],rt=tt.pps||[],ot=[],nt=[],ut,ft;for(ut=0;ut<W.length;ut++)ot.push((W[ut].byteLength&65280)>>>8),ot.push(W[ut].byteLength&255),ot=ot.concat(Array.prototype.slice.call(W[ut]));for(ut=0;ut<rt.length;ut++)nt.push((rt[ut].byteLength&65280)>>>8),nt.push(rt[ut].byteLength&255),nt=nt.concat(Array.prototype.slice.call(rt[ut]));if(ft=[x.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(tt.width&65280)>>8,tt.width&255,(tt.height&65280)>>8,tt.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(x.avcC,new Uint8Array([1,tt.profileIdc,tt.profileCompatibility,tt.levelIdc,255].concat([W.length],ot,[rt.length],nt))),a(x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],tt.sarRatio){var E=tt.sarRatio[0],G=tt.sarRatio[1];ft.push(a(x.pasp,new Uint8Array([(E&4278190080)>>24,(E&16711680)>>16,(E&65280)>>8,E&255,(G&4278190080)>>24,(G&16711680)>>16,(G&65280)>>8,G&255])))}return a.apply(null,ft)},Q=function(tt){return a(x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(tt.channelcount&65280)>>8,tt.channelcount&255,(tt.samplesize&65280)>>8,tt.samplesize&255,0,0,0,0,(tt.samplerate&65280)>>8,tt.samplerate&255,0,0]),o(tt))}}(),y=function(B){var Q=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(B.id&4278190080)>>24,(B.id&16711680)>>16,(B.id&65280)>>8,B.id&255,0,0,0,0,(B.duration&4278190080)>>24,(B.duration&16711680)>>16,(B.duration&65280)>>8,B.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(B.width&65280)>>8,B.width&255,0,0,(B.height&65280)>>8,B.height&255,0,0]);return a(x.tkhd,Q)},D=function(B){var Q,tt,W,rt,ot,nt,ut;return Q=a(x.tfhd,new Uint8Array([0,0,0,58,(B.id&4278190080)>>24,(B.id&16711680)>>16,(B.id&65280)>>8,B.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),nt=Math.floor(B.baseMediaDecodeTime/(n+1)),ut=Math.floor(B.baseMediaDecodeTime%(n+1)),tt=a(x.tfdt,new Uint8Array([1,0,0,0,nt>>>24&255,nt>>>16&255,nt>>>8&255,nt&255,ut>>>24&255,ut>>>16&255,ut>>>8&255,ut&255])),ot=32+20+8+16+8+8,B.type==="audio"?(W=C(B,ot),a(x.traf,Q,tt,W)):(rt=A(B),W=C(B,rt.length+ot),a(x.traf,Q,tt,W,rt))},f=function(B){return B.duration=B.duration||Y,a(x.trak,y(B),g(B))},N=function(B){var Q=new Uint8Array([0,0,0,0,(B.id&4278190080)>>24,(B.id&16711680)>>16,(B.id&65280)>>8,B.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return B.type!=="video"&&(Q[Q.length-1]=0),a(x.trex,Q)},function(){var B,Q,tt;tt=function(W,rt){var ot=0,nt=0,ut=0,ft=0;return W.length&&(W[0].duration!==void 0&&(ot=1),W[0].size!==void 0&&(nt=2),W[0].flags!==void 0&&(ut=4),W[0].compositionTimeOffset!==void 0&&(ft=8)),[0,0,ot|nt|ut|ft,1,(W.length&4278190080)>>>24,(W.length&16711680)>>>16,(W.length&65280)>>>8,W.length&255,(rt&4278190080)>>>24,(rt&16711680)>>>16,(rt&65280)>>>8,rt&255]},Q=function(W,rt){var ot,nt,ut,ft,E,G;for(ft=W.samples||[],rt+=8+12+16*ft.length,ut=tt(ft,rt),nt=new Uint8Array(ut.length+ft.length*16),nt.set(ut),ot=ut.length,G=0;G<ft.length;G++)E=ft[G],nt[ot++]=(E.duration&4278190080)>>>24,nt[ot++]=(E.duration&16711680)>>>16,nt[ot++]=(E.duration&65280)>>>8,nt[ot++]=E.duration&255,nt[ot++]=(E.size&4278190080)>>>24,nt[ot++]=(E.size&16711680)>>>16,nt[ot++]=(E.size&65280)>>>8,nt[ot++]=E.size&255,nt[ot++]=E.flags.isLeading<<2|E.flags.dependsOn,nt[ot++]=E.flags.isDependedOn<<6|E.flags.hasRedundancy<<4|E.flags.paddingValue<<1|E.flags.isNonSyncSample,nt[ot++]=E.flags.degradationPriority&61440,nt[ot++]=E.flags.degradationPriority&15,nt[ot++]=(E.compositionTimeOffset&4278190080)>>>24,nt[ot++]=(E.compositionTimeOffset&16711680)>>>16,nt[ot++]=(E.compositionTimeOffset&65280)>>>8,nt[ot++]=E.compositionTimeOffset&255;return a(x.trun,nt)},B=function(W,rt){var ot,nt,ut,ft,E,G;for(ft=W.samples||[],rt+=8+12+8*ft.length,ut=tt(ft,rt),ot=new Uint8Array(ut.length+ft.length*8),ot.set(ut),nt=ut.length,G=0;G<ft.length;G++)E=ft[G],ot[nt++]=(E.duration&4278190080)>>>24,ot[nt++]=(E.duration&16711680)>>>16,ot[nt++]=(E.duration&65280)>>>8,ot[nt++]=E.duration&255,ot[nt++]=(E.size&4278190080)>>>24,ot[nt++]=(E.size&16711680)>>>16,ot[nt++]=(E.size&65280)>>>8,ot[nt++]=E.size&255;return a(x.trun,ot)},C=function(W,rt){return W.type==="audio"?B(W,rt):Q(W,rt)}}(),e.exports={ftyp:s,mdat:u,moof:m,moov:d,setDuration:function(B){B&&(Y=B*9e4)},initSegment:function(B){var Q=s(),tt=d(B),W;return W=new Uint8Array(Q.byteLength+tt.byteLength),W.set(Q),W.set(tt,Q.byteLength),W}}},{}],19:[function(t,e,r){var n=function(a){var i="";return i+=String.fromCharCode(a[0]),i+=String.fromCharCode(a[1]),i+=String.fromCharCode(a[2]),i+=String.fromCharCode(a[3]),i};e.exports=n},{}],20:[function(t,e,r){var n=t(28).toUnsigned,a=t(28).toHexString,i=t(15),o=t(19),s=t(26),u=t(27),l=t(25),p,m,d,h,c,f;p=function(y){var g={},v=i(y,["moov","trak"]);return v.reduce(function(w,A){var _,T,D,N,C;return _=i(A,["tkhd"])[0],!_||(T=_[0],D=T===0?12:20,N=n(_[D]<<24|_[D+1]<<16|_[D+2]<<8|_[D+3]),C=i(A,["mdia","mdhd"])[0],!C)?null:(T=C[0],D=T===0?12:20,w[N]=n(C[D]<<24|C[D+1]<<16|C[D+2]<<8|C[D+3]),w)},g)},m=function(y,g){var v,w,A;return v=i(g,["moof","traf"]),w=[].concat.apply([],v.map(function(_){return i(_,["tfhd"]).map(function(T){var D,N,C;return D=n(T[4]<<24|T[5]<<16|T[6]<<8|T[7]),N=y[D]||9e4,C=i(_,["tfdt"]).map(function(x){var U,S;return U=x[0],S=n(x[4]<<24|x[5]<<16|x[6]<<8|x[7]),U===1&&(S*=Math.pow(2,32),S+=n(x[8]<<24|x[9]<<16|x[10]<<8|x[11])),S})[0],C=C||1/0,C/N})})),A=Math.min.apply(null,w),isFinite(A)?A:0},d=function(y,g){var v=i(g,["moof","traf"]),w=0,A=0,_;if(v&&v.length){var T=i(v[0],["tfhd"])[0],D=i(v[0],["trun"])[0],N=i(v[0],["tfdt"])[0];if(T){var C=s(T);_=C.trackId}if(N){var x=l(N);w=x.baseMediaDecodeTime}if(D){var U=u(D);U.samples&&U.samples.length&&(A=U.samples[0].compositionTimeOffset||0)}}var S=y[_]||9e4;return(w+A)/S},h=function(y){var g=i(y,["moov","trak"]),v=[];return g.forEach(function(w){var A=i(w,["mdia","hdlr"]),_=i(w,["tkhd"]);A.forEach(function(T,D){var N=o(T.subarray(8,12)),C=_[D],x,U,S;N==="vide"&&(x=new DataView(C.buffer,C.byteOffset,C.byteLength),U=x.getUint8(0),S=U===0?x.getUint32(12):x.getUint32(20),v.push(S))})}),v},f=function(y){var g=y[0],v=g===0?12:20;return n(y[v]<<24|y[v+1]<<16|y[v+2]<<8|y[v+3])},c=function(y){var g=i(y,["moov","trak"]),v=[];return g.forEach(function(w){var A={},_=i(w,["tkhd"])[0],T,D;_&&(T=new DataView(_.buffer,_.byteOffset,_.byteLength),D=T.getUint8(0),A.id=D===0?T.getUint32(12):T.getUint32(20));var N=i(w,["mdia","hdlr"])[0];if(N){var C=o(N.subarray(8,12));C==="vide"?A.type="video":C==="soun"?A.type="audio":A.type=C}var x=i(w,["mdia","minf","stbl","stsd"])[0];if(x){var U=x.subarray(8);A.codec=o(U.subarray(4,8));var S=i(U,[A.codec])[0],R,b;S&&(/^[a-z]vc[1-9]$/i.test(A.codec)?(R=S.subarray(78),b=o(R.subarray(4,8)),b==="avcC"&&R.length>11?(A.codec+=".",A.codec+=a(R[9]),A.codec+=a(R[10]),A.codec+=a(R[11])):A.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(A.codec)&&(R=S.subarray(28),b=o(R.subarray(4,8)),b==="esds"&&R.length>20&&R[19]!==0?(A.codec+="."+a(R[19]),A.codec+="."+a(R[20]>>>2&63).replace(/^0/,"")):A.codec="mp4a.40.2"))}var F=i(w,["mdia","mdhd"])[0];F&&(A.timescale=f(F)),v.push(A)}),v},e.exports={findBox:i,parseType:o,timescale:p,startTime:m,compositionStartTime:d,videoTrackIds:h,tracks:c,getTimescaleFromMediaHeader:f}},{15:15,19:19,25:25,26:26,27:27,28:28}],21:[function(t,e,r){var n=t(29).ONE_SECOND_IN_TS,a=function(s,u){typeof u.pts=="number"&&(s.timelineStartInfo.pts===void 0&&(s.timelineStartInfo.pts=u.pts),s.minSegmentPts===void 0?s.minSegmentPts=u.pts:s.minSegmentPts=Math.min(s.minSegmentPts,u.pts),s.maxSegmentPts===void 0?s.maxSegmentPts=u.pts:s.maxSegmentPts=Math.max(s.maxSegmentPts,u.pts)),typeof u.dts=="number"&&(s.timelineStartInfo.dts===void 0&&(s.timelineStartInfo.dts=u.dts),s.minSegmentDts===void 0?s.minSegmentDts=u.dts:s.minSegmentDts=Math.min(s.minSegmentDts,u.dts),s.maxSegmentDts===void 0?s.maxSegmentDts=u.dts:s.maxSegmentDts=Math.max(s.maxSegmentDts,u.dts))},i=function(s){delete s.minSegmentDts,delete s.maxSegmentDts,delete s.minSegmentPts,delete s.maxSegmentPts},o=function(s,u){var l,p,m=s.minSegmentDts;return u||(m-=s.timelineStartInfo.dts),l=s.timelineStartInfo.baseMediaDecodeTime,l+=m,l=Math.max(0,l),s.type==="audio"&&(p=s.samplerate/n,l*=p,l=Math.floor(l)),l};e.exports={clearDtsInfo:i,calculateTrackBaseMediaDecodeTime:o,collectDtsInfo:a}},{29:29}],22:[function(t,e,r){var n=t(31),a=t(18),i=t(16),o=t(13),s=t(21),u=t(9),l=t(29),p=t(3),m=t(4).H264Stream,d=t(1),h=t(2).isLikelyAacData,c=t(29).ONE_SECOND_IN_TS,f=t(5),y=t(6),g,v,w,A,_=function(D,N){var C;if(D.length!==N.length)return!1;for(C=0;C<D.length;C++)if(D[C]!==N[C])return!1;return!0},T=function(D,N,C,x,U,S){var R=C-N,b=x-N,F=U-C;return{start:{dts:D,pts:D+R},end:{dts:D+b,pts:D+F},prependedContentDuration:S,baseMediaDecodeTime:D}};v=function(D,N){var C=[],x=0,U=0,S=0,R=1/0;N=N||{},v.prototype.init.call(this),this.push=function(b){s.collectDtsInfo(D,b),D&&f.forEach(function(F){D[F]=b[F]}),C.push(b)},this.setEarliestDts=function(b){U=b},this.setVideoBaseMediaDecodeTime=function(b){R=b},this.setAudioAppendStart=function(b){S=b},this.flush=function(){var b,F,$,P,K;if(C.length===0){this.trigger("done","AudioSegmentStream");return}b=o.trimAdtsFramesByEarliestDts(C,D,U),D.baseMediaDecodeTime=s.calculateTrackBaseMediaDecodeTime(D,N.keepOriginalTimestamps),o.prefixWithSilence(D,b,S,R),D.samples=o.generateSampleTable(b),$=a.mdat(o.concatenateFrameData(b)),C=[],F=a.moof(x,[D]),P=new Uint8Array(F.byteLength+$.byteLength),x++,P.set(F),P.set($,F.byteLength),s.clearDtsInfo(D),K=Math.ceil(c*1024/D.samplerate),b.length&&this.trigger("timingInfo",{start:b[0].pts,end:b[0].pts+b.length*K}),this.trigger("data",{track:D,boxes:P}),this.trigger("done","AudioSegmentStream")},this.reset=function(){s.clearDtsInfo(D),C=[],this.trigger("reset")}},v.prototype=new n,g=function(D,N){var C=0,x=[],U=[],S,R;N=N||{},g.prototype.init.call(this),delete D.minPTS,this.gopCache_=[],this.push=function(b){s.collectDtsInfo(D,b),b.nalUnitType==="seq_parameter_set_rbsp"&&!S&&(S=b.config,D.sps=[b.data],y.forEach(function(F){D[F]=S[F]},this)),b.nalUnitType==="pic_parameter_set_rbsp"&&!R&&(R=b.data,D.pps=[b.data]),x.push(b)},this.flush=function(){for(var b,F,$,P,K,j,et=0,M,k;x.length&&x[0].nalUnitType!=="access_unit_delimiter_rbsp";)x.shift();if(x.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(b=i.groupNalsIntoFrames(x),$=i.groupFramesIntoGops(b),$[0][0].keyFrame||(F=this.getGopForFusion_(x[0],D),F?(et=F.duration,$.unshift(F),$.byteLength+=F.byteLength,$.nalCount+=F.nalCount,$.pts=F.pts,$.dts=F.dts,$.duration+=F.duration):$=i.extendFirstKeyFrame($)),U.length){var at;if(N.alignGopsAtEnd?at=this.alignGopsAtEnd_($):at=this.alignGopsAtStart_($),!at){this.gopCache_.unshift({gop:$.pop(),pps:D.pps,sps:D.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}s.clearDtsInfo(D),$=at}s.collectDtsInfo(D,$),D.samples=i.generateSampleTable($),K=a.mdat(i.concatenateNalData($)),D.baseMediaDecodeTime=s.calculateTrackBaseMediaDecodeTime(D,N.keepOriginalTimestamps),this.trigger("processedGopsInfo",$.map(function(Y){return{pts:Y.pts,dts:Y.dts,byteLength:Y.byteLength}})),M=$[0],k=$[$.length-1],this.trigger("segmentTimingInfo",T(D.baseMediaDecodeTime,M.dts,M.pts,k.dts+k.duration,k.pts+k.duration,et)),this.trigger("timingInfo",{start:$[0].pts,end:$[$.length-1].pts+$[$.length-1].duration}),this.gopCache_.unshift({gop:$.pop(),pps:D.pps,sps:D.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.trigger("baseMediaDecodeTime",D.baseMediaDecodeTime),this.trigger("timelineStartInfo",D.timelineStartInfo),P=a.moof(C,[D]),j=new Uint8Array(P.byteLength+K.byteLength),C++,j.set(P),j.set(K,P.byteLength),this.trigger("data",{track:D,boxes:j}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),x=[],this.gopCache_.length=0,U.length=0,this.trigger("reset")},this.resetStream_=function(){s.clearDtsInfo(D),S=void 0,R=void 0},this.getGopForFusion_=function(b){var F=45e3,$=1e4,P=1/0,K,j,et,M,k;for(k=0;k<this.gopCache_.length;k++)M=this.gopCache_[k],et=M.gop,!(!(D.pps&&_(D.pps[0],M.pps[0]))||!(D.sps&&_(D.sps[0],M.sps[0])))&&(et.dts<D.timelineStartInfo.dts||(K=b.dts-et.dts-et.duration,K>=-$&&K<=F&&(!j||P>K)&&(j=M,P=K)));return j?j.gop:null},this.alignGopsAtStart_=function(b){var F,$,P,K,j,et,M,k;for(j=b.byteLength,et=b.nalCount,M=b.duration,F=$=0;F<U.length&&$<b.length&&(P=U[F],K=b[$],P.pts!==K.pts);){if(K.pts>P.pts){F++;continue}$++,j-=K.byteLength,et-=K.nalCount,M-=K.duration}return $===0?b:$===b.length?null:(k=b.slice($),k.byteLength=j,k.duration=M,k.nalCount=et,k.pts=k[0].pts,k.dts=k[0].dts,k)},this.alignGopsAtEnd_=function(b){var F,$,P,K,j,et;for(F=U.length-1,$=b.length-1,j=null,et=!1;F>=0&&$>=0;){if(P=U[F],K=b[$],P.pts===K.pts){et=!0;break}if(P.pts>K.pts){F--;continue}F===U.length-1&&(j=$),$--}if(!et&&j===null)return null;var M;if(et?M=$:M=j,M===0)return b;var k=b.slice(M),at=k.reduce(function(Y,B){return Y.byteLength+=B.byteLength,Y.duration+=B.duration,Y.nalCount+=B.nalCount,Y},{byteLength:0,duration:0,nalCount:0});return k.byteLength=at.byteLength,k.duration=at.duration,k.nalCount=at.nalCount,k.pts=k[0].pts,k.dts=k[0].dts,k},this.alignGopsWith=function(b){U=b}},g.prototype=new n,A=function(D,N){this.numberOfTracks=0,this.metadataStream=N,D=D||{},typeof D.remux<"u"?this.remuxTracks=!!D.remux:this.remuxTracks=!0,typeof D.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=D.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,A.prototype.init.call(this),this.push=function(C){if(C.text)return this.pendingCaptions.push(C);if(C.frames)return this.pendingMetadata.push(C);this.pendingTracks.push(C.track),this.pendingBytes+=C.boxes.byteLength,C.track.type==="video"&&(this.videoTrack=C.track,this.pendingBoxes.push(C.boxes)),C.track.type==="audio"&&(this.audioTrack=C.track,this.pendingBoxes.unshift(C.boxes))}},A.prototype=new n,A.prototype.flush=function(D){var N=0,C={captions:[],captionStreams:{},metadata:[],info:{}},x,U,S,R=0,b;if(this.pendingTracks.length<this.numberOfTracks){if(D!=="VideoSegmentStream"&&D!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(R=this.videoTrack.timelineStartInfo.pts,y.forEach(function(F){C.info[F]=this.videoTrack[F]},this)):this.audioTrack&&(R=this.audioTrack.timelineStartInfo.pts,f.forEach(function(F){C.info[F]=this.audioTrack[F]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?C.type=this.pendingTracks[0].type:C.type="combined",this.emittedTracks+=this.pendingTracks.length,S=a.initSegment(this.pendingTracks),C.initSegment=new Uint8Array(S.byteLength),C.initSegment.set(S),C.data=new Uint8Array(this.pendingBytes),b=0;b<this.pendingBoxes.length;b++)C.data.set(this.pendingBoxes[b],N),N+=this.pendingBoxes[b].byteLength;for(b=0;b<this.pendingCaptions.length;b++)x=this.pendingCaptions[b],x.startTime=l.metadataTsToSeconds(x.startPts,R,this.keepOriginalTimestamps),x.endTime=l.metadataTsToSeconds(x.endPts,R,this.keepOriginalTimestamps),C.captionStreams[x.stream]=!0,C.captions.push(x);for(b=0;b<this.pendingMetadata.length;b++)U=this.pendingMetadata[b],U.cueTime=l.metadataTsToSeconds(U.pts,R,this.keepOriginalTimestamps),C.metadata.push(U);for(C.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",C),b=0;b<C.captions.length;b++)x=C.captions[b],this.trigger("caption",x);for(b=0;b<C.metadata.length;b++)U=C.metadata[b],this.trigger("id3Frame",U)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},A.prototype.setRemux=function(D){this.remuxTracks=D},w=function(D){var N=this,C=!0,x,U;w.prototype.init.call(this),D=D||{},this.baseMediaDecodeTime=D.baseMediaDecodeTime||0,this.transmuxPipeline_={},a.setDuration(D.duration),this.setupAacPipeline=function(){var S={};this.transmuxPipeline_=S,S.type="aac",S.metadataStream=new u.MetadataStream,S.aacStream=new d,S.audioTimestampRolloverStream=new u.TimestampRolloverStream("audio"),S.timedMetadataTimestampRolloverStream=new u.TimestampRolloverStream("timed-metadata"),S.adtsStream=new p,S.coalesceStream=new A(D,S.metadataStream),S.headOfPipeline=S.aacStream,S.aacStream.pipe(S.audioTimestampRolloverStream).pipe(S.adtsStream),S.aacStream.pipe(S.timedMetadataTimestampRolloverStream).pipe(S.metadataStream).pipe(S.coalesceStream),S.metadataStream.on("timestamp",function(R){S.aacStream.setTimestamp(R.timeStamp)}),S.aacStream.on("data",function(R){R.type!=="timed-metadata"&&R.type!=="audio"||S.audioSegmentStream||(U=U||{timelineStartInfo:{baseMediaDecodeTime:N.baseMediaDecodeTime},codec:"adts",type:"audio"},S.coalesceStream.numberOfTracks++,S.audioSegmentStream=new v(U,D),S.audioSegmentStream.on("timingInfo",N.trigger.bind(N,"audioTimingInfo")),S.adtsStream.pipe(S.audioSegmentStream).pipe(S.coalesceStream),N.trigger("trackinfo",{hasAudio:!!U,hasVideo:!!x}))}),S.coalesceStream.on("data",this.trigger.bind(this,"data")),S.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var S={};this.transmuxPipeline_=S,S.type="ts",S.metadataStream=new u.MetadataStream,S.packetStream=new u.TransportPacketStream,S.parseStream=new u.TransportParseStream,S.elementaryStream=new u.ElementaryStream,S.timestampRolloverStream=new u.TimestampRolloverStream,S.adtsStream=new p,S.h264Stream=new m,S.captionStream=new u.CaptionStream,S.coalesceStream=new A(D,S.metadataStream),S.headOfPipeline=S.packetStream,S.packetStream.pipe(S.parseStream).pipe(S.elementaryStream).pipe(S.timestampRolloverStream),S.timestampRolloverStream.pipe(S.h264Stream),S.timestampRolloverStream.pipe(S.adtsStream),S.timestampRolloverStream.pipe(S.metadataStream).pipe(S.coalesceStream),S.h264Stream.pipe(S.captionStream).pipe(S.coalesceStream),S.elementaryStream.on("data",function(R){var b;if(R.type==="metadata"){for(b=R.tracks.length;b--;)!x&&R.tracks[b].type==="video"?(x=R.tracks[b],x.timelineStartInfo.baseMediaDecodeTime=N.baseMediaDecodeTime):!U&&R.tracks[b].type==="audio"&&(U=R.tracks[b],U.timelineStartInfo.baseMediaDecodeTime=N.baseMediaDecodeTime);x&&!S.videoSegmentStream&&(S.coalesceStream.numberOfTracks++,S.videoSegmentStream=new g(x,D),S.videoSegmentStream.on("timelineStartInfo",function(F){U&&!D.keepOriginalTimestamps&&(U.timelineStartInfo=F,S.audioSegmentStream.setEarliestDts(F.dts-N.baseMediaDecodeTime))}),S.videoSegmentStream.on("processedGopsInfo",N.trigger.bind(N,"gopInfo")),S.videoSegmentStream.on("segmentTimingInfo",N.trigger.bind(N,"videoSegmentTimingInfo")),S.videoSegmentStream.on("baseMediaDecodeTime",function(F){U&&S.audioSegmentStream.setVideoBaseMediaDecodeTime(F)}),S.videoSegmentStream.on("timingInfo",N.trigger.bind(N,"videoTimingInfo")),S.h264Stream.pipe(S.videoSegmentStream).pipe(S.coalesceStream)),U&&!S.audioSegmentStream&&(S.coalesceStream.numberOfTracks++,S.audioSegmentStream=new v(U,D),S.audioSegmentStream.on("timingInfo",N.trigger.bind(N,"audioTimingInfo")),S.adtsStream.pipe(S.audioSegmentStream).pipe(S.coalesceStream)),N.trigger("trackinfo",{hasAudio:!!U,hasVideo:!!x})}}),S.coalesceStream.on("data",this.trigger.bind(this,"data")),S.coalesceStream.on("id3Frame",function(R){R.dispatchType=S.metadataStream.dispatchType,N.trigger("id3Frame",R)}),S.coalesceStream.on("caption",this.trigger.bind(this,"caption")),S.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(S){var R=this.transmuxPipeline_;D.keepOriginalTimestamps||(this.baseMediaDecodeTime=S),U&&(U.timelineStartInfo.dts=void 0,U.timelineStartInfo.pts=void 0,s.clearDtsInfo(U),R.audioTimestampRolloverStream&&R.audioTimestampRolloverStream.discontinuity()),x&&(R.videoSegmentStream&&(R.videoSegmentStream.gopCache_=[]),x.timelineStartInfo.dts=void 0,x.timelineStartInfo.pts=void 0,s.clearDtsInfo(x),R.captionStream.reset()),R.timestampRolloverStream&&R.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(S){U&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(S)},this.setRemux=function(S){var R=this.transmuxPipeline_;D.remux=S,R&&R.coalesceStream&&R.coalesceStream.setRemux(S)},this.alignGopsWith=function(S){x&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(S)},this.push=function(S){if(C){var R=h(S);R&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!R&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),C=!1}this.transmuxPipeline_.headOfPipeline.push(S)},this.flush=function(){C=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},w.prototype=new n,e.exports={Transmuxer:w,VideoSegmentStream:g,AudioSegmentStream:v,AUDIO_PROPERTIES:f,VIDEO_PROPERTIES:y,generateVideoSegmentTimingInfo:T}},{1:1,13:13,16:16,18:18,2:2,21:21,29:29,3:3,31:31,4:4,5:5,6:6,9:9}],23:[function(t,e,r){var n=4,a=128,i=function(l){for(var p=0,m={payloadType:-1,payloadSize:0},d=0,h=0;p<l.byteLength&&l[p]!==a;){for(;l[p]===255;)d+=255,p++;for(d+=l[p++];l[p]===255;)h+=255,p++;if(h+=l[p++],!m.payload&&d===n){var c=String.fromCharCode(l[p+3],l[p+4],l[p+5],l[p+6]);if(c==="GA94"){m.payloadType=d,m.payloadSize=h,m.payload=l.subarray(p,p+h);break}else m.payload=void 0}p+=h,d=0,h=0}return m},o=function(l){return l.payload[0]!==181||(l.payload[1]<<8|l.payload[2])!==49||String.fromCharCode(l.payload[3],l.payload[4],l.payload[5],l.payload[6])!=="GA94"||l.payload[7]!==3?null:l.payload.subarray(8,l.payload.length-1)},s=function(l,p){var m=[],d,h,c,f;if(!(p[0]&64))return m;for(h=p[0]&31,d=0;d<h;d++)c=d*3,f={type:p[c+2]&3,pts:l},p[c+2]&4&&(f.ccData=p[c+3]<<8|p[c+4],m.push(f));return m},u=function(l){for(var p=l.byteLength,m=[],d=1,h,c;d<p-2;)l[d]===0&&l[d+1]===0&&l[d+2]===3?(m.push(d+2),d+=2):d++;if(m.length===0)return l;h=p-m.length,c=new Uint8Array(h);var f=0;for(d=0;d<h;f++,d++)f===m[0]&&(f++,m.shift()),c[d]=l[f];return c};e.exports={parseSei:i,parseUserData:o,parseCaptionPackets:s,discardEmulationPreventionBytes:u,USER_DATA_REGISTERED_ITU_T_T35:n}},{}],24:[function(t,e,r){var n=function(a){return{isLeading:(a[0]&12)>>>2,dependsOn:a[0]&3,isDependedOn:(a[1]&192)>>>6,hasRedundancy:(a[1]&48)>>>4,paddingValue:(a[1]&14)>>>1,isNonSyncSample:a[1]&1,degradationPriority:a[2]<<8|a[3]}};e.exports=n},{}],25:[function(t,e,r){var n=t(28).toUnsigned,a=function(i){var o={version:i[0],flags:new Uint8Array(i.subarray(1,4)),baseMediaDecodeTime:n(i[4]<<24|i[5]<<16|i[6]<<8|i[7])};return o.version===1&&(o.baseMediaDecodeTime*=Math.pow(2,32),o.baseMediaDecodeTime+=n(i[8]<<24|i[9]<<16|i[10]<<8|i[11])),o};e.exports=a},{28:28}],26:[function(t,e,r){var n=function(a){var i=new DataView(a.buffer,a.byteOffset,a.byteLength),o={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:i.getUint32(4)},s=o.flags[2]&1,u=o.flags[2]&2,l=o.flags[2]&8,p=o.flags[2]&16,m=o.flags[2]&32,d=o.flags[0]&65536,h=o.flags[0]&131072,c;return c=8,s&&(c+=4,o.baseDataOffset=i.getUint32(12),c+=4),u&&(o.sampleDescriptionIndex=i.getUint32(c),c+=4),l&&(o.defaultSampleDuration=i.getUint32(c),c+=4),p&&(o.defaultSampleSize=i.getUint32(c),c+=4),m&&(o.defaultSampleFlags=i.getUint32(c)),d&&(o.durationIsEmpty=!0),!s&&h&&(o.baseDataOffsetIsMoof=!0),o};e.exports=n},{}],27:[function(t,e,r){var n=t(24),a=function(i){var o={version:i[0],flags:new Uint8Array(i.subarray(1,4)),samples:[]},s=new DataView(i.buffer,i.byteOffset,i.byteLength),u=o.flags[2]&1,l=o.flags[2]&4,p=o.flags[1]&1,m=o.flags[1]&2,d=o.flags[1]&4,h=o.flags[1]&8,c=s.getUint32(4),f=8,y;for(u&&(o.dataOffset=s.getInt32(f),f+=4),l&&c&&(y={flags:n(i.subarray(f,f+4))},f+=4,p&&(y.duration=s.getUint32(f),f+=4),m&&(y.size=s.getUint32(f),f+=4),h&&(o.version===1?y.compositionTimeOffset=s.getInt32(f):y.compositionTimeOffset=s.getUint32(f),f+=4),o.samples.push(y),c--);c--;)y={},p&&(y.duration=s.getUint32(f),f+=4),m&&(y.size=s.getUint32(f),f+=4),d&&(y.flags=n(i.subarray(f,f+4)),f+=4),h&&(o.version===1?y.compositionTimeOffset=s.getInt32(f):y.compositionTimeOffset=s.getUint32(f),f+=4),o.samples.push(y);return o};e.exports=a},{24:24}],28:[function(t,e,r){var n=function(i){return i>>>0},a=function(i){return("00"+i.toString(16)).slice(-2)};e.exports={toUnsigned:n,toHexString:a}},{}],29:[function(t,e,r){var n=9e4,a,i,o,s,u,l,p;a=function(m){return m*n},i=function(m,d){return m*d},o=function(m){return m/n},s=function(m,d){return m/d},u=function(m,d){return a(s(m,d))},l=function(m,d){return i(o(m),d)},p=function(m,d,h){return o(h?m:m-d)},e.exports={ONE_SECOND_IN_TS:n,secondsToVideoTs:a,secondsToAudioTs:i,videoTsToSeconds:o,audioTsToSeconds:s,audioTsToVideoTs:u,videoTsToAudioTs:l,metadataTsToSeconds:p}},{}],30:[function(t,e,r){var n;n=function(a){var i=a.byteLength,o=0,s=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+s},this.loadWord=function(){var u=a.byteLength-i,l=new Uint8Array(4),p=Math.min(4,i);if(p===0)throw new Error("no bytes available");l.set(a.subarray(u,u+p)),o=new DataView(l.buffer).getUint32(0),s=p*8,i-=p},this.skipBits=function(u){var l;s>u?(o<<=u,s-=u):(u-=s,l=Math.floor(u/8),u-=l*8,i-=l,this.loadWord(),o<<=u,s-=u)},this.readBits=function(u){var l=Math.min(s,u),p=o>>>32-l;return s-=l,s>0?o<<=l:i>0&&this.loadWord(),l=u-l,l>0?p<<l|this.readBits(l):p},this.skipLeadingZeros=function(){var u;for(u=0;u<s;++u)if(o&2147483648>>>u)return o<<=u,s-=u,u;return this.loadWord(),u+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var u=this.skipLeadingZeros();return this.readBits(u+1)-1},this.readExpGolomb=function(){var u=this.readUnsignedExpGolomb();return 1&u?1+u>>>1:-1*(u>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=n},{}],31:[function(t,e,r){var n=function(){this.init=function(){var a={};this.on=function(i,o){a[i]||(a[i]=[]),a[i]=a[i].concat(o)},this.off=function(i,o){var s;return a[i]?(s=a[i].indexOf(o),a[i]=a[i].slice(),a[i].splice(s,1),s>-1):!1},this.trigger=function(i){var o,s,u,l;if(o=a[i],!!o)if(arguments.length===2)for(u=o.length,s=0;s<u;++s)o[s].call(this,arguments[1]);else{for(l=[],s=arguments.length,s=1;s<arguments.length;++s)l.push(arguments[s]);for(u=o.length,s=0;s<u;++s)o[s].apply(this,l)}},this.dispose=function(){a={}}}};n.prototype.pipe=function(a){return this.on("data",function(i){a.push(i)}),this.on("done",function(i){a.flush(i)}),this.on("partialdone",function(i){a.partialFlush(i)}),this.on("endedtimeline",function(i){a.endTimeline(i)}),this.on("reset",function(i){a.reset(i)}),a},n.prototype.push=function(a){this.trigger("data",a)},n.prototype.flush=function(a){this.trigger("done",a)},n.prototype.partialFlush=function(a){this.trigger("partialdone",a)},n.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},n.prototype.reset=function(a){this.trigger("reset",a)},e.exports=n},{}]},{},[17])(17)});const ys=ii(),vs=t=>{ys.emit("updateDlProcess",t)},bs=t=>ys.emit("showDlProcess",t),ld=JSON.parse(localStorage.getItem("session")||"{}"),Es=Oe.create({timeout:1e3*60*30,responseType:"blob",headers:{Authorization:ld.token},onDownloadProgress(t){const{loaded:e,total:r}=t;if(e&&r){let n=Math.round(e*100/r);vs(n)}}}),qe=Oe.create({timeout:1e3*60*30});nr(qe,{retries:3,retryCondition:t=>t.code==="ECONNABORTED"});nr(Es);class ws{constructor(e){Ht(this,"url","");Ht(this,"path","");Ht(this,"search","");Ht(this,"currentFileSize",0);Ht(this,"totalFileSize",0);Ht(this,"duration",0);this.url=e,this.path=e.substring(0,e.lastIndexOf("/")+1),this.search=new URL(e).search}async getFileSize(e){const r=await qe.head(e);return parseInt(r.headers["content-length"])}}class cd extends ws{constructor(e){super(e)}async download(){bs("Downloading HLS video");const e=await this.getManifest(this.url);let r=e.segments.map(a=>({...a,uri:this.path+a.uri+this.search}));if(e.segments.length===0&&e.playlists.length>0){const a=await this.getBestPlaylist(e),i=this.path+a.uri+this.search;r=(await this.getManifest(i)).segments.map(s=>({...s,uri:this.path+s.uri+this.search}))}await Promise.all(r.map(async a=>{const i=await qe.head(a.uri);this.duration+=a.duration,this.totalFileSize+=parseInt(i.headers["content-length"])}));const n=new Array(r.length);return await No.PromisePool.withConcurrency(5).for(r).process(async(a,i)=>{const o=await qe.get(a.uri,{responseType:"arraybuffer",onDownloadProgress:u=>{this.currentFileSize+=u.bytes;const l=parseFloat((this.currentFileSize*100/this.totalFileSize).toFixed(2));vs(l)}}),s=new window.muxjs.Transmuxer({keepOriginalTimestamps:!0,duration:this.duration});s.on("data",u=>{if(i==0){let l=new Uint8Array(u.initSegment.byteLength+u.data.byteLength);l.set(u.initSegment,0),l.set(u.data,u.initSegment.byteLength),n[i]=l.buffer}else n[i]=new Uint8Array(u.data)}),s.push(new Uint8Array(o.data)),s.flush()}),new Blob(n,{type:"video/mp4"})}async getManifest(e){return qe.get(e).then(r=>{const n=new Lc;return n.push(r.data),n.end(),n.manifest})}async getBestPlaylist(e){const r=e.playlists;let n=r[0];for(let a=1;a<r.length;a++){const i=r[a];i.attributes.RESOLUTION.width>n.attributes.RESOLUTION.width&&(n=i)}return n}}class fd extends ws{constructor(e){super(e)}async download(){bs("Downloading HLS video");const e=await this.getDownloadUrl();return(await Es.get(e)).data}async getDownloadUrl(){const e=await this.getManifest(this.url);return(await this.getBestPlaylist(e)).resolvedUri+this.search}async getManifest(e){return qe.get(e).then(r=>ud(r.data,{manifestUri:e}))}async getBestPlaylist(e){const r=e.playlists;let n=r[0];for(let a=1;a<r.length;a++){const i=r[a];i.attributes.RESOLUTION.width>n.attributes.RESOLUTION.width&&(n=i)}return n}}const Dn=ii(),ie=t=>Dn.emit("updateStatus",t),dd=t=>{Dn.emit("updateDlProcess",t)},pd=t=>Dn.emit("showDlProcess",t),hd=()=>Dn.emit("hideDlProcess"),md=JSON.parse(localStorage.getItem("session")||"{}"),gd=new AbortController,As=Oe.create({timeout:1e3*60*30,responseType:"blob",headers:{Authorization:md.token},onDownloadProgress(t){const{loaded:e,total:r}=t;if(e&&r){let n=Math.round(e*100/r);dd(n)}},signal:gd.signal}),yd=Oe.create({timeout:1e3*60*30});nr(yd,{retries:3,retryCondition:t=>t.code==="ECONNABORTED"});nr(As);const hn=(t,e)=>chrome.downloads.download({url:t,filename:e});class vd{constructor(){Ht(this,"jszip");Ht(this,"totalFileSize");Ht(this,"zipCount");this.jszip=new Cn,this.totalFileSize=0,this.zipCount=0}async addFile(e,r){ie(`Downloading ${r}`);const{headers:n}=await Oe.head(e),a=n["content-length"];if(parseInt(a)>1024*1024*1024)return hn(e,r);if(this.totalFileSize+parseInt(a)>1024*1024*1024*2){ie("Too large data, download in packages."),this.zipCount++;const o=await this.jszip.generateAsync({type:"blob"});On.saveAs(o,`FanslyDownloader-${this.zipCount}.zip`),this.jszip=new Cn,this.totalFileSize=0;return}pd(r);const i=await As.get(e);this.jszip.file(r,i.data),this.totalFileSize+=parseInt(a)}async addBlob(e,r){if(e.size>1024*1024*1024){const n=URL.createObjectURL(e);return hn(n,r)}if(this.totalFileSize+e.size>1024*1024*1024*2){ie("Too large data, download in packages."),this.zipCount++;const n=await this.jszip.generateAsync({type:"blob"});On.saveAs(n,`FanslyDownloader-${this.zipCount}.zip`),this.jszip=new Cn,this.totalFileSize=0;return}this.jszip.file(r,e),this.totalFileSize+=e.size}async download(){if(this.totalFileSize===0){ie("No files downloaded.");return}else{ie("Waitting for the generated .zip file...");const e=await this.jszip.generateAsync({type:"blob"});On.saveAs(e,this.zipCount===0?"FanslyDownloader.zip":`FanslyDownloader-${this.zipCount++}.zip`)}}}async function bd(t,e){if(t.length===0)return;let r=0;const n=t.length,a=new vd;for(const i of t){const{url:o,username:s,type:u,createdAt:l,width:p,height:m}=i,[d,h]=new URL(o).pathname.split("/").pop().split("."),c=`${s}/${u}/${Ed(l)}-${d}_${p}x${m}.${h}`;if(u=="HLS"){const{origin:f,pathname:y,search:g}=new URL(o);f+y.split("/").slice(0,-1).join("/")+"";const v=h=="mpd"?new fd(o):new cd(o),w=c.replace(`.${h}`,".mp4");ie(`Downloading ${w}`);const A=await v.download();if(e)await a.addBlob(A,w);else{const _=URL.createObjectURL(A);hn(_,w)}r++,ie(`Downloaded ${r} of ${n} files`)}else r++,ie(`Downloading ${c}`),e?await a.addFile(o,c):hn(o,c),ie(`Downloaded ${r} of ${n} files`)}hd(),e&&await a.download()}function Ed(t){t.toString().length===10&&(t*=1e3);const e=new Date(t),r=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return`${r}-${n}-${a}`}var wd=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==a||o.enumerable!==!0)return!1}return!0},xa=typeof Symbol<"u"&&Symbol,Ad=wd,Sd=function(){return typeof xa!="function"||typeof Symbol!="function"||typeof xa("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ad()},Ia={foo:{}},_d=Object,Dd=function(){return{__proto__:Ia}.foo===Ia.foo&&!({__proto__:null}instanceof _d)},Td="Function.prototype.bind called on incompatible ",Cd=Object.prototype.toString,Od=Math.max,xd="[object Function]",Ra=function(e,r){for(var n=[],a=0;a<e.length;a+=1)n[a]=e[a];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},Id=function(e,r){for(var n=[],a=r||0,i=0;a<e.length;a+=1,i+=1)n[i]=e[a];return n},Rd=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Nd=function(e){var r=this;if(typeof r!="function"||Cd.apply(r)!==xd)throw new TypeError(Td+r);for(var n=Id(arguments,1),a,i=function(){if(this instanceof a){var p=r.apply(this,Ra(n,arguments));return Object(p)===p?p:this}return r.apply(e,Ra(n,arguments))},o=Od(0,r.length-n.length),s=[],u=0;u<o;u++)s[u]="$"+u;if(a=Function("binder","return function ("+Rd(s,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var l=function(){};l.prototype=r.prototype,a.prototype=new l,l.prototype=null}return a},Pd=Nd,Pi=Function.prototype.bind||Pd,Bd=Function.prototype.call,Fd=Object.prototype.hasOwnProperty,kd=Pi,Ld=kd.call(Bd,Fd),ct,tr=SyntaxError,Ss=Function,Ge=TypeError,Pn=function(t){try{return Ss('"use strict"; return ('+t+").constructor;")()}catch{}},Ae=Object.getOwnPropertyDescriptor;if(Ae)try{Ae({},"")}catch{Ae=null}var Bn=function(){throw new Ge},Ud=Ae?function(){try{return arguments.callee,Bn}catch{try{return Ae(arguments,"callee").get}catch{return Bn}}}():Bn,ke=Sd(),Md=Dd(),At=Object.getPrototypeOf||(Md?function(t){return t.__proto__}:null),Me={},zd=typeof Uint8Array>"u"||!At?ct:At(Uint8Array),Se={"%AggregateError%":typeof AggregateError>"u"?ct:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ct:ArrayBuffer,"%ArrayIteratorPrototype%":ke&&At?At([][Symbol.iterator]()):ct,"%AsyncFromSyncIteratorPrototype%":ct,"%AsyncFunction%":Me,"%AsyncGenerator%":Me,"%AsyncGeneratorFunction%":Me,"%AsyncIteratorPrototype%":Me,"%Atomics%":typeof Atomics>"u"?ct:Atomics,"%BigInt%":typeof BigInt>"u"?ct:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ct:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ct:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ct:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ct:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ct:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ct:FinalizationRegistry,"%Function%":Ss,"%GeneratorFunction%":Me,"%Int8Array%":typeof Int8Array>"u"?ct:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ct:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ct:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ke&&At?At(At([][Symbol.iterator]())):ct,"%JSON%":typeof JSON=="object"?JSON:ct,"%Map%":typeof Map>"u"?ct:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ke||!At?ct:At(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ct:Promise,"%Proxy%":typeof Proxy>"u"?ct:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ct:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ct:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ke||!At?ct:At(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ct:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ke&&At?At(""[Symbol.iterator]()):ct,"%Symbol%":ke?Symbol:ct,"%SyntaxError%":tr,"%ThrowTypeError%":Ud,"%TypedArray%":zd,"%TypeError%":Ge,"%Uint8Array%":typeof Uint8Array>"u"?ct:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ct:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ct:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ct:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ct:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ct:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ct:WeakSet};if(At)try{null.error}catch(t){var $d=At(At(t));Se["%Error.prototype%"]=$d}var qd=function t(e){var r;if(e==="%AsyncFunction%")r=Pn("async function () {}");else if(e==="%GeneratorFunction%")r=Pn("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Pn("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=t("%AsyncGenerator%");a&&At&&(r=At(a.prototype))}return Se[e]=r,r},Na={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Vr=Pi,mn=Ld,Gd=Vr.call(Function.call,Array.prototype.concat),jd=Vr.call(Function.apply,Array.prototype.splice),Pa=Vr.call(Function.call,String.prototype.replace),gn=Vr.call(Function.call,String.prototype.slice),Hd=Vr.call(Function.call,RegExp.prototype.exec),Vd=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Wd=/\\(\\)?/g,Xd=function(e){var r=gn(e,0,1),n=gn(e,-1);if(r==="%"&&n!=="%")throw new tr("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new tr("invalid intrinsic syntax, expected opening `%`");var a=[];return Pa(e,Vd,function(i,o,s,u){a[a.length]=s?Pa(u,Wd,"$1"):o||i}),a},Yd=function(e,r){var n=e,a;if(mn(Na,n)&&(a=Na[n],n="%"+a[0]+"%"),mn(Se,n)){var i=Se[n];if(i===Me&&(i=qd(n)),typeof i>"u"&&!r)throw new Ge("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:n,value:i}}throw new tr("intrinsic "+e+" does not exist!")},xe=function(e,r){if(typeof e!="string"||e.length===0)throw new Ge("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ge('"allowMissing" argument must be a boolean');if(Hd(/^%?[^%]*%?$/,e)===null)throw new tr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Xd(e),a=n.length>0?n[0]:"",i=Yd("%"+a+"%",r),o=i.name,s=i.value,u=!1,l=i.alias;l&&(a=l[0],jd(n,Gd([0,1],l)));for(var p=1,m=!0;p<n.length;p+=1){var d=n[p],h=gn(d,0,1),c=gn(d,-1);if((h==='"'||h==="'"||h==="`"||c==='"'||c==="'"||c==="`")&&h!==c)throw new tr("property names with quotes must have matching quotes");if((d==="constructor"||!m)&&(u=!0),a+="."+d,o="%"+a+"%",mn(Se,o))s=Se[o];else if(s!=null){if(!(d in s)){if(!r)throw new Ge("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ae&&p+1>=n.length){var f=Ae(s,d);m=!!f,m&&"get"in f&&!("originalValue"in f.get)?s=f.get:s=s[d]}else m=mn(s,d),s=s[d];m&&!u&&(Se[o]=s)}}return s},_s={exports:{}},Zd=xe,Zn=Zd("%Object.defineProperty%",!0),Kn=function(){if(Zn)try{return Zn({},"a",{value:1}),!0}catch{return!1}return!1};Kn.hasArrayLengthDefineBug=function(){if(!Kn())return null;try{return Zn([],"length",{value:1}).length!==1}catch{return!0}};var Ds=Kn,Kd=xe,an=Kd("%Object.getOwnPropertyDescriptor%",!0);if(an)try{an([],"length")}catch{an=null}var Ts=an,Jd=Ds(),Bi=xe,Er=Jd&&Bi("%Object.defineProperty%",!0);if(Er)try{Er({},"a",{value:1})}catch{Er=!1}var Qd=Bi("%SyntaxError%"),Le=Bi("%TypeError%"),Ba=Ts,tp=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Le("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Le("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Le("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Le("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Le("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Le("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,u=!!Ba&&Ba(e,r);if(Er)Er(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:a===null&&u?u.enumerable:!a,value:n,writable:i===null&&u?u.writable:!i});else if(s||!a&&!i&&!o)e[r]=n;else throw new Qd("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Cs=xe,Fa=tp,ep=Ds(),ka=Ts,La=Cs("%TypeError%"),rp=Cs("%Math.floor%"),np=function(e,r){if(typeof e!="function")throw new La("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||rp(r)!==r)throw new La("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],a=!0,i=!0;if("length"in e&&ka){var o=ka(e,"length");o&&!o.configurable&&(a=!1),o&&!o.writable&&(i=!1)}return(a||i||!n)&&(ep?Fa(e,"length",r,!0,!0):Fa(e,"length",r)),e};(function(t){var e=Pi,r=xe,n=np,a=r("%TypeError%"),i=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(o,i),u=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}t.exports=function(d){if(typeof d!="function")throw new a("a function is required");var h=s(e,o,arguments);return n(h,1+l(0,d.length-(arguments.length-1)),!0)};var p=function(){return s(e,i,arguments)};u?u(t.exports,"apply",{value:p}):t.exports.apply=p})(_s);var ip=_s.exports,Os=xe,xs=ip,ap=xs(Os("String.prototype.indexOf")),op=function(e,r){var n=Os(e,!!r);return typeof n=="function"&&ap(e,".prototype.")>-1?xs(n):n};const sp={},up=Object.freeze(Object.defineProperty({__proto__:null,default:sp},Symbol.toStringTag,{value:"Module"})),lp=bu(up);var Fi=typeof Map=="function"&&Map.prototype,Fn=Object.getOwnPropertyDescriptor&&Fi?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,yn=Fi&&Fn&&typeof Fn.get=="function"?Fn.get:null,Ua=Fi&&Map.prototype.forEach,ki=typeof Set=="function"&&Set.prototype,kn=Object.getOwnPropertyDescriptor&&ki?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,vn=ki&&kn&&typeof kn.get=="function"?kn.get:null,Ma=ki&&Set.prototype.forEach,cp=typeof WeakMap=="function"&&WeakMap.prototype,wr=cp?WeakMap.prototype.has:null,fp=typeof WeakSet=="function"&&WeakSet.prototype,Ar=fp?WeakSet.prototype.has:null,dp=typeof WeakRef=="function"&&WeakRef.prototype,za=dp?WeakRef.prototype.deref:null,pp=Boolean.prototype.valueOf,hp=Object.prototype.toString,mp=Function.prototype.toString,gp=String.prototype.match,Li=String.prototype.slice,me=String.prototype.replace,yp=String.prototype.toUpperCase,$a=String.prototype.toLowerCase,Is=RegExp.prototype.test,qa=Array.prototype.concat,Wt=Array.prototype.join,vp=Array.prototype.slice,Ga=Math.floor,Jn=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ln=Object.getOwnPropertySymbols,Qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,er=typeof Symbol=="function"&&typeof Symbol.iterator=="object",xt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===er||"symbol")?Symbol.toStringTag:null,Rs=Object.prototype.propertyIsEnumerable,ja=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Ha(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Is.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Ga(-t):Ga(t);if(n!==t){var a=String(n),i=Li.call(e,a.length+1);return me.call(a,r,"$&_")+"."+me.call(me.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return me.call(e,r,"$&_")}var ti=lp,Va=ti.custom,Wa=Ps(Va)?Va:null,bp=function t(e,r,n,a){var i=r||{};if(he(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(he(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=he(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(he(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(he(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Fs(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return s?Ha(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return s?Ha(e,l):l}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof e=="object")return ei(e)?"[Array]":"[Object]";var m=Lp(i,n);if(typeof a>"u")a=[];else if(Bs(a,e)>=0)return"[Circular]";function d(R,b,F){if(b&&(a=vp.call(a),a.push(b)),F){var $={depth:i.depth};return he(i,"quoteStyle")&&($.quoteStyle=i.quoteStyle),t(R,$,n+1,a)}return t(R,i,n+1,a)}if(typeof e=="function"&&!Xa(e)){var h=Op(e),c=tn(e,d);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(c.length>0?" { "+Wt.call(c,", ")+" }":"")}if(Ps(e)){var f=er?me.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Qn.call(e);return typeof e=="object"&&!er?hr(f):f}if(Bp(e)){for(var y="<"+$a.call(String(e.nodeName)),g=e.attributes||[],v=0;v<g.length;v++)y+=" "+g[v].name+"="+Ns(Ep(g[v].value),"double",i);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+$a.call(String(e.nodeName))+">",y}if(ei(e)){if(e.length===0)return"[]";var w=tn(e,d);return m&&!kp(w)?"["+ri(w,m)+"]":"[ "+Wt.call(w,", ")+" ]"}if(Ap(e)){var A=tn(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Rs.call(e,"cause")?"{ ["+String(e)+"] "+Wt.call(qa.call("[cause]: "+d(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Wt.call(A,", ")+" }"}if(typeof e=="object"&&o){if(Wa&&typeof e[Wa]=="function"&&ti)return ti(e,{depth:p-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(xp(e)){var _=[];return Ua&&Ua.call(e,function(R,b){_.push(d(b,e,!0)+" => "+d(R,e))}),Ya("Map",yn.call(e),_,m)}if(Np(e)){var T=[];return Ma&&Ma.call(e,function(R){T.push(d(R,e))}),Ya("Set",vn.call(e),T,m)}if(Ip(e))return Un("WeakMap");if(Pp(e))return Un("WeakSet");if(Rp(e))return Un("WeakRef");if(_p(e))return hr(d(Number(e)));if(Tp(e))return hr(d(Jn.call(e)));if(Dp(e))return hr(pp.call(e));if(Sp(e))return hr(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Ct)return"{ [object globalThis] }";if(!wp(e)&&!Xa(e)){var D=tn(e,d),N=ja?ja(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",x=!N&&xt&&Object(e)===e&&xt in e?Li.call(be(e),8,-1):C?"Object":"",U=N||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",S=U+(x||C?"["+Wt.call(qa.call([],x||[],C||[]),": ")+"] ":"");return D.length===0?S+"{}":m?S+"{"+ri(D,m)+"}":S+"{ "+Wt.call(D,", ")+" }"}return String(e)};function Ns(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Ep(t){return me.call(String(t),/"/g,"&quot;")}function ei(t){return be(t)==="[object Array]"&&(!xt||!(typeof t=="object"&&xt in t))}function wp(t){return be(t)==="[object Date]"&&(!xt||!(typeof t=="object"&&xt in t))}function Xa(t){return be(t)==="[object RegExp]"&&(!xt||!(typeof t=="object"&&xt in t))}function Ap(t){return be(t)==="[object Error]"&&(!xt||!(typeof t=="object"&&xt in t))}function Sp(t){return be(t)==="[object String]"&&(!xt||!(typeof t=="object"&&xt in t))}function _p(t){return be(t)==="[object Number]"&&(!xt||!(typeof t=="object"&&xt in t))}function Dp(t){return be(t)==="[object Boolean]"&&(!xt||!(typeof t=="object"&&xt in t))}function Ps(t){if(er)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Qn)return!1;try{return Qn.call(t),!0}catch{}return!1}function Tp(t){if(!t||typeof t!="object"||!Jn)return!1;try{return Jn.call(t),!0}catch{}return!1}var Cp=Object.prototype.hasOwnProperty||function(t){return t in this};function he(t,e){return Cp.call(t,e)}function be(t){return hp.call(t)}function Op(t){if(t.name)return t.name;var e=gp.call(mp.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Bs(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function xp(t){if(!yn||!t||typeof t!="object")return!1;try{yn.call(t);try{vn.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Ip(t){if(!wr||!t||typeof t!="object")return!1;try{wr.call(t,wr);try{Ar.call(t,Ar)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Rp(t){if(!za||!t||typeof t!="object")return!1;try{return za.call(t),!0}catch{}return!1}function Np(t){if(!vn||!t||typeof t!="object")return!1;try{vn.call(t);try{yn.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Pp(t){if(!Ar||!t||typeof t!="object")return!1;try{Ar.call(t,Ar);try{wr.call(t,wr)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Bp(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Fs(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Fs(Li.call(t,0,e.maxStringLength),e)+n}var a=me.call(me.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Fp);return Ns(a,"single",e)}function Fp(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+yp.call(e.toString(16))}function hr(t){return"Object("+t+")"}function Un(t){return t+" { ? }"}function Ya(t,e,r,n){var a=n?ri(r,n):Wt.call(r,", ");return t+" ("+e+") {"+a+"}"}function kp(t){for(var e=0;e<t.length;e++)if(Bs(t[e],`
`)>=0)return!1;return!0}function Lp(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Wt.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Wt.call(Array(e+1),r)}}function ri(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Wt.call(t,","+r)+`
`+e.prev}function tn(t,e){var r=ei(t),n=[];if(r){n.length=t.length;for(var a=0;a<t.length;a++)n[a]=he(t,a)?e(t[a],t):""}var i=typeof Ln=="function"?Ln(t):[],o;if(er){o={};for(var s=0;s<i.length;s++)o["$"+i[s]]=i[s]}for(var u in t)he(t,u)&&(r&&String(Number(u))===u&&u<t.length||er&&o["$"+u]instanceof Symbol||(Is.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof Ln=="function")for(var l=0;l<i.length;l++)Rs.call(t,i[l])&&n.push("["+e(i[l])+"]: "+e(t[i[l]],t));return n}var Ui=xe,ir=op,Up=bp,Mp=Ui("%TypeError%"),en=Ui("%WeakMap%",!0),rn=Ui("%Map%",!0),zp=ir("WeakMap.prototype.get",!0),$p=ir("WeakMap.prototype.set",!0),qp=ir("WeakMap.prototype.has",!0),Gp=ir("Map.prototype.get",!0),jp=ir("Map.prototype.set",!0),Hp=ir("Map.prototype.has",!0),Mi=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Vp=function(t,e){var r=Mi(t,e);return r&&r.value},Wp=function(t,e,r){var n=Mi(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Xp=function(t,e){return!!Mi(t,e)},Yp=function(){var e,r,n,a={assert:function(i){if(!a.has(i))throw new Mp("Side channel does not contain "+Up(i))},get:function(i){if(en&&i&&(typeof i=="object"||typeof i=="function")){if(e)return zp(e,i)}else if(rn){if(r)return Gp(r,i)}else if(n)return Vp(n,i)},has:function(i){if(en&&i&&(typeof i=="object"||typeof i=="function")){if(e)return qp(e,i)}else if(rn){if(r)return Hp(r,i)}else if(n)return Xp(n,i);return!1},set:function(i,o){en&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new en),$p(e,i,o)):rn?(r||(r=new rn),jp(r,i,o)):(n||(n={key:{},next:null}),Wp(n,i,o))}};return a},Zp=String.prototype.replace,Kp=/%20/g,Mn={RFC1738:"RFC1738",RFC3986:"RFC3986"},zi={default:Mn.RFC3986,formatters:{RFC1738:function(t){return Zp.call(t,Kp,"+")},RFC3986:function(t){return String(t)}},RFC1738:Mn.RFC1738,RFC3986:Mn.RFC3986},Jp=zi,zn=Object.prototype.hasOwnProperty,Ee=Array.isArray,Vt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Qp=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Ee(n)){for(var a=[],i=0;i<n.length;++i)typeof n[i]<"u"&&a.push(n[i]);r.obj[r.prop]=a}}},ks=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},a=0;a<e.length;++a)typeof e[a]<"u"&&(n[a]=e[a]);return n},th=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Ee(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!zn.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var a=e;return Ee(e)&&!Ee(r)&&(a=ks(e,n)),Ee(e)&&Ee(r)?(r.forEach(function(i,o){if(zn.call(e,o)){var s=e[o];s&&typeof s=="object"&&i&&typeof i=="object"?e[o]=t(s,i,n):e.push(i)}else e[o]=i}),e):Object.keys(r).reduce(function(i,o){var s=r[o];return zn.call(i,o)?i[o]=t(i[o],s,n):i[o]=s,i},a)},eh=function(e,r){return Object.keys(r).reduce(function(n,a){return n[a]=r[a],n},e)},rh=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},nh=function(e,r,n,a,i){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var s="",u=0;u<o.length;++u){var l=o.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===Jp.RFC1738&&(l===40||l===41)){s+=o.charAt(u);continue}if(l<128){s=s+Vt[l];continue}if(l<2048){s=s+(Vt[192|l>>6]+Vt[128|l&63]);continue}if(l<55296||l>=57344){s=s+(Vt[224|l>>12]+Vt[128|l>>6&63]+Vt[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|o.charCodeAt(u)&1023),s+=Vt[240|l>>18]+Vt[128|l>>12&63]+Vt[128|l>>6&63]+Vt[128|l&63]}return s},ih=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],a=0;a<r.length;++a)for(var i=r[a],o=i.obj[i.prop],s=Object.keys(o),u=0;u<s.length;++u){var l=s[u],p=o[l];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(r.push({obj:o,prop:l}),n.push(p))}return Qp(r),e},ah=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},oh=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},sh=function(e,r){return[].concat(e,r)},uh=function(e,r){if(Ee(e)){for(var n=[],a=0;a<e.length;a+=1)n.push(r(e[a]));return n}return r(e)},Ls={arrayToObject:ks,assign:eh,combine:sh,compact:ih,decode:rh,encode:nh,isBuffer:oh,isRegExp:ah,maybeMap:uh,merge:th},Us=Yp,on=Ls,Sr=zi,lh=Object.prototype.hasOwnProperty,Za={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},ne=Array.isArray,ch=Array.prototype.push,Ms=function(t,e){ch.apply(t,ne(e)?e:[e])},fh=Date.prototype.toISOString,Ka=Sr.default,Tt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:on.encode,encodeValuesOnly:!1,format:Ka,formatter:Sr.formatters[Ka],indices:!1,serializeDate:function(e){return fh.call(e)},skipNulls:!1,strictNullHandling:!1},dh=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},$n={},ph=function t(e,r,n,a,i,o,s,u,l,p,m,d,h,c,f,y){for(var g=e,v=y,w=0,A=!1;(v=v.get($n))!==void 0&&!A;){var _=v.get(e);if(w+=1,typeof _<"u"){if(_===w)throw new RangeError("Cyclic object value");A=!0}typeof v.get($n)>"u"&&(w=0)}if(typeof u=="function"?g=u(r,g):g instanceof Date?g=m(g):n==="comma"&&ne(g)&&(g=on.maybeMap(g,function($){return $ instanceof Date?m($):$})),g===null){if(i)return s&&!c?s(r,Tt.encoder,f,"key",d):r;g=""}if(dh(g)||on.isBuffer(g)){if(s){var T=c?r:s(r,Tt.encoder,f,"key",d);return[h(T)+"="+h(s(g,Tt.encoder,f,"value",d))]}return[h(r)+"="+h(String(g))]}var D=[];if(typeof g>"u")return D;var N;if(n==="comma"&&ne(g))c&&s&&(g=on.maybeMap(g,s)),N=[{value:g.length>0?g.join(",")||null:void 0}];else if(ne(u))N=u;else{var C=Object.keys(g);N=l?C.sort(l):C}for(var x=a&&ne(g)&&g.length===1?r+"[]":r,U=0;U<N.length;++U){var S=N[U],R=typeof S=="object"&&typeof S.value<"u"?S.value:g[S];if(!(o&&R===null)){var b=ne(g)?typeof n=="function"?n(x,S):x:x+(p?"."+S:"["+S+"]");y.set(e,w);var F=Us();F.set($n,y),Ms(D,t(R,b,n,a,i,o,n==="comma"&&c&&ne(g)?null:s,u,l,p,m,d,h,c,f,F))}}return D},hh=function(e){if(!e)return Tt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Tt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Sr.default;if(typeof e.format<"u"){if(!lh.call(Sr.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var a=Sr.formatters[n],i=Tt.filter;return(typeof e.filter=="function"||ne(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Tt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Tt.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Tt.charsetSentinel,delimiter:typeof e.delimiter>"u"?Tt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Tt.encode,encoder:typeof e.encoder=="function"?e.encoder:Tt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Tt.encodeValuesOnly,filter:i,format:n,formatter:a,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Tt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Tt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Tt.strictNullHandling}},mh=function(t,e){var r=t,n=hh(e),a,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):ne(n.filter)&&(i=n.filter,a=i);var o=[];if(typeof r!="object"||r===null)return"";var s;e&&e.arrayFormat in Za?s=e.arrayFormat:e&&"indices"in e?s=e.indices?"indices":"repeat":s="indices";var u=Za[s];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=u==="comma"&&e&&e.commaRoundTrip;a||(a=Object.keys(r)),n.sort&&a.sort(n.sort);for(var p=Us(),m=0;m<a.length;++m){var d=a[m];n.skipNulls&&r[d]===null||Ms(o,ph(r[d],d,u,l,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,p))}var h=o.join(n.delimiter),c=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),h.length>0?c+h:""},rr=Ls,ni=Object.prototype.hasOwnProperty,gh=Array.isArray,wt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:rr.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},yh=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},zs=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},vh="utf8=%26%2310003%3B",bh="utf8=%E2%9C%93",Eh=function(e,r){var n={__proto__:null},a=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=r.parameterLimit===1/0?void 0:r.parameterLimit,o=a.split(r.delimiter,i),s=-1,u,l=r.charset;if(r.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===bh?l="utf-8":o[u]===vh&&(l="iso-8859-1"),s=u,u=o.length);for(u=0;u<o.length;++u)if(u!==s){var p=o[u],m=p.indexOf("]="),d=m===-1?p.indexOf("="):m+1,h,c;d===-1?(h=r.decoder(p,wt.decoder,l,"key"),c=r.strictNullHandling?null:""):(h=r.decoder(p.slice(0,d),wt.decoder,l,"key"),c=rr.maybeMap(zs(p.slice(d+1),r),function(f){return r.decoder(f,wt.decoder,l,"value")})),c&&r.interpretNumericEntities&&l==="iso-8859-1"&&(c=yh(c)),p.indexOf("[]=")>-1&&(c=gh(c)?[c]:c),ni.call(n,h)?n[h]=rr.combine(n[h],c):n[h]=c}return n},wh=function(t,e,r,n){for(var a=n?e:zs(e,r),i=t.length-1;i>=0;--i){var o,s=t[i];if(s==="[]"&&r.parseArrays)o=[].concat(a);else{o=r.plainObjects?Object.create(null):{};var u=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=parseInt(u,10);!r.parseArrays&&u===""?o={0:a}:!isNaN(l)&&s!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[],o[l]=a):u!=="__proto__"&&(o[u]=a)}a=o}return a},Ah=function(e,r,n,a){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(i),l=u?i.slice(0,u.index):i,p=[];if(l){if(!n.plainObjects&&ni.call(Object.prototype,l)&&!n.allowPrototypes)return;p.push(l)}for(var m=0;n.depth>0&&(u=s.exec(i))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&ni.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(u[1])}return u&&p.push("["+i.slice(u.index)+"]"),wh(p,r,n,a)}},Sh=function(e){if(!e)return wt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?wt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?wt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:wt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:wt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:wt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:wt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:wt.comma,decoder:typeof e.decoder=="function"?e.decoder:wt.decoder,delimiter:typeof e.delimiter=="string"||rr.isRegExp(e.delimiter)?e.delimiter:wt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:wt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:wt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:wt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:wt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:wt.strictNullHandling}},_h=function(t,e){var r=Sh(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Eh(t,r):t,a=r.plainObjects?Object.create(null):{},i=Object.keys(n),o=0;o<i.length;++o){var s=i[o],u=Ah(s,n[s],r,typeof t=="string");a=rr.merge(a,u,r)}return r.allowSparse===!0?a:rr.compact(a)},Dh=mh,Th=_h,Ch=zi,$s={formats:Ch,parse:Th,stringify:Dh};const Oh=ii(),Xt=t=>Oh.emit("updateStatus",t),oe=JSON.parse(localStorage.getItem("session")||"{}"),Ue=(t,e)=>{var r=65535,n=+t,a=+e,i=r&n,o=r&a;return 0|i*o+((r&n>>>16)*o+i*(r&a>>>16)<<16>>>0)},xh=(t,e=0)=>{let r=3735928559^e,n=1103547991^e;for(let a,i=0;i<t.length;i++)a=t.charCodeAt(i),r=Ue(r^a,2654435761),n=Ue(n^a,1597334677);return r=Ue(r^r>>>16,2246822507),r^=Ue(n^n>>>13,3266489909),n=Ue(n^n>>>16,2246822507),n^=Ue(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)},qs=Oe.create({timeout:1e3*60*30,responseType:"blob",headers:{Authorization:oe.token}}),te=Oe.create({timeout:1e3*60*30,baseURL:"https://apiv3.fansly.com/api/v1",headers:{Authorization:oe.token,"Cache-Control":"no-cache",Pragma:"no-cache"},withCredentials:!0});chrome.storage.onChanged.addListener((t,e)=>{if(e=="local"&&t.session){console.log("Session changed!");const r=t.session.newValue;if(!r)return;localStorage.setItem("session",JSON.stringify(r)),Object.keys(r).forEach(n=>{oe[n]=r[n]}),te.defaults.headers.Authorization=oe.token,qs.defaults.headers.Authorization=oe.token}});const Ja={};te.interceptors.request.use(t=>{var a;((a=t.method)==null?void 0:a.toUpperCase())=="GET"&&(t.params={...t.params,"ngsw-bypass":!0});const e=new URL(t.baseURL+t.url).pathname,r="Qindoj-mitci1-fevtev_"+e+"_"+oe.deviceId,n=Ja[e]||xh(r).toString(16);return Ja[e]=n,t.headers=new Eu({...t.headers,"fansly-client-id":oe.deviceId,"fansly-client-ts":Date.now().toString(),"fansly-session-id":oe.id,"fansly-client-check":n}),t});te.interceptors.response.use(t=>{if(t.status===200)return t.data});nr(te);nr(qs);async function Uh(){const e=(await te.get("/subscriptions")).response.subscriptions,r=e.map(i=>i.accountId);if(r.length===0)return[];const n=await Ih(r);e.map(i=>{i.accountId,i.subscriptionTierName});const a=[];for(const i of e){const o=n.response.find(u=>u.id==i.accountId);if(!o)continue;const s={with:o.avatar.width,height:o.avatar.height,url:""};for(const u of o.avatar.variants)if(u.type==1&&u.width*u.height<s.with*s.height){if(!u.locations||u.locations.length==0)continue;s.with=u.width,s.height=u.height,s.url=u.locations[0].location}a.push({id:o.id,username:o.username,displayName:o.displayName,avatarUrl:s.url,renewDate:i.renewDate,subscriptionTierName:i.subscriptionTierName})}return a}function Ih(t){return te.get("/account",{params:{ids:t.join(",")}})}const Gs=t=>{switch(t.split("/")[0]){case"image":return"Photo";case"video":return"Video";case"application":return"HLS";case"audio":return"Audio";default:return"Unknown"}},js=(t,e=3)=>{const r=t.variants;let n=null,a=0,i=0;t.locations&&t.locations.length>0&&(n=t,a=t.width,i=t.height);for(const o of r)o.type!=e&&(!o.locations||o.locations.length==0||o.width*o.height>a*i&&(n=o));return n};async function qn(t,e){var l,p;const r=new Set,{mediaType:n,dateTimeRange:a}=e,i=wu().value;let o;(!i||!i.isPro)&&(n==1&&(o=10),n==2&&(o=2));let s=!0;const u={locationId:t,locationType:1001,accountId:t,mediaType:n||"",before:"",after:"0",limit:30,offset:0};for(;s;){s=!1;const m=await te.get("/mediaoffers/location",{params:u});if(m.response.data.length==0)return[...r];const d=m.response.aggregationData.accountMedia,h=m.response.data,c=h.map(w=>w.mediaId),f=d.filter(w=>c.includes(w.mediaId)),{username:y}=m.response.aggregationData.accounts[0];for(const w of f){if(a?a[0]<w.createdAt&&w.createdAt<a[1]:!0){const{media:_,preview:T,access:D}=w;if(!D&&!T)continue;const C=js(D?_:T);if(!C)continue;const x=Gs(C.mimetype),U=w.createdAt;if(C.locations&&C.locations.length>0){let{width:S,height:R}=C,{location:b,metadata:F}=C.locations[0];const $=F?`${b}?${$s.stringify(F)}`:b;r.add({url:$,username:y,type:x,createdAt:U,width:S,height:R})}else console.log(C)}if(o&&r.size==o)return Xt(`Scraped ${r.size} accessible files.`),r}const g=(l=f.at(-1))==null?void 0:l.createdAt,v=(p=h.at(-1))==null?void 0:p.id;v&&g&&(u.before=v,s=a?a[0]<g:!0,Xt(`Scraped ${r.size} accessible files.`))}return[...r]}async function Qa(t,e){var u,l;const r=[],n={sortOrder:1,flags:0,subscriptionTierId:"",search:"",limit:25,offset:"0"};let a=!0,i="",o="";for(;a;){a=!1;const p=await te.get("/messaging/groups",{params:n}),m=p.response.data.find(d=>d.partnerAccountId==t);if(m)i=m.groupId,o=m.partnerUsername;else{const d=p.response.data;if(d.length==0)return Xt("No Message Group."),[];n.offset=d.at(-1).groupId,a=!0}}a=!0;const s={groupId:i,limit:25,before:""};for(;a;){a=!1;const p=await te.get("/message",{params:s});if(p.response.messages.length>0){const d=p.response.messages,h=p.response.accountMedia,c=p.response.accountMediaBundles,f=d.filter(w=>e?e[0]<w.createdAt&&w.createdAt<e[1]:!0),y=d.map(w=>w.attachments.map(A=>A.contentId)).flat();c.forEach(w=>{y.includes(w.id)&&(w.accountMediaIds.forEach(A=>y.push(A)),y.splice(y.indexOf(w.id),1))});for(const w of y){const A=h.find(P=>P.id==w),{media:_,preview:T,access:D}=A;if(!D&&!T)continue;let N;N=D?_:T;const C=js(N);if(!C)continue;const x=Gs(C.mimetype),U=A.createdAt;let{width:S,height:R}=C,{location:b,metadata:F}=C.locations[0];const $=F?`${b}?${$s.stringify(F)}`:b;r.push({url:$,username:o,type:x,createdAt:U,width:S,height:R})}const g=(u=f.at(-1))==null?void 0:u.createdAt,v=(l=d.at(-1))==null?void 0:l.id;v&&g&&(s.before=v,a=e?e[0]<g:!0,Xt(`Scraped ${r.length} accessible files.`))}}return r}var Rh=(t=>(t[t.Photos=1]="Photos",t[t.Videos=2]="Videos",t[t.Messages=-1]="Messages",t[t.All=0]="All",t))(Rh||{});async function Mh(t,e){const r=[];switch(e.mediaType){case 1:Xt("Scraping Photos..."),r.push(...await qn(t,e));break;case 2:Xt("Scraping Videos..."),r.push(...await qn(t,e));break;case-1:Xt("Scraping Messages..."),r.push(...await Qa(t,e.dateTimeRange));break;case 0:Xt("Scraping Media..."),r.push(...await qn(t,e)),Xt("Scraping Messages..."),r.push(...await Qa(t,e.dateTimeRange));break}const n=[...new Set(r)];return await bd(n,e.isZipPackage),Xt("Download Completed..."),n}async function Nh(t,e="fansly"){for(const r of t)chrome.downloads.download({url:r,filename:`${e}/${new URL(r).pathname.split("/").pop()}`,headers:[{name:"Authorization",value:oe.token}]})}function Ph(t){return te.get("/post",{params:{ids:t.join(",")}})}async function zh(t){const e=await Ph([t]),r=[],n=e.response.posts,a=e.response.accountMedia,i=e.response.accountMediaBundles;for(const s of n){const u=s.attachments;for(const l of u){let p=i.filter(m=>m.id==l.contentId).map(m=>m.accountMediaIds).flat();p=p.concat(a.filter(m=>m.id==l.contentId).map(m=>m.id));for(const m of p){const{media:d,preview:h}=a.find(c=>c.id==m);d&&d.locations.length>0?r.push(d.locations[0].location):h&&h.locations.length>0&&r.push(h.locations[0].location)}}}const o=[...new Set(r)];await Nh(o,e.response.accounts[0].username)}export{Lh as E,Rh as M,yi as T,Oo as a,zh as b,Mh as d,Uh as g,xo as u};
