import{_ as V}from"./Button-16decfdb.js";import{_ as v,a as S}from"./GoogleAuth.vue_vue_type_script_setup_true_lang-31ee14fc.js";import{z as h,a3 as C,A as N,D as R,Q as b,F as w,G as x,R as r,I as a,H as m,S as q,N as y,aA as B,ap as $}from"./common-1bc81878.js";import{a8 as z,a4 as E,a6 as c,a9 as I}from"./index-a8514ad4.js";function D(n){return n=n.trim(),/^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/.test(n)}const L={class:"space-y-3"},P={class:"mt-1! block text-right font-bold text-current"},U=h({__name:"EmailAuth",emits:["success","error"],setup(n,{emit:i}){const l=i,o=C(z),e=N({email:o==null?void 0:o.value,password:""}),t=R(!1),f=async()=>{if(e.email){if(!D(e.email)){c({type:"error",message:"Incorrect email address."});return}}else{c({type:"error",message:"Email is required."});return}if(!e.password){c({type:"error",message:"Password is required."});return}t.value=!0;try{const s=await B(e);$(s),l("success",s)}catch(s){s.code===10002?c({type:"error",message:"Email or password is incorrect."}):c({type:"error",message:"Network error please check and retry."}),l("error",s.msg)}t.value=!1},d=E();async function p(){await d.push("/register")}return(s,u)=>{const g=v,A=b("RouterLink"),k=V;return w(),x("div",L,[r(g,{modelValue:a(e).email,"onUpdate:modelValue":u[0]||(u[0]=_=>a(e).email=_),type:"text",icon:"i-line-md:email-twotone-alt text-blue-500",placeholder:"Enter your email address.",autofocus:"",required:""},null,8,["modelValue"]),r(g,{modelValue:a(e).password,"onUpdate:modelValue":u[1]||(u[1]=_=>a(e).password=_),type:"password",icon:"i-ant-design:lock-twotone text-orange-500",placeholder:"Enter your password.",required:""},null,8,["modelValue"]),m("p",P,[r(A,{class:"hover:underline hover:underline-current",to:"/resetPsw"},{default:q(()=>[y("Forget Password?")]),_:1})]),r(k,{loading:a(t),icon:"i-ic:twotone-security",type:"success",text:"Sign in with Email",onClick:f},null,8,["loading"]),m("p",{class:"text-sm font-bold text-dark-50 text-center"},[y(" New to SaveMyDayApp? "),m("span",{class:"text-current underline underline-current cursor-pointer",onClick:p},"Create my account.")])])}}}),Z={space:"y-3",md:"w-lg!"},F=m("p",{text:"sm center"},"or",-1),K=h({__name:"Login",setup(n){const i=E(),l=I();function o(){var t;i.push(((t=l.query)==null?void 0:t.next)||"/"),console.log("Auth successful.")}function e(t){console.log("Auth faild",t)}return(t,f)=>{const d=S,p=U;return w(),x("div",Z,[r(d,{onSuccess:o,onError:e}),F,r(p,{onSuccess:o,onError:e})])}}});export{K as default};
