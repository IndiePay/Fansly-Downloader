import{_ as C}from"./Button-16decfdb.js";import{aa as h,a4 as N,y as R,a6 as p,a7 as B}from"./index-a8514ad4.js";import{E,b as D}from"./el-radio-group-87469a92.js";import{z as M,w as P,a1 as G,A as H,Q as O,G as a,I as t,R as o,H as s,N as _,O as W,af as d,S as y,F as n,L as Y,M as j,aH as z,aI as A}from"./common-1bc81878.js";const l=c=>(Y("data-v-d217cf51"),c=c(),j(),c),F={class:"flex flex-col space-y-2",md:"w-500px"},K={key:0,class:"flex flex-row items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-500 text-xs border border-blue-200 rounded-md"},L={key:1,class:""},Q=l(()=>s("h2",{class:"text-base font-bold"},"You'll miss out on...",-1)),q=l(()=>s("ul",{class:"flex flex-col justify-center items-center text-gray-600 text-sm list-circle"},[s("li",null,"Bulk download images and videos.")],-1)),J=[Q,q],X={key:2,class:"step"},Z=l(()=>s("h2",null,"Why do you want to cancel?",-1)),$={key:3,class:"step"},ee=l(()=>s("h2",null,"Why do you want to cancel?",-1)),se={class:"button-group"},te=l(()=>s("span",null,[_(" Keep Pro "),s("sup",null,"+")],-1)),oe=M({__name:"Unsubscribe",setup(c){const{grade:x,email:b,token:g,member_time:w}=P().value;h("unsubscribe_page");const k=G(()=>Math.ceil((new Date(w).getTime()-new Date().getTime())/(1e3*60*60*24))),e=H({index:1,hasTips:!0,reason:"",feedback:""});async function v(){switch(e.index){case 1:e.index++;break;case 2:if(e.reason.length===0){p({type:"warning",message:"Please select the reason for unsubscribe."});return}e.hasTips=!1,e.index++;break;case 3:e.feedback!=""&&await z({email:b,message:e.feedback}),await h({name:"unsubscribe_button",data:{reason:e.reason,feedback:e.feedback}});try{await A({grade:x,email:b,token:g}),p({type:"success",message:"Unsubscribed successfully."}),m.push("/")}catch{p({type:"error",message:"Network error, please try again later."})}break}}const m=N();function I(){m.push("/subscribe")}return(V,r)=>{const U=O("ant-design:bell-twotone"),i=D,S=E,T=R,f=C;return n(),a("div",F,[t(e).hasTips?(n(),a("div",K,[o(U),s("p",null,[_(" You still have "),s("strong",null,W(t(k))+" days left",1),_(" in your Pro period. ")])])):d("",!0),t(e).index==1?(n(),a("div",L,J)):d("",!0),t(e).index==2?(n(),a("div",X,[Z,o(S,{modelValue:t(e).reason,"onUpdate:modelValue":r[0]||(r[0]=u=>t(e).reason=u)},{default:y(()=>[o(i,{label:"I don't use all of the feature"}),o(i,{label:"It doesn't work properly"}),o(i,{label:"I want to change to a yearly subscription"}),o(i,{label:"Other"})]),_:1},8,["modelValue"])])):d("",!0),t(e).index==3?(n(),a("div",$,[ee,o(T,{modelValue:t(e).feedback,"onUpdate:modelValue":r[1]||(r[1]=u=>t(e).feedback=u),rows:4,type:"textarea",maxlength:"200",placeholder:"Tell us why you're canceling...","show-word-limit":""},null,8,["modelValue"])])):d("",!0),s("div",se,[o(f,{icon:"i-ant-design:crown-twotone",type:"success",onClick:I},{default:y(()=>[te]),_:1}),o(f,{icon:"i-ant-design:alert-twotone",type:"danger",text:"Canceled subscription",onclick:v})])])}}});const re=B(oe,[["__scopeId","data-v-d217cf51"]]);export{re as default};
