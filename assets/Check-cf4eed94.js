import{_ as C}from"./Button-16decfdb.js";import{a9 as E}from"./index-a8514ad4.js";import{z as b,a1 as k,A as N,D as u,a3 as S,G as a,H as e,O as f,I as t,af as _,R as h,F as c}from"./common-1bc81878.js";const R={class:"flex flex-col items-center space-y-5"},B={class:"flex items-center space-x-5"},$=e("div",{class:"i-fa:warning w-8 h-8 text-orange-500"},null,-1),j=e("h1",{class:"text-2xl font-bold text-gray-dark"},"An error occurred during the download process",-1),q={class:"text-sm text-gray"},F={class:"w-md text-lg space-y-3"},M={class:"flex justify-between"},V={class:"flex-row-center space-x-3"},A=e("p",null,"Session Status: ",-1),D={key:0,class:"i-fa:question text-gray"},H={key:1,class:"i-fa:close text-red-400 mx-auto"},O={key:2,class:"i-fa:check text-green-400 mx-auto"},P={class:"w-30"},Y={class:"flex justify-between"},z={class:"flex-row-center space-x-3"},G=e("p",null,"Network Status: ",-1),I={key:0,class:"i-fa:question text-gray"},J={key:1,class:"i-fa:close text-red-400 mx-auto"},K={key:2,class:"i-fa:check text-green-400 mx-auto"},L={class:"w-30"},T={key:0,class:"w-full p-4 border rounded-md text-base text-dark bg-orange-100"},ee=b({__name:"Check",setup(Q){const p=s=>{switch(s.status){case 401:return"Your session has expired, please log in again.";case 429:return"Limit refresh every minute, please try again later.";default:return`${s.code}: ${s.message}`}},m=E(),x=k(()=>{const s=JSON.parse(m.query.error);return p(s)}),o=N({session:0,network:0}),i=u(!1),y=async()=>{i.value=!0;const s=await chrome.runtime.sendMessage({method:"RECHECK"});o.session=s?2:1,i.value=!1},l=u(!1),r=u(""),g=S("checkFn"),v=async()=>{var s;l.value=!0;try{const n=await g.value();o.network=2,r.value=""}catch(n){n.status||(n.status=((s=n.response)==null?void 0:s.status)||0),r.value=p(n),o.network=1}l.value=!1},w=k(()=>o.session==2&&o.network==2);return(s,n)=>{const d=C;return c(),a("div",R,[e("div",B,[$,e("div",null,[j,e("p",q,f(t(x)),1)])]),e("div",F,[e("div",M,[e("div",V,[A,t(o).session==0?(c(),a("div",D)):t(o).session==1?(c(),a("div",H)):t(o).session==2?(c(),a("div",O)):_("",!0)]),e("div",P,[h(d,{loading:t(i),onClick:y,type:"primary",text:"Check"},null,8,["loading"])])]),e("div",Y,[e("div",z,[G,t(o).network==0?(c(),a("div",I)):t(o).network==1?(c(),a("div",J)):t(o).network==2?(c(),a("div",K)):_("",!0)]),e("div",L,[h(d,{loading:t(l),onClick:v,type:"primary",text:"Check"},null,8,["loading"])])])]),t(r)?(c(),a("div",T,[e("p",null,f(t(r)),1)])):_("",!0),h(d,{type:t(w)?"success":"primary",icon:"i-ant-design:home-twotone",onClick:n[0]||(n[0]=U=>s.$router.push("/")),text:"RETRY"},null,8,["type"])])}}});export{ee as default};
